<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>字节跳动 Android 岗面试 | Tamsiree</title><meta name="author" content="Tamsiree,tamsiree.com@gmail.com"><meta name="copyright" content="Tamsiree"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="众所周知所谓的“面试造航母，上班拧螺丝”。开玩笑，请勿见怪[狗头]保命。">
<meta property="og:type" content="article">
<meta property="og:title" content="字节跳动 Android 岗面试">
<meta property="og:url" content="https://tamsiree.com/Interview/Android/%E5%AD%97%E8%8A%82%E8%B7%B3%E5%8A%A8Android%E5%B2%97%E9%9D%A2%E8%AF%95/index.html">
<meta property="og:site_name" content="Tamsiree">
<meta property="og:description" content="众所周知所谓的“面试造航母，上班拧螺丝”。开玩笑，请勿见怪[狗头]保命。">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/Tamsiree/Assets@master/Picture/Blog/Cover/mianju.jpg">
<meta property="article:published_time" content="2020-05-26T02:05:26.000Z">
<meta property="article:modified_time" content="2025-11-05T13:53:39.404Z">
<meta property="article:author" content="Tamsiree">
<meta property="article:tag" content="Android">
<meta property="article:tag" content="Interview">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/Tamsiree/Assets@master/Picture/Blog/Cover/mianju.jpg"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "字节跳动 Android 岗面试",
  "url": "https://tamsiree.com/Interview/Android/%E5%AD%97%E8%8A%82%E8%B7%B3%E5%8A%A8Android%E5%B2%97%E9%9D%A2%E8%AF%95/",
  "image": "https://cdn.jsdelivr.net/gh/Tamsiree/Assets@master/Picture/Blog/Cover/mianju.jpg",
  "datePublished": "2020-05-26T02:05:26.000Z",
  "dateModified": "2025-11-05T13:53:39.404Z",
  "author": [
    {
      "@type": "Person",
      "name": "Tamsiree",
      "url": "https://tamsiree.com"
    }
  ]
}</script><link rel="shortcut icon" href="https://cdn.jsdelivr.net/gh/Tamsiree/Assets@master/Avatar/avatar_sky_circle.png"><link rel="canonical" href="https://tamsiree.com/Interview/Android/%E5%AD%97%E8%8A%82%E8%B7%B3%E5%8A%A8Android%E5%B2%97%E9%9D%A2%E8%AF%95/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//fonts.googleapis.com" crossorigin=""/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="manifest" href="/manifest.json"/><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"/><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"/><link rel="stylesheet" href="/css/index.css?v=5.5.3"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@7.1.0/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@6.1.7/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!true && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          const mediaQueryDark = window.matchMedia('(prefers-color-scheme: dark)')
          const mediaQueryLight = window.matchMedia('(prefers-color-scheme: light)')

          if (theme === undefined) {
            if (mediaQueryLight.matches) activateLightMode()
            else if (mediaQueryDark.matches) activateDarkMode()
            else {
              const hour = new Date().getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            mediaQueryDark.addEventListener('change', () => {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else {
            theme === 'light' ? activateLightMode() : activateDarkMode()
          }
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script async="async" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script>(adsbygoogle = window.adsbygoogle || []).push({
  google_ad_client: 'ca-pub-8688374801147098',
  enable_page_level_ads: 'true'
});</script><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web&amp;display=swap" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"top_n_per_article":1,"unescape":false,"pagination":{"enable":false,"hitsPerPage":8},"languages":{"hits_empty":"未找到符合您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简"},
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":false},
  copy: {
    success: '复制成功',
    error: '复制失败',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"limitCount":50,"languages":{"author":"作者: Tamsiree","link":"链接: ","source":"来源: Tamsiree","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  lightbox: 'fancybox',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.12.0/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: true,
  islazyloadPlugin: true,
  isAnchor: true,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '字节跳动 Android 岗面试',
  isHighlightShrink: false,
  isToc: true,
  pageType: 'post'
}</script><meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests"><script>if (window.location.protocol !== 'https:' && window.location.hostname !== 'localhost' && window.location.hostname !== '127.0.0.1') { window.location.href = window.location.href.replace('http:', 'https:'); }</script><meta name="generator" content="Hexo 8.1.1"><link rel="alternate" href="/atom.xml" title="Tamsiree" type="application/atom+xml">
</head><body><div class="bg-animation" id="web_bg" style="background-color: #f0f0f0;"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="/images/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/Tamsiree/Assets@master/Avatar/avatar_sky_circle.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">200</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">140</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">143</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-keyboard"></i><span> 目录</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-torah"></i><span> 时间轴</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-leaf"></i><span> 风向标</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-dragon"></i><span> 寻龙尺</span></a></li></ul></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-icons"></i><span> 回味</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li><li><a class="site-page child" href="/gallery/"><i class="fa-fw fas fa-camera-retro"></i><span> 画廊</span></a></li><li><a class="site-page child" href="/book/"><i class="fa-fw fas fa-book"></i><span> 书屋</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 神秘链接</span></a></div><div class="menus_item"><a class="site-page" href="/messageboard/"><i class="fa-fw fas fa-clipboard-list"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-id-badge"></i><span> 关于</span></a></div><div class="menus_item"><a class="site-page" href="/night_sky/"><i class="fa-fw fas fa-magic"></i><span> 冥想空间</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(https://cdn.jsdelivr.net/gh/Tamsiree/Assets@master/Picture/Blog/Cover/mianju.jpg);"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">Tamsiree</span></a><a class="nav-page-title" href="/"><span class="site-name">字节跳动 Android 岗面试</span><span class="site-name"><i class="fa-solid fa-circle-arrow-left"></i><span>  返回首页</span></span></a></span><div id="menus"><div id="search-button"><span class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></span></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-keyboard"></i><span> 目录</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-torah"></i><span> 时间轴</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-leaf"></i><span> 风向标</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-dragon"></i><span> 寻龙尺</span></a></li></ul></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-icons"></i><span> 回味</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li><li><a class="site-page child" href="/gallery/"><i class="fa-fw fas fa-camera-retro"></i><span> 画廊</span></a></li><li><a class="site-page child" href="/book/"><i class="fa-fw fas fa-book"></i><span> 书屋</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 神秘链接</span></a></div><div class="menus_item"><a class="site-page" href="/messageboard/"><i class="fa-fw fas fa-clipboard-list"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-id-badge"></i><span> 关于</span></a></div><div class="menus_item"><a class="site-page" href="/night_sky/"><i class="fa-fw fas fa-magic"></i><span> 冥想空间</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">字节跳动 Android 岗面试</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2020-05-26T02:05:26.000Z" title="发表于 2020-05-26 10:05:26">2020-05-26</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2025-11-05T13:53:39.404Z" title="更新于 2025-11-05 21:53:39">2025-11-05</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Interview/">Interview</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Interview/Android/">Android</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">总字数:</span><span class="word-count">5.1k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>16分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">浏览量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><h1 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h1><h2 id="网络"><a href="#网络" class="headerlink" title="网络"></a>网络</h2><h4 id="网络协议模型"><a href="#网络协议模型" class="headerlink" title="网络协议模型"></a>网络协议模型</h4><p>** 应用层 **：负责处理特定的应用程序细节<br>HTTP、FTP、DNS</p>
<p>** 传输层 **：为两台主机提供端到端的基础通信<br>TCP、UDP</p>
<p>** 网络层 **：控制分组传输、路由选择等<br>IP</p>
<p>** 链路层 **：操作系统设备驱动程序、网卡相关接口</p>
<h4 id="TCP-和-UDP-区别"><a href="#TCP-和-UDP-区别" class="headerlink" title="TCP 和 UDP 区别"></a>TCP 和 UDP 区别</h4><p>TCP 连接；可靠；有序；面向字节流；速度慢；较重量；全双工；适用于文件传输、浏览器等</p>
<ul>
<li>  全双工：A 给 B 发消息的同时，B 也能给 A 发</li>
<li>  半双工：A 给 B 发消息的同时，B 不能给 A 发</li>
</ul>
<p>UDP 无连接；不可靠；无序；面向报文；速度快；轻量；适用于即时通讯、视频通话等</p>
<h4 id="TCP-三次握手"><a href="#TCP-三次握手" class="headerlink" title="TCP 三次握手"></a>TCP 三次握手</h4><p>A：你能听到吗？<br>B：我能听到，你能听到吗？<br>A：我能听到，开始吧</p>
<p>A 和 B 两方都要能确保：我说的话，你能听到；你说的话，我能听到。所以需要三次握手</p>
<h4 id="TCP-四次挥手"><a href="#TCP-四次挥手" class="headerlink" title="TCP 四次挥手"></a>TCP 四次挥手</h4><p>A：我说完了<br>B：我知道了，等一下，我可能还没说完<br>B：我也说完了<br>A：我知道了，结束吧</p>
<p>B 收到 A 结束的消息后 B 可能还没说完，没法立即回复结束标示，只能等说完后再告诉 A ：我说完了。</p>
<h4 id="POST-和-GET-区别"><a href="#POST-和-GET-区别" class="headerlink" title="POST 和 GET 区别"></a>POST 和 GET 区别</h4><p>Get 参数放在 url 中；Post 参数放在 request Body 中<br>Get 可能不安全，因为参数放在 url 中</p>
<h4 id="HTTPS"><a href="#HTTPS" class="headerlink" title="HTTPS"></a>HTTPS</h4><p>HTTP 是超文本传输协议，明文传输；HTTPS 使用 SSL 协议对 HTTP 传输数据进行了加密</p>
<p>HTTP 默认 80 端口；HTTPS 默认 443 端口</p>
<p>优点：安全<br>缺点：费时、SSL 证书收费，加密能力还是有限的，但是比 HTTP 强多了</p>
<h2 id="Java-基础-amp-容器-amp-同步-amp-设计模式"><a href="#Java-基础-amp-容器-amp-同步-amp-设计模式" class="headerlink" title="Java 基础 &amp; 容器 &amp; 同步 &amp; 设计模式"></a>Java 基础 &amp; 容器 &amp; 同步 &amp; 设计模式</h2><h4 id="StringBuilder、StringBuffer、-、String-concat-链接字符串："><a href="#StringBuilder、StringBuffer、-、String-concat-链接字符串：" class="headerlink" title="StringBuilder、StringBuffer、+、String.concat 链接字符串："></a>StringBuilder、StringBuffer、+、String.concat 链接字符串：</h4><ul>
<li>  StringBuffer 线程安全，StringBuilder 线程不安全</li>
<li><ul>
<li>实际上是用 StringBuilder 来实现的，所以非循环体可以直接用 +，循环体不行，因为会频繁创建 StringBuilder</li>
</ul>
</li>
<li>  String.concat 实质是 new String ，效率也低，耗时排序：StringBuilder &lt; StringBuffer &lt; concat &lt; +</li>
</ul>
<h4 id="Java-泛型擦除"><a href="#Java-泛型擦除" class="headerlink" title="Java 泛型擦除"></a>Java 泛型擦除</h4><ul>
<li>  修饰成员变量等类结构相关的泛型不会被擦除</li>
<li>  容器类泛型会被擦除</li>
</ul>
<h4 id="ArrayList、LinkedList"><a href="#ArrayList、LinkedList" class="headerlink" title="ArrayList、LinkedList"></a>ArrayList、LinkedList</h4><p><strong>ArrayList</strong></p>
<p>基于数组实现，查找快：o(1)，增删慢：o(n)<br>初始容量为 10，扩容通过 System.arrayCopy 方法</p>
<p><strong>LinkedList</strong></p>
<p>基于双向链表实现，查找慢：o(n)，增删快：o(1)<br>封装了队列和栈的调用</p>
<h4 id="HashMap-、HashTable"><a href="#HashMap-、HashTable" class="headerlink" title="HashMap 、HashTable"></a>HashMap 、HashTable</h4><p><strong>HashMap</strong></p>
<ul>
<li>  基于数组和链表实现，数组是 HashMap 的主体；链表是为解决哈希冲突而存在的</li>
<li>当发生哈希冲突且链表 size 大于阈值时会扩容，JAVA 8 会将链表转为红黑树提高性能<br>  允许 key/value 为 null</li>
</ul>
<p><strong>HashTable</strong></p>
<ul>
<li>  数据结构和 HashMap 一样</li>
<li>  不允许 value 为 null</li>
<li>  线程安全</li>
</ul>
<h4 id="ArrayMap、SparseArray"><a href="#ArrayMap、SparseArray" class="headerlink" title="ArrayMap、SparseArray"></a>ArrayMap、SparseArray</h4><p><strong>ArrayMap</strong></p>
<ol>
<li>基于两个数组实现，一个存放 hash；一个存放键值对。扩容的时候只需要数组拷贝，不需要重建哈希表  </li>
<li>内存利用率高  </li>
<li>不适合存大量数据，因为会对 key 进行二分法查找（1000 以下）</li>
</ol>
<p><strong>SparseArray</strong></p>
<ol>
<li>基于两个数组实现，int 做 key  </li>
<li>内存利用率高  </li>
<li>不适合存大量数据，因为会对 key 进行二分法查找（1000 以下）</li>
</ol>
<h4 id="volatile-关键字"><a href="#volatile-关键字" class="headerlink" title="volatile 关键字"></a>volatile 关键字</h4><ul>
<li>  只能用来修饰变量，适用修饰可能被多线程同时访问的变量</li>
<li>  相当于轻量级的 synchronized，volatitle 能保证有序性（禁用指令重排序）、可见性；后者还能保证原子性</li>
<li>  变量位于主内存中，每个线程还有自己的工作内存，变量在自己线程的工作内存中有份拷贝，线程直接操作的是这个拷贝</li>
<li>  被 volatile 修饰的变量改变后会立即同步到主内存，保持变量的可见性。</li>
</ul>
<p>** 双重检查单例，为什么要加 volatile？**</p>
<p>1.volatile 想要解决的问题是，在另一个线程中想要使用 instance，发现 instance!=null，但是实际上 instance 还未初始化完毕这个问题</p>
<ol start="2">
<li>将 instance =newInstance(); 拆分为 3 句话是。1. 分配内存 2. 初始化 3. 将 instance 指向分配的内存空</li>
</ol>
<p>3.volatile 可以禁止指令重排序，确保先执行 2，后执行 3</p>
<h4 id="wait-和-sleep"><a href="#wait-和-sleep" class="headerlink" title="wait 和 sleep"></a>wait 和 sleep</h4><ul>
<li>  sleep 是 Thread 的静态方法，可以在任何地方调用</li>
<li>  wait 是 Object 的成员方法，只能在 synchronized 代码块中调用，否则会报 IllegalMonitorStateException 非法监控状态异常</li>
<li>  sleep 不会释放共享资源锁，wait 会释放共享资源锁</li>
</ul>
<h4 id="lock-和-synchronized"><a href="#lock-和-synchronized" class="headerlink" title="lock 和 synchronized"></a>lock 和 synchronized</h4><ul>
<li>  synchronized 是 Java 关键字，内置特性；Lock 是一个接口</li>
<li>  synchronized 会自动释放锁；lock 需要手动释放，所以需要写到 try catch 块中并在 finally 中释放锁</li>
<li>  synchronized 无法中断等待锁；lock 可以中断</li>
<li>  Lock 可以提高多个线程进行读 / 写操作的效率</li>
<li>  竞争资源激烈时，lock 的性能会明显的优于 synchronized</li>
</ul>
<h4 id="可重入锁"><a href="#可重入锁" class="headerlink" title="可重入锁"></a>可重入锁</h4><ul>
<li>  定义：已经获取到锁后，再次调用同步代码块 / 尝试获取锁时不必重新去申请锁，可以直接执行相关代码</li>
<li>  ReentrantLock 和 synchronized 都是可重入锁</li>
</ul>
<h4 id="公平锁"><a href="#公平锁" class="headerlink" title="公平锁"></a>公平锁</h4><ul>
<li>  定义：等待时间最久的线程会优先获得锁</li>
<li>  非公平锁无法保证哪个线程获取到锁，synchronized 就是非公平锁</li>
<li>  ReentrantLock 默认时非公平锁，可以设置为公平锁</li>
</ul>
<h4 id="乐观锁和悲观锁"><a href="#乐观锁和悲观锁" class="headerlink" title="乐观锁和悲观锁"></a>乐观锁和悲观锁</h4><ul>
<li>  ** 悲观锁 **：线程一旦得到锁，其他线程就挂起等待，适用于写入操作频繁的场景；synchronized 就是悲观锁</li>
<li>  ** 乐观锁 **：假设没有冲突，不加锁，更新数据时判断该数据是否过期，过期的话则不进行数据更新，适用于读取操作频繁的场景</li>
<li>  ** 乐观锁 CAS**：Compare And Swap，更新数据时先比较原值是否相等，不相等则表示数据过去，不进行数据更新</li>
<li>  ** 乐观锁实现 **：AtomicInteger、AtomicLong、AtomicBoolean</li>
</ul>
<h4 id="死锁-4-个必要条件"><a href="#死锁-4-个必要条件" class="headerlink" title="死锁 4 个必要条件"></a>死锁 4 个必要条件</h4><ul>
<li>  互斥</li>
<li>  占有且等待</li>
<li>  不可抢占</li>
<li>  循环等待</li>
</ul>
<h4 id="synchronized-原理"><a href="#synchronized-原理" class="headerlink" title="synchronized 原理"></a>synchronized 原理</h4><ul>
<li>  每个对象都有一个监视器锁：monitor，同步代码块会执行 monitorenter 开始，motnitorexit 结束</li>
<li>  wait/notify 就依赖 monitor 监视器，所以在非同步代码块中执行会报 IllegalMonitorStateException 异常</li>
</ul>
<h2 id="Java-虚拟机-amp-内存结构-amp-GC-amp-类加载-amp-四种引用-amp-动态代理"><a href="#Java-虚拟机-amp-内存结构-amp-GC-amp-类加载-amp-四种引用-amp-动态代理" class="headerlink" title="Java 虚拟机 &amp; 内存结构 &amp; GC &amp; 类加载 &amp; 四种引用 &amp; 动态代理"></a>Java 虚拟机 &amp; 内存结构 &amp; GC &amp; 类加载 &amp; 四种引用 &amp; 动态代理</h2><h4 id="JVM"><a href="#JVM" class="headerlink" title="JVM"></a>JVM</h4><ul>
<li>  定义：可以理解成一个虚构的计算机，解释自己的字节码指令集映射到本地 CPU 或 OS 的指令集，上层只需关注 Class 文件，与操作系统无关，实现跨平台</li>
<li>  Kotlin 就是能解释成 Class 文件，所以可以跑在 JVM 上</li>
</ul>
<h4 id="JVM-内存模型"><a href="#JVM-内存模型" class="headerlink" title="JVM 内存模型"></a>JVM 内存模型</h4><ul>
<li>  Java 多线程之间是通过共享内存来通信的，每个线程都有自己的本地内存</li>
<li>  共享变量存放于主内存中，线程会拷贝一份共享变量到本地内存</li>
<li>  volatile 关键字就是给内存模型服务的，用来保证内存可见性和顺序性</li>
</ul>
<h4 id="JVM-内存结构"><a href="#JVM-内存结构" class="headerlink" title="JVM 内存结构"></a>JVM 内存结构</h4><p>** 线程私有 **：</p>
<ol>
<li>程序计数器：记录正在执行的字节码指令地址，若正在执行 Native 方法则为空  </li>
<li>虚拟机栈：执行方法时把方法所需数据存为一个栈帧入栈，执行完后出栈  </li>
<li>本地方法栈：同虚拟机栈，但是针对的是 Native 方法</li>
</ol>
<p>** 线程共享 **：</p>
<ol>
<li>堆：存储 Java 实例，GC 主要区域，分代收集 GC 方法会吧堆划分为新生代、老年代  </li>
<li>方法区：存储类信息，常量池，静态变量等数据</li>
</ol>
<h4 id="GC"><a href="#GC" class="headerlink" title="GC"></a>GC</h4><p>回收区域：只针对堆、方法区；线程私有区域数据会随线程结束销毁，不用回收</p>
<h4 id="回收类型："><a href="#回收类型：" class="headerlink" title="回收类型："></a>回收类型：</h4><p>**1. 堆中的对象 **</p>
<ul>
<li>  分代收集 GC 方法会吧堆划分为新生代、老年代</li>
<li>  新生代：新建小对象会进入新生代；通过复制算法回收对象</li>
<li>  老年代：新建大对象及老对象会进入老年代；通过标记 - 清除算法回收对象</li>
</ul>
<p>**2. 方法区中的类信息、常量池 **</p>
<h4 id="判断一个对象是否可被回收："><a href="#判断一个对象是否可被回收：" class="headerlink" title="判断一个对象是否可被回收："></a>判断一个对象是否可被回收：</h4><ol>
<li><p>引用计数法<br>缺点：循环引用</p>
</li>
<li><p>可达性分析法<br>定义：从 GC ROOT 开始搜索，不可达的对象都是可以被回收的</p>
</li>
</ol>
<h4 id="GC-ROOT"><a href="#GC-ROOT" class="headerlink" title="GC ROOT"></a>GC ROOT</h4><ol>
<li>虚拟机栈 / 本地方法栈中引用的对象  </li>
<li>方法区中常量 / 静态变量引用的对象</li>
</ol>
<h4 id="四种引用"><a href="#四种引用" class="headerlink" title="四种引用"></a>四种引用</h4><ul>
<li>  强引用：不会被回收</li>
<li>  软引用：内存不足时会被回收</li>
<li>  弱引用：gc 时会被回收</li>
<li>  虚引用：无法通过虚引用得到对象，可以监听对象的回收</li>
</ul>
<h4 id="ClassLoader"><a href="#ClassLoader" class="headerlink" title="ClassLoader"></a>ClassLoader</h4><p>** 类的生命周期：**</p>
<ol>
<li>加载；2. 验证；3. 准备；4. 解析；5. 初始化；6. 使用；7. 卸载</li>
</ol>
<p>** 类加载过程：**</p>
<ol>
<li>加载：获取类的二进制字节流；生成方法区的运行时存储结构；在内存中生成 Class 对象  </li>
<li>验证：确保该 Class 字节流符合虚拟机要求  </li>
<li>准备：初始化静态变量  </li>
<li>解析：将常量池的符号引用替换为直接引用  </li>
<li>初始化：执行静态块代码、类变量赋值</li>
</ol>
<p>** 类加载时机 **：</p>
<ol>
<li>实例化对象  </li>
<li>调用类的静态方法  </li>
<li>调用类的静态变量（放入常量池的常量除外）</li>
</ol>
<p>** 类加载器：负责加载 class 文件 **</p>
<p>分类：</p>
<ol>
<li>引导类加载器 - 没有父类加载器  </li>
<li>拓展类加载器 - 继承自引导类加载器  </li>
<li>系统类加载器 - 继承自拓展类加载器</li>
</ol>
<h4 id="双亲委托模型："><a href="#双亲委托模型：" class="headerlink" title="双亲委托模型："></a>双亲委托模型：</h4><p>当要加载一个 class 时，会先逐层向上让父加载器先加载，加载失败才会自己加载</p>
<p>为什么叫双亲？不考虑自定义加载器，系统类加载器需要网上询问两层，所以叫双亲</p>
<p>判断是否是同一个类时，除了类信息，还必须时同一个类加载器</p>
<p>优点：</p>
<ul>
<li>  防止重复加载，父加载器加载过了就没必要加载了</li>
<li>  安全，防止篡改核心库类</li>
</ul>
<h4 id="动态代理原理及实现"><a href="#动态代理原理及实现" class="headerlink" title="动态代理原理及实现"></a>动态代理原理及实现</h4><ul>
<li>  InvocationHandler 接口，动态代理类需要实现这个接口</li>
<li>  Proxy.newProxyInstance，用于动态创建代理对象</li>
<li>  Retrofit 应用： Retrofit 通过动态代理，为我们定义的请求接口都生成一个动态代理对象，实现请求</li>
</ul>
<h2 id="Android-基础-amp-性能优化-amp-Framwork"><a href="#Android-基础-amp-性能优化-amp-Framwork" class="headerlink" title="Android 基础 &amp; 性能优化 &amp; Framwork"></a>Android 基础 &amp; 性能优化 &amp; Framwork</h2><h4 id="Activity-启动模式"><a href="#Activity-启动模式" class="headerlink" title="Activity 启动模式"></a>Activity 启动模式</h4><ul>
<li>  standard 标准模式</li>
<li>singleTop 栈顶复用模式，<ul>
<li>  推送点击消息界面</li>
</ul>
</li>
<li>singleTask 栈内复用模式，<ul>
<li>  首页</li>
</ul>
</li>
<li>singleInstance 单例模式，单独位于一个任务栈中<ul>
<li>拨打电话界面<br>  细节：</li>
<li>  taskAffinity：任务相关性，用于指定任务栈名称，默认为应用包名</li>
<li>  allowTaskReparenting：允许转移任务栈</li>
</ul>
</li>
</ul>
<h4 id="View-工作原理"><a href="#View-工作原理" class="headerlink" title="View 工作原理"></a>View 工作原理</h4><ul>
<li>DecorView (FrameLayout)<ul>
<li>LinearLayout<ul>
<li>  titlebar</li>
<li>  Content</li>
<li>  调用 setContentView 设置的 View</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>ViewRoot 的 performTraversals 方法调用触发开始 View 的绘制，然后会依次调用:</p>
<ul>
<li>  performMeasure：遍历 View 的 measure 测量尺寸</li>
<li>  performLayout：遍历 View 的 layout 确定位置</li>
<li>  performDraw：遍历 View 的 draw 绘制</li>
</ul>
<h4 id="事件分发机制"><a href="#事件分发机制" class="headerlink" title="事件分发机制"></a>事件分发机制</h4><ul>
<li>  一个 MotionEvent 产生后，按 Activity -&gt; Window -&gt; decorView -&gt; View 顺序传递，View 传递过程就是事件分发，主要依赖三个方法:</li>
<li>  dispatchTouchEvent：用于分发事件，只要接受到点击事件就会被调用，返回结果表示是否消耗了当前事件</li>
<li>  onInterceptTouchEvent：用于判断是否拦截事件，当 ViewGroup 确定要拦截事件后，该事件序列都不会再触发调用此 ViewGroup 的 onIntercept</li>
<li>  onTouchEvent：用于处理事件，返回结果表示是否处理了当前事件，未处理则传递给父容器处理</li>
<li>细节：<ul>
<li>  一个事件序列只能被一个 View 拦截且消耗</li>
<li>  View 没有 onIntercept 方法，直接调用 onTouchEvent 处理</li>
<li>  OnTouchListener 优先级比 OnTouchEvent 高，onClickListener 优先级最低</li>
<li>  requestDisallowInterceptTouchEvent 可以屏蔽父容器 onIntercet 方法的调用</li>
</ul>
</li>
</ul>
<h4 id="Window-、-WindowManager、WMS、SurfaceFlinger"><a href="#Window-、-WindowManager、WMS、SurfaceFlinger" class="headerlink" title="Window 、 WindowManager、WMS、SurfaceFlinger"></a>Window 、 WindowManager、WMS、SurfaceFlinger</h4><ul>
<li>  <strong>Window</strong>：抽象概念不是实际存在的，而是以 View 的形式存在，通过 PhoneWindow 实现</li>
<li>  <strong>WindowManager</strong>：外界访问 Window 的入口，内部与 WMS 交互是个 IPC 过程</li>
<li>  <strong>WMS</strong>：管理窗口 Surface 的布局和次序，作为系统级服务单独运行在一个进程</li>
<li>  <strong>SurfaceFlinger</strong>：将 WMS 维护的窗口按一定次序混合后显示到屏幕上</li>
</ul>
<h4 id="View-动画、帧动画及属性动画"><a href="#View-动画、帧动画及属性动画" class="headerlink" title="View 动画、帧动画及属性动画"></a>View 动画、帧动画及属性动画</h4><p><strong>View 动画：</strong></p>
<ul>
<li>  作用对象是 View，可用 xml 定义，建议 xml 实现比较易读</li>
<li>  支持四种效果：平移、缩放、旋转、透明度</li>
</ul>
<p>** 帧动画：**</p>
<ul>
<li>  通过 AnimationDrawable 实现，容易 OOM</li>
</ul>
<p>** 属性动画：**</p>
<ul>
<li>  可作用于任何对象，可用 xml 定义，Android 3 引入，建议代码实现比较灵活</li>
<li>  包括 ObjectAnimator、ValuetAnimator、AnimatorSet</li>
<li>  时间插值器：根据时间流逝的百分比计算当前属性改变的百分比</li>
<li>  系统预置匀速、加速、减速等插值器</li>
<li>  类型估值器：根据当前属性改变的百分比计算改变后的属性值</li>
<li>  系统预置整型、浮点、色值等类型估值器</li>
<li>  使用注意事项：</li>
<li>  避免使用帧动画，容易 OOM</li>
<li>  界面销毁时停止动画，避免内存泄漏</li>
<li>  开启硬件加速，提高动画流畅性 ，硬件加速：</li>
<li>  将 cpu 一部分工作分担给 gpu ，使用 gpu 完成绘制工作</li>
<li>  从工作分摊和绘制机制两个方面优化了绘制速度</li>
</ul>
<h4 id="Handler、MessageQueue、Looper"><a href="#Handler、MessageQueue、Looper" class="headerlink" title="Handler、MessageQueue、Looper"></a>Handler、MessageQueue、Looper</h4><ul>
<li>  Handler：开发直接接触的类，内部持有 MessageQueue 和 Looper</li>
<li>  MessageQueue：消息队列，内部通过单链表存储消息</li>
<li>  Looper：内部持有 MessageQueue，循环查看是否有新消息，有就处理，没就阻塞</li>
<li>  如何实现阻塞：通过 nativePollOnce 方法，基于 Linux epoll 事件管理机制</li>
<li>  为什么主线程不会因为 Looper 阻塞：系统每 16ms 会发送一个刷新 UI 消息唤醒</li>
</ul>
<h4 id="MVC、MVP、MVVM"><a href="#MVC、MVP、MVVM" class="headerlink" title="MVC、MVP、MVVM"></a>MVC、MVP、MVVM</h4><ul>
<li>  MVP：Model：处理数据；View：控制视图；Presenter：分离 Activity 和 Model</li>
<li>MVVM：Model：处理获取保存数据；View：控制视图；ViewModel：数据容器<ul>
<li>  使用 Jetpack 组件架构的 LiveData、ViewModel 便捷实现 MVVM</li>
</ul>
</li>
</ul>
<h4 id="Serializable、Parcelable"><a href="#Serializable、Parcelable" class="headerlink" title="Serializable、Parcelable"></a>Serializable、Parcelable</h4><ul>
<li>  Serializable ：Java 序列化方式，适用于存储和网络传输，serialVersionUID 用于确定反序列化和类版本是否一致，不一致时反序列化回失败</li>
<li>  Parcelable ：Android 序列化方式，适用于组件通信数据传递，性能高，因为不像 Serializable 一样有大量反射操作，频繁 GC</li>
</ul>
<h4 id="Binder"><a href="#Binder" class="headerlink" title="Binder"></a>Binder</h4><ul>
<li>  Android 进程间通信的中流砥柱，基于客户端 - 服务端通信方式</li>
<li>  使用 mmap 一次数据拷贝实现 IPC，传统 IPC：用户 A 空间 -&gt; 内核 -&gt; 用户 B 空间；mmap 将内核与用户 B 空间映射，实现直接从用户 A 空间 -&gt; 用户 B 空间</li>
<li>  BinderPool 可避免创建多 Service</li>
</ul>
<h4 id="IPC-方式"><a href="#IPC-方式" class="headerlink" title="IPC 方式"></a>IPC 方式</h4><ul>
<li>  Intent extras、Bundle：要求传递数据能被序列化，实现 Parcelable、Serializable ，适用于四大组件通信</li>
<li>  文件共享：适用于交换简单的数据实时性不高的场景</li>
<li>AIDL：AIDL 接口实质上是系统提供给我们可以方便实现 BInder 的工具<ul>
<li>  Android Interface Definition Language，可实现跨进程调用方法</li>
<li>  服务端：将暴漏给客户端的接口声明在 AIDL 文件中，创建 Service 实现 AIDL 接口并监听客户端连接请求</li>
<li>  客户端：绑定服务端 Service ，绑定成功后拿到服务端 Binder 对象转为 AIDL 接口调用</li>
<li>  RemoteCallbackList 实现跨进程接口监听，同个 Binder 对象做 key 存储客户端注册的 listener</li>
<li>  监听 Binder 断开：1.Binder.linkToDeath 设置死亡代理；2. onServiceDisconnected 回调</li>
</ul>
</li>
<li>  Messenger：基于 AIDL 实现，服务端串行处理，主要用于传递消息，适用于低并发一对多通信</li>
<li>  ContentProvider：基于 Binder 实现，适用于一对多进程间数据共享</li>
<li>  Socket：TCP、UDP，适用于网络数据交换</li>
</ul>
<h4 id="Android-系统启动流程"><a href="#Android-系统启动流程" class="headerlink" title="Android 系统启动流程"></a>Android 系统启动流程</h4><ul>
<li>  按电源键 -&gt; 加载引导程序 BootLoader 到 RAM -&gt; 执行 BootLoader 程序启动内核 -&gt; 启动 init 进程 -&gt; 启动 Zygote 和各种守护进程 -&gt;</li>
<li>  启动 System Server 服务进程开启 AMS、WMS 等 -&gt; 启动 Launcher 应用进程</li>
</ul>
<h4 id="App-启动流程"><a href="#App-启动流程" class="headerlink" title="App 启动流程"></a>App 启动流程</h4><p>Launcher 中点击一个应用图标 -&gt; 通过 AMS 查找应用进程，若不存在就通过 Zygote 进程 fork</p>
<h4 id="进程保活"><a href="#进程保活" class="headerlink" title="进程保活"></a>进程保活</h4><ul>
<li>  进程优先级：1. 前台进程 ；2. 可见进程；3. 服务进程；4. 后台进程；5. 空进程</li>
<li>  进程被 kill 场景：1. 切到后台内存不足时被杀；2. 切到后台厂商省电机制杀死；3. 用户主动清理</li>
<li>保活方式：<ul>
<li>  1.Activity 提权：挂一个 1 像素 Activity 将进程优先级提高到前台进程</li>
<li>  2.Service 提权：启动一个前台服务（API&gt;18 会有正在运行通知栏）</li>
<li><ol start="3">
<li>广播拉活</li>
</ol>
</li>
<li>  4.Service 拉活</li>
<li>  5.JobScheduler 定时任务拉活</li>
<li><ol start="6">
<li>双进程拉活</li>
</ol>
</li>
</ul>
</li>
</ul>
<h4 id="网络优化及检测"><a href="#网络优化及检测" class="headerlink" title="网络优化及检测"></a>网络优化及检测</h4><ul>
<li>  速度：1.GZIP 压缩（okhttp 自动支持）；2.Protocol Buffer 替代 json；3. 优化图片 / 文件流量；4.IP 直连省去 DNS 解析时间</li>
<li>  成功率：1. 失败重试策略；</li>
<li>  流量：1.GZIP 压缩（okhttp 自动支持）；2.Protocol Buffer 替代 json；3. 优化图片 / 文件流量；5. 文件下载断点续传 ；6. 缓存</li>
<li>  协议层的优化，比如更优的 http 版本等</li>
<li>  监控：Charles 抓包、Network Monitor 监控流量</li>
</ul>
<h4 id="UI-卡顿优化"><a href="#UI-卡顿优化" class="headerlink" title="UI 卡顿优化"></a>UI 卡顿优化</h4><ul>
<li>  减少布局层级及控件复杂度，避免过度绘制</li>
<li>  使用 include、merge、viewstub</li>
<li>  优化绘制过程，避免在 Draw 中频繁创建对象、做耗时操作</li>
</ul>
<h4 id="内存泄漏场景及规避"><a href="#内存泄漏场景及规避" class="headerlink" title="内存泄漏场景及规避"></a>内存泄漏场景及规避</h4><ol>
<li>静态变量、单例强引跟生命周期相关的数据或资源，包括 EventBus  </li>
<li>游标、IO 流等资源忘记主动释放  </li>
<li>界面相关动画在界面销毁时及时暂停  </li>
<li>内部类持有外部类引用导致的内存泄漏</li>
</ol>
<ul>
<li>  handler 内部类内存泄漏规避：1. 使用静态内部类 + 弱引用 2. 界面销毁时清空消息队列</li>
<li>  检测：Android Studio Profiler</li>
</ul>
<h4 id="LeakCanary-原理"><a href="#LeakCanary-原理" class="headerlink" title="LeakCanary 原理"></a>LeakCanary 原理</h4><ul>
<li>  通过弱引用和引用队列监控对象是否被回收</li>
<li>  比如 Activity 销毁时开始监控此对象，检测到未被回收则主动 gc ，然后继续监控</li>
</ul>
<h4 id="OOM-场景及规避"><a href="#OOM-场景及规避" class="headerlink" title="OOM 场景及规避"></a>OOM 场景及规避</h4><ul>
<li>  加载大图：减小图片</li>
<li>  内存泄漏：规避内存泄漏</li>
</ul>
<h2 id="Android-模块化-amp-热修复-amp-热更新-amp-打包-amp-混淆-amp-压缩"><a href="#Android-模块化-amp-热修复-amp-热更新-amp-打包-amp-混淆-amp-压缩" class="headerlink" title="Android 模块化 &amp; 热修复 &amp; 热更新 &amp; 打包 &amp; 混淆 &amp; 压缩"></a>Android 模块化 &amp; 热修复 &amp; 热更新 &amp; 打包 &amp; 混淆 &amp; 压缩</h2><h4 id="Dalvik-和-ART"><a href="#Dalvik-和-ART" class="headerlink" title="Dalvik 和 ART"></a>Dalvik 和 ART</h4><ul>
<li>Dalvik<ul>
<li>  谷歌设计专用于 Android 平台的 Java 虚拟机，可直接运行 .dex 文件，适合内存和处理速度有限的系统</li>
<li>  JVM 指令集是基于栈的；Dalvik 指令集是基于寄存器的，代码执行效率更优</li>
</ul>
</li>
<li>ART<ul>
<li>  Dalvik 每次运行都要将字节码转换成机器码；ART 在应用安装时就会转换成机器码，执行速度更快</li>
<li>  ART 存储机器码占用空间更大，空间换时间</li>
</ul>
</li>
</ul>
<h4 id="APK-打包流程"><a href="#APK-打包流程" class="headerlink" title="APK 打包流程"></a>APK 打包流程</h4><p>1.aapt 打包资源文件生成 R.java 文件；aidl 生成 java 文件<br>2. 将 java 文件编译为 class 文件<br>3. 将工程及第三方的 class 文件转换成 dex 文件<br>4. 将 dex 文件、so、编译过的资源、原始资源等打包成 apk 文件<br>5. 签名<br>6. 资源文件对齐，减少运行时内存</p>
<h4 id="App-安装过程"><a href="#App-安装过程" class="headerlink" title="App 安装过程"></a>App 安装过程</h4><ul>
<li>  首先要解压 APK，资源、so 等放到应用目录</li>
<li>  Dalvik 会将 dex 处理成 ODEX ；ART 会将 dex 处理成 OAT；</li>
<li>  OAT 包含 dex 和安装时编译的机器码</li>
</ul>
<h4 id="组件化路由实现"><a href="#组件化路由实现" class="headerlink" title="组件化路由实现"></a>组件化路由实现</h4><p>ARoute：通过 APT 解析 @Route 等注解，结合 JavaPoet 生成路由表，即路由与 Activity 的映射关系</p>
<h2 id="音视频-amp-FFmpeg-amp-播放器"><a href="#音视频-amp-FFmpeg-amp-播放器" class="headerlink" title="音视频 &amp; FFmpeg &amp; 播放器"></a>音视频 &amp; FFmpeg &amp; 播放器</h2><h4 id="FFmpeg"><a href="#FFmpeg" class="headerlink" title="FFmpeg"></a>FFmpeg</h4><p>基于命令方式实现了一个音视频编辑 App：<br><a target="_blank" rel="noopener external nofollow noreferrer" href="https://links.jianshu.com/go?to=https://github.com/yhaolpz/FFmpegCmd">https://github.com/yhaolpz/FFmpegCmd</a></p>
<p>集成编译了 AAC、MP3、H264 编码器</p>
<h4 id="播放器原理"><a href="#播放器原理" class="headerlink" title="播放器原理"></a>播放器原理</h4><p>视频播放原理：（mp4、flv）-&gt; 解封装 -&gt; （mp3/aac、h264/h265）-&gt; 解码 -&gt; （pcm、yuv）-&gt; 音视频同步 -&gt; 渲染播放</p>
<p>音视频同步：</p>
<ul>
<li>  选择参考时钟源：音频时间戳、视频时间戳和外部时间三者选择一个作为参考时钟源（一般选择音频，因为人对音频更敏感，ijk 默认也是音频）</li>
<li>  通过等待或丢帧将视频流与参考时钟源对齐，实现同步</li>
</ul>
<h4 id="IjkPlayer-原理"><a href="#IjkPlayer-原理" class="headerlink" title="IjkPlayer 原理"></a>IjkPlayer 原理</h4><p>集成了 MediaPlayer、ExoPlayer 和 IjkPlayer 三种实现，其中 IjkPlayer 基于 FFmpeg 的 ffplay</p>
<p>音频输出方式：AudioTrack、OpenSL ES；视频输出方式：NativeWindow、OpenGL ES</p>
<hr>
<blockquote>
<p>to be continued…</p>
</blockquote>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="https://tamsiree.com">Tamsiree</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="https://tamsiree.com/Interview/Android/%E5%AD%97%E8%8A%82%E8%B7%B3%E5%8A%A8Android%E5%B2%97%E9%9D%A2%E8%AF%95/">https://tamsiree.com/Interview/Android/%E5%AD%97%E8%8A%82%E8%B7%B3%E5%8A%A8Android%E5%B2%97%E9%9D%A2%E8%AF%95/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="external nofollow noreferrer" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来源 <a href="https://tamsiree.com" target="_blank">Tamsiree</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Interview/">Interview</a><a class="post-meta__tags" href="/tags/Android/">Android</a></div><div class="post-share"><div class="social-share" data-image="https://cdn.jsdelivr.net/gh/Tamsiree/Assets@master/Picture/Blog/Cover/mianju.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/sharejs/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button"><i class="fas fa-qrcode"></i>赞助</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="https://cdn.jsdelivr.net/gh/Tamsiree/Assets@master/Function/qrcode_wechat.jpg" rel="external nofollow noreferrer" target="_blank"><img class="post-qr-code-img" src="/images/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/Tamsiree/Assets@master/Function/qrcode_wechat.jpg" alt="微信"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="https://cdn.jsdelivr.net/gh/Tamsiree/Assets@master/Function/qrcode_alipay.jpg" rel="external nofollow noreferrer" target="_blank"><img class="post-qr-code-img" src="/images/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/Tamsiree/Assets@master/Function/qrcode_alipay.jpg" alt="支付宝"/></a><div class="post-qr-code-desc">支付宝</div></li></ul></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/GameEngine/Unity/Unity%E5%BC%80%E5%8F%91%E6%84%A4%E6%80%92%E7%9A%84%E5%B0%8F%E9%B8%9F/" title="Unity 开发愤怒的小鸟"><img class="cover" src="/images/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/Tamsiree/Assets@master/Picture/Blog/Cover/timgangrebird.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="info"><div class="info-1"><div class="info-item-1">上一篇</div><div class="info-item-2">Unity 开发愤怒的小鸟</div></div><div class="info-2"><div class="info-item-1">前言用最通俗易懂的方法去制作愤怒的小鸟, 主要用于学习 Unity 的使用。 第一部分游戏的逻辑 小鸟的拖拽（最大距离限制） 小鸟的弹出 小鸟与猪头、道具的碰撞（死亡 / 受伤） 皮筋的绘制 制作各种特效 游戏结束，胜利的判定 一只小鸟 -&gt; 多只的转化 胜利判定星星特效的制作 让星星一颗一颗的生成 镜头跟随 添加音效  涉及知识点：  1、屏幕坐标与世界坐标的转化2、Spring Joint 组件的使用3、碰撞检测（OnCollisionEnter2D）4、Line Renderer     Spring Joint 2D 是 Unity 提供的一个弹簧关节组件。 第二部分UI 制作 暂停界面 关卡选择 数据存储  补充部分渲染层级：  CameraDepth 先绘制 depth 低的物体 同一个 cameraSorting layer 同一个 Sorting layerOrder in layer[大的遮挡小的] 易混淆：layer  Camera: 1、clear flags：清除标记 2、culling mask：按照 layer 有选择性的渲染场景中的物体   t...</div></div></div></a><a class="pagination-related" href="/Game/%E7%83%AD%E8%A1%80%E4%BC%A0%E5%A5%87/%E7%83%AD%E8%A1%80%E4%BC%A0%E5%A5%87/" title="热血传奇"><img class="cover" src="/images/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/Tamsiree/Assets@master/Picture/Blog/Cover/1Z411101210-6-1200.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="info text-right"><div class="info-1"><div class="info-item-1">下一篇</div><div class="info-item-2">热血传奇</div></div><div class="info-2"><div class="info-item-1">前言千言万语涌上心头，只为情怀二字。 正文装备属性物品大全盔甲** 各职业通用盔甲：**      图片 名称 需要等级 攻击 魔法 道术 防御 魔防 持久 重量 附加属性     布衣 1    2-2 0-1 5 5     轻型盔甲 11    3-3 1-2 8 8     中型盔甲 16    3-5 1-2 12 12    ** 战士盔甲：**      图片 名称 需要等级 攻击 魔法 道术 防御 魔防 持久 重量 附加属性     重盔甲 22    4-7 2-3 25 23     战神盔甲 攻击力 46    5-9 3-5 30 45     天魔神甲 40 1-2   5-12 4-7 35 62     圣战宝甲 40 1-2   5-12 4-7 35 62    ** 道士盔甲：**      图片 名称 需要等级 攻击 魔法 道术 防御 魔防 持久 重量 附加属性     灵魂战衣 22   0-2 3-6 3-3 20 15     幽灵战衣 精神力 27   1-4 4-7 3-4 28 26     天尊道袍 40   2-5 4-9 4...</div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/GameEngine/Unity/Unity%E7%BA%B9%E7%90%86%E5%8E%8B%E7%BC%A9%E4%B8%8E%E7%9B%B8%E5%85%B3%E4%BC%98%E5%8C%96%E7%9F%A5%E8%AF%86%E6%B1%87%E6%80%BB/" title="Unity 纹理压缩与相关优化知识汇总"><img class="cover" src="/images/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/Tamsiree/Assets@master/Picture/Blog/Cover/bg-45008df.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2021-04-12</div><div class="info-item-2">Unity 纹理压缩与相关优化知识汇总</div></div><div class="info-2"><div class="info-item-1">一、纹理格式的基础知识1. 图片格式图片格式一般指我们从美术工具中导出的文件格式，用于在磁盘中存储的格式；如 jpg，png，tga 等； 2. 纹理格式文件格式是图像为了存储信息而使用的编码方式，但是他不能被 CPU 所识别，GPU 的特性是做向量运算；因此这些文件被游戏读入时还需要 CPU 解压成 R8G8B8 等像素格式，再传送到 GPU 端使用；而在运行时做解压无疑是非常耗的，所以一般在图片源文件导入时就会为其生成纹理格式的文件。 纹理格式是可以被 GPU 所识别的像素格式，可以被快速寻址采样。 但是直接使用这种纹理格式会导致资源的加载时间长、内存占用大的问题，尤其在移动平台上更加明显，因此，为了解决这个问题，就出现了压缩纹理格式； 3. 纹理压缩格式Unity 支持许多图片格式的源文件，但是 3D 图形的实时渲染中不会用这些格式，3D 图形硬件要求纹理以专门格式进行压缩，这些格式对快速纹理采样进行了优化，DXT,ETC 等压缩纹理格式可以在游戏运行中无需 CPU 解压就被 GPU 直接采样。每个不同的平台和设备都有自己的专有格式，因此在选择压缩方式时需要考虑兼容性。 U...</div></div></div></a><a class="pagination-related" href="/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Android/RxTool/Wiki/RxTool-Wiki/" title="RxTool Wiki"><img class="cover" src="/images/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/Tamsiree/Assets@master/DeskTop/miku.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2016-10-14</div><div class="info-item-2">RxTool Wiki</div></div><div class="info-2"><div class="info-item-1">RxTool Wiki    工欲善其事必先利其器！   Android 开发过程经常需要用到各式各样的工具类，虽然大部分只需谷歌 / 百度一下就能找到；   但是有时候急需使用却苦苦搜寻不到，于是整理了自己平常用到的工具类，以便以后的使用。  自定义 View   Name description Module    RxAutoImageView ImageView 实现自动左右移动效果 RxUI   RxBarCode 条形码控件 RxUI   RxCaptcha 验证码控件 RxUI   RxCardStackView 银行卡组叠加效果 RxUI   RxCobwebView 蛛网等级控件 RxUI   RxHeartLayout 直播爱心点赞控件 RxUI   RxNetSpeedView 显示当前网速控件 RxUI   RxPopupView 自定义 PopupWindow 控件 RxUI   RxProgressBar 自定义进度条 RxUI   RxQRCode 二维码控件 RxUI   RxRoundProgress 实现弧形进度条 RxUI   RxRuler...</div></div></div></a><a class="pagination-related" href="/Interview/Python/2020%E5%B9%B4%E5%AD%97%E8%8A%82%E8%B7%B3%E5%8A%A8%E9%9D%A2%E8%AF%95%E9%A2%98/" title="字节跳动 2020 年面试题"><img class="cover" src="/images/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/Tamsiree/Assets@master/DeskTop/background.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2019-08-27</div><div class="info-item-2">字节跳动 2020 年面试题</div></div><div class="info-2"><div class="info-item-1">前言 因为有朋友在线面试字节跳动，需要我帮帮忙，因此便有了这篇文章。（虽然我写完题目之后，朋友的面试已经时间截止了，不过留作参考也不错 &gt;_&lt;|||）&gt; 朋友希望能够顺利的看懂语句，所以我的注释写的比较多。   进入主题第一题** 题目描述：**抖音上每天都有几亿用户，如果用户 A 和 B 互动不少于 3 次，我们就认为 A 和 B 属于 “豆油”，如果 A 和 B 是“豆油”，B 和 C 也是“豆油”， 那么 A 和 C 也互为“豆油”，我们定义“豆油瓶” 就是由直系和间接朋友所组成的群体。 给定个 N×N 的矩阵 M，代表抖音上所有用户的互动次数，如果 M[i][j]= 5，那么第 i 个和第 j 个用户就互动过 5 次，为 0 的话代表没有互动，对于 i = j，即同个用户， 互动次数我们计为 0。请你计算并输出发现的抖音上所有 “豆油瓶” 的个数。 ** 输入描述:**    输入第 1 行：二维数组的行数(列数一样) N接下来的 N 行每行 N 个数字，空格分割  ** 输出描述:**    输出发现的 “豆油瓶” 数量 k    ** 示例 1:**...</div></div></div></a><a class="pagination-related" href="/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/AndroidStudio/AndroidStudio%E6%8F%92%E4%BB%B6%E9%9B%86%E5%90%88/" title="AndroidStudio 插件集合"><img class="cover" src="/images/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/Tamsiree/Assets@master/Picture/Blog/Cover/t01cf099416056cb243.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2016-11-19</div><div class="info-item-2">AndroidStudio 插件集合</div></div><div class="info-2"><div class="info-item-1">前言想要更高效的使用 AndroidStudio，当然插件是必不可少的，这里收集了平时觉得不错的插件。 安装说明给出的插件，可直接根据名字，在  AndroidStudio - File - Setting - Plugins - Browse Respositories     中搜索插件，下载成功后，重启 AndroidStudio 即可，如查询不到，则根据给出的下载地址，下载 Jar 文件，再运用本地安装的方法安装插件。   插件codeglance一款提高编程效率的插件, 实现在编辑窗口右侧显示 minimap。  如上图所示，很好用的插件。 可以使用该插件的 IDE 有： IntelliJ IDEA PhpStorm WebStorm PyCharm RubyMine AppCode CLion GoLand DataGrip Rider MPS Android Studio 下载链接：https://plugins.jetbrains.com/plugin/7275-codeglance  Material Theme UIMaterial Theme 主题的 And...</div></div></div></a><a class="pagination-related" href="/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Android/Android%E7%A0%94%E7%A9%B6Fragment/" title="Android 研究 Fragment"><img class="cover" src="/images/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/Tamsiree/Assets@master/Picture/Blog/Cover/wallroom-2880x1620-bg-3cad5d2.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2020-03-05</div><div class="info-item-2">Android 研究 Fragment</div></div><div class="info-2"><div class="info-item-1">前言Fragment，简称碎片，是 Android 3.0（API 11）提出的，为了兼容低版本，support-v4 库中也开发了一套 Fragment API，最低兼容 Android 1.6。 过去 support-v4 库是一个 jar 包，24.2.0 版本开始，将 support-v4 库模块化为多个 jar 包，包含：support-fragment, support-ui, support-media-compat 等，这么做是为了减少 APK 包大小，你需要用哪个模块就引入哪个模块。 如果想引入整个 support-v4 库，则 compile ‘com.android.support:support-v4:24.2.1’，如果只想引入 support-fragment 库，则 com.android.support:support-fragment:24.2.1。  因为 support 库是不断更新的，因此建议使用 support 库中的 android.support.v4.app.Fragment，而不要用系统自带的 android.app.Fragme...</div></div></div></a><a class="pagination-related" href="/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Android/Android%E5%BC%BA%E5%88%B6%E5%85%B3%E9%97%AD%E8%BD%AF%E9%94%AE%E7%9B%98%E8%BE%93%E5%85%A5%E6%B3%95/" title="Android 强制关闭软键盘输入法"><img class="cover" src="/images/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/Tamsiree/Assets@master/Picture/Blog/Cover/20170812142435mxeUN.jpeg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2016-02-16</div><div class="info-item-2">Android 强制关闭软键盘输入法</div></div><div class="info-2"><div class="info-item-1">前言在类似评论说说的这种界面中，输入评论内容后，点击发送按钮，小米手机的键盘有时候不消失, 只是消失了自定义的输入框式样弹框，大概率出现的一种情况（即使你自己调用的关闭键盘也会出现无效的情况）。 正文解决方法：  在 AndroidManifest 配置 需要强制关闭软键盘输入法 的 Activity    12345678910&lt;activity    android:name=&quot;.activity.ActivityLogin&quot;    &lt;!--  新增这一行代码  --&gt;    android:windowSoftInputMode=&quot;stateAlwaysHidden&quot;&gt;    &lt;intent-filter&gt;        &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;        &lt;category android:name=&quot;android.intent.category.LAUNCHER&...</div></div></div></a></div></div><hr class="custom-hr"/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div id="waline-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/images/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/Tamsiree/Assets@master/Avatar/avatar_sky_circle.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">Tamsiree</div><div class="author-info-description">勇于尝试才有可能迈向成功</div><div class="site-data"><a href="/archives/"><div class="headline">文章</div><div class="length-num">200</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">140</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">143</div></a></div><a id="card-info-btn" target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/tamsiree"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons"><a class="social-icon" href="https://github.com/Tamsiree" rel="external nofollow noreferrer" target="_blank" title="Github"><i class="fab fa-github-square"></i></a><a class="social-icon" href="mailto:tamsiree.com@gmail.com" rel="external nofollow noreferrer" target="_blank" title="Email"><i class="fas fa-envelope-square"></i></a><a class="social-icon" href="/atom.xml" target="_blank" title="RSS"><i class="fas fa-rss-square"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">只有用心灵才能看得清事物的本质，真正重要的东西是肉眼无法看见的。</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%AD%A3%E6%96%87"><span class="toc-number">1.</span> <span class="toc-text">正文</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C"><span class="toc-number">1.1.</span> <span class="toc-text">网络</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE%E6%A8%A1%E5%9E%8B"><span class="toc-number">1.1.1.</span> <span class="toc-text">网络协议模型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#TCP-%E5%92%8C-UDP-%E5%8C%BA%E5%88%AB"><span class="toc-number">1.1.2.</span> <span class="toc-text">TCP 和 UDP 区别</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#TCP-%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B"><span class="toc-number">1.1.3.</span> <span class="toc-text">TCP 三次握手</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#TCP-%E5%9B%9B%E6%AC%A1%E6%8C%A5%E6%89%8B"><span class="toc-number">1.1.4.</span> <span class="toc-text">TCP 四次挥手</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#POST-%E5%92%8C-GET-%E5%8C%BA%E5%88%AB"><span class="toc-number">1.1.5.</span> <span class="toc-text">POST 和 GET 区别</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#HTTPS"><span class="toc-number">1.1.6.</span> <span class="toc-text">HTTPS</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Java-%E5%9F%BA%E7%A1%80-amp-%E5%AE%B9%E5%99%A8-amp-%E5%90%8C%E6%AD%A5-amp-%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F"><span class="toc-number">1.2.</span> <span class="toc-text">Java 基础 &amp; 容器 &amp; 同步 &amp; 设计模式</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#StringBuilder%E3%80%81StringBuffer%E3%80%81-%E3%80%81String-concat-%E9%93%BE%E6%8E%A5%E5%AD%97%E7%AC%A6%E4%B8%B2%EF%BC%9A"><span class="toc-number">1.2.1.</span> <span class="toc-text">StringBuilder、StringBuffer、+、String.concat 链接字符串：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Java-%E6%B3%9B%E5%9E%8B%E6%93%A6%E9%99%A4"><span class="toc-number">1.2.2.</span> <span class="toc-text">Java 泛型擦除</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ArrayList%E3%80%81LinkedList"><span class="toc-number">1.2.3.</span> <span class="toc-text">ArrayList、LinkedList</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#HashMap-%E3%80%81HashTable"><span class="toc-number">1.2.4.</span> <span class="toc-text">HashMap 、HashTable</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ArrayMap%E3%80%81SparseArray"><span class="toc-number">1.2.5.</span> <span class="toc-text">ArrayMap、SparseArray</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#volatile-%E5%85%B3%E9%94%AE%E5%AD%97"><span class="toc-number">1.2.6.</span> <span class="toc-text">volatile 关键字</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#wait-%E5%92%8C-sleep"><span class="toc-number">1.2.7.</span> <span class="toc-text">wait 和 sleep</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#lock-%E5%92%8C-synchronized"><span class="toc-number">1.2.8.</span> <span class="toc-text">lock 和 synchronized</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8F%AF%E9%87%8D%E5%85%A5%E9%94%81"><span class="toc-number">1.2.9.</span> <span class="toc-text">可重入锁</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%AC%E5%B9%B3%E9%94%81"><span class="toc-number">1.2.10.</span> <span class="toc-text">公平锁</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B9%90%E8%A7%82%E9%94%81%E5%92%8C%E6%82%B2%E8%A7%82%E9%94%81"><span class="toc-number">1.2.11.</span> <span class="toc-text">乐观锁和悲观锁</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%AD%BB%E9%94%81-4-%E4%B8%AA%E5%BF%85%E8%A6%81%E6%9D%A1%E4%BB%B6"><span class="toc-number">1.2.12.</span> <span class="toc-text">死锁 4 个必要条件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#synchronized-%E5%8E%9F%E7%90%86"><span class="toc-number">1.2.13.</span> <span class="toc-text">synchronized 原理</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Java-%E8%99%9A%E6%8B%9F%E6%9C%BA-amp-%E5%86%85%E5%AD%98%E7%BB%93%E6%9E%84-amp-GC-amp-%E7%B1%BB%E5%8A%A0%E8%BD%BD-amp-%E5%9B%9B%E7%A7%8D%E5%BC%95%E7%94%A8-amp-%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86"><span class="toc-number">1.3.</span> <span class="toc-text">Java 虚拟机 &amp; 内存结构 &amp; GC &amp; 类加载 &amp; 四种引用 &amp; 动态代理</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#JVM"><span class="toc-number">1.3.1.</span> <span class="toc-text">JVM</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#JVM-%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B"><span class="toc-number">1.3.2.</span> <span class="toc-text">JVM 内存模型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#JVM-%E5%86%85%E5%AD%98%E7%BB%93%E6%9E%84"><span class="toc-number">1.3.3.</span> <span class="toc-text">JVM 内存结构</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#GC"><span class="toc-number">1.3.4.</span> <span class="toc-text">GC</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9B%9E%E6%94%B6%E7%B1%BB%E5%9E%8B%EF%BC%9A"><span class="toc-number">1.3.5.</span> <span class="toc-text">回收类型：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%A4%E6%96%AD%E4%B8%80%E4%B8%AA%E5%AF%B9%E8%B1%A1%E6%98%AF%E5%90%A6%E5%8F%AF%E8%A2%AB%E5%9B%9E%E6%94%B6%EF%BC%9A"><span class="toc-number">1.3.6.</span> <span class="toc-text">判断一个对象是否可被回收：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#GC-ROOT"><span class="toc-number">1.3.7.</span> <span class="toc-text">GC ROOT</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9B%9B%E7%A7%8D%E5%BC%95%E7%94%A8"><span class="toc-number">1.3.8.</span> <span class="toc-text">四种引用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ClassLoader"><span class="toc-number">1.3.9.</span> <span class="toc-text">ClassLoader</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8F%8C%E4%BA%B2%E5%A7%94%E6%89%98%E6%A8%A1%E5%9E%8B%EF%BC%9A"><span class="toc-number">1.3.10.</span> <span class="toc-text">双亲委托模型：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86%E5%8E%9F%E7%90%86%E5%8F%8A%E5%AE%9E%E7%8E%B0"><span class="toc-number">1.3.11.</span> <span class="toc-text">动态代理原理及实现</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Android-%E5%9F%BA%E7%A1%80-amp-%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96-amp-Framwork"><span class="toc-number">1.4.</span> <span class="toc-text">Android 基础 &amp; 性能优化 &amp; Framwork</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Activity-%E5%90%AF%E5%8A%A8%E6%A8%A1%E5%BC%8F"><span class="toc-number">1.4.1.</span> <span class="toc-text">Activity 启动模式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#View-%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86"><span class="toc-number">1.4.2.</span> <span class="toc-text">View 工作原理</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BA%8B%E4%BB%B6%E5%88%86%E5%8F%91%E6%9C%BA%E5%88%B6"><span class="toc-number">1.4.3.</span> <span class="toc-text">事件分发机制</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Window-%E3%80%81-WindowManager%E3%80%81WMS%E3%80%81SurfaceFlinger"><span class="toc-number">1.4.4.</span> <span class="toc-text">Window 、 WindowManager、WMS、SurfaceFlinger</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#View-%E5%8A%A8%E7%94%BB%E3%80%81%E5%B8%A7%E5%8A%A8%E7%94%BB%E5%8F%8A%E5%B1%9E%E6%80%A7%E5%8A%A8%E7%94%BB"><span class="toc-number">1.4.5.</span> <span class="toc-text">View 动画、帧动画及属性动画</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Handler%E3%80%81MessageQueue%E3%80%81Looper"><span class="toc-number">1.4.6.</span> <span class="toc-text">Handler、MessageQueue、Looper</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#MVC%E3%80%81MVP%E3%80%81MVVM"><span class="toc-number">1.4.7.</span> <span class="toc-text">MVC、MVP、MVVM</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Serializable%E3%80%81Parcelable"><span class="toc-number">1.4.8.</span> <span class="toc-text">Serializable、Parcelable</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Binder"><span class="toc-number">1.4.9.</span> <span class="toc-text">Binder</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#IPC-%E6%96%B9%E5%BC%8F"><span class="toc-number">1.4.10.</span> <span class="toc-text">IPC 方式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Android-%E7%B3%BB%E7%BB%9F%E5%90%AF%E5%8A%A8%E6%B5%81%E7%A8%8B"><span class="toc-number">1.4.11.</span> <span class="toc-text">Android 系统启动流程</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#App-%E5%90%AF%E5%8A%A8%E6%B5%81%E7%A8%8B"><span class="toc-number">1.4.12.</span> <span class="toc-text">App 启动流程</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BF%9B%E7%A8%8B%E4%BF%9D%E6%B4%BB"><span class="toc-number">1.4.13.</span> <span class="toc-text">进程保活</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E4%BC%98%E5%8C%96%E5%8F%8A%E6%A3%80%E6%B5%8B"><span class="toc-number">1.4.14.</span> <span class="toc-text">网络优化及检测</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#UI-%E5%8D%A1%E9%A1%BF%E4%BC%98%E5%8C%96"><span class="toc-number">1.4.15.</span> <span class="toc-text">UI 卡顿优化</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%86%85%E5%AD%98%E6%B3%84%E6%BC%8F%E5%9C%BA%E6%99%AF%E5%8F%8A%E8%A7%84%E9%81%BF"><span class="toc-number">1.4.16.</span> <span class="toc-text">内存泄漏场景及规避</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#LeakCanary-%E5%8E%9F%E7%90%86"><span class="toc-number">1.4.17.</span> <span class="toc-text">LeakCanary 原理</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#OOM-%E5%9C%BA%E6%99%AF%E5%8F%8A%E8%A7%84%E9%81%BF"><span class="toc-number">1.4.18.</span> <span class="toc-text">OOM 场景及规避</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Android-%E6%A8%A1%E5%9D%97%E5%8C%96-amp-%E7%83%AD%E4%BF%AE%E5%A4%8D-amp-%E7%83%AD%E6%9B%B4%E6%96%B0-amp-%E6%89%93%E5%8C%85-amp-%E6%B7%B7%E6%B7%86-amp-%E5%8E%8B%E7%BC%A9"><span class="toc-number">1.5.</span> <span class="toc-text">Android 模块化 &amp; 热修复 &amp; 热更新 &amp; 打包 &amp; 混淆 &amp; 压缩</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Dalvik-%E5%92%8C-ART"><span class="toc-number">1.5.1.</span> <span class="toc-text">Dalvik 和 ART</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#APK-%E6%89%93%E5%8C%85%E6%B5%81%E7%A8%8B"><span class="toc-number">1.5.2.</span> <span class="toc-text">APK 打包流程</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#App-%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B"><span class="toc-number">1.5.3.</span> <span class="toc-text">App 安装过程</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BB%84%E4%BB%B6%E5%8C%96%E8%B7%AF%E7%94%B1%E5%AE%9E%E7%8E%B0"><span class="toc-number">1.5.4.</span> <span class="toc-text">组件化路由实现</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%9F%B3%E8%A7%86%E9%A2%91-amp-FFmpeg-amp-%E6%92%AD%E6%94%BE%E5%99%A8"><span class="toc-number">1.6.</span> <span class="toc-text">音视频 &amp; FFmpeg &amp; 播放器</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#FFmpeg"><span class="toc-number">1.6.1.</span> <span class="toc-text">FFmpeg</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%92%AD%E6%94%BE%E5%99%A8%E5%8E%9F%E7%90%86"><span class="toc-number">1.6.2.</span> <span class="toc-text">播放器原理</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#IjkPlayer-%E5%8E%9F%E7%90%86"><span class="toc-number">1.6.3.</span> <span class="toc-text">IjkPlayer 原理</span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/%E6%B8%B8%E6%88%8F/%E7%8B%AC%E7%AB%8B%E6%B8%B8%E6%88%8F/%E7%8B%AC%E7%AB%8B%E6%B8%B8%E6%88%8F%E7%9A%84%E6%88%90%E5%8A%9F%E4%B9%8B%E6%AF%8D/" title="独立游戏的成功之母"><img src="/images/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/Tamsiree/Assets@master/Picture/Blog/Cover/552b1999aa4d5a2e75352fa2f6e93d51.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="独立游戏的成功之母"/></a><div class="content"><a class="title" href="/%E6%B8%B8%E6%88%8F/%E7%8B%AC%E7%AB%8B%E6%B8%B8%E6%88%8F/%E7%8B%AC%E7%AB%8B%E6%B8%B8%E6%88%8F%E7%9A%84%E6%88%90%E5%8A%9F%E4%B9%8B%E6%AF%8D/" title="独立游戏的成功之母">独立游戏的成功之母</a><time datetime="2025-11-11T05:08:38.000Z" title="发表于 2025-11-11 13:08:38">2025-11-11</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/Docker/MongoDB/Docker%E4%B8%ADMongoDB%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E5%A4%87%E4%BB%BD%E4%B8%8E%E6%81%A2%E5%A4%8D/" title="Docker 中 MongoDB 数据库的备份与恢复"><img src="/images/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/Tamsiree/Assets@master/Picture/Blog/Cover/cdd893c83169033d6b4a8354f1ab9d37.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Docker 中 MongoDB 数据库的备份与恢复"/></a><div class="content"><a class="title" href="/Docker/MongoDB/Docker%E4%B8%ADMongoDB%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E5%A4%87%E4%BB%BD%E4%B8%8E%E6%81%A2%E5%A4%8D/" title="Docker 中 MongoDB 数据库的备份与恢复">Docker 中 MongoDB 数据库的备份与恢复</a><time datetime="2025-11-06T00:49:58.000Z" title="发表于 2025-11-06 08:49:58">2025-11-06</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/%E9%9A%8F%E6%89%8B%E8%AE%B0/Unity%E5%A4%9A%E7%BA%BF%E7%A8%8B%E6%B8%B2%E6%9F%93%E5%AF%BC%E8%87%B4%E9%83%A8%E5%88%86%E6%89%8B%E6%9C%BA%E5%B4%A9%E6%BA%83/" title="Unity 多线程渲染导致部分手机崩溃"><img src="/images/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/Tamsiree/Assets@master/Picture/Blog/Cover/9408053447.jpeg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Unity 多线程渲染导致部分手机崩溃"/></a><div class="content"><a class="title" href="/%E9%9A%8F%E6%89%8B%E8%AE%B0/Unity%E5%A4%9A%E7%BA%BF%E7%A8%8B%E6%B8%B2%E6%9F%93%E5%AF%BC%E8%87%B4%E9%83%A8%E5%88%86%E6%89%8B%E6%9C%BA%E5%B4%A9%E6%BA%83/" title="Unity 多线程渲染导致部分手机崩溃">Unity 多线程渲染导致部分手机崩溃</a><time datetime="2023-11-09T11:55:51.000Z" title="发表于 2023-11-09 19:55:51">2023-11-09</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/%E9%9A%8F%E6%89%8B%E8%AE%B0/%E5%A5%BD%E7%94%A8%E7%9A%84CDN%E4%B9%8BjsDelivr/" title="好用的 CDN 之 jsDelivr"><img src="/images/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/Tamsiree/Assets@master/DeskTop/20b24a69649941669d83bb997b01fed6.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="好用的 CDN 之 jsDelivr"/></a><div class="content"><a class="title" href="/%E9%9A%8F%E6%89%8B%E8%AE%B0/%E5%A5%BD%E7%94%A8%E7%9A%84CDN%E4%B9%8BjsDelivr/" title="好用的 CDN 之 jsDelivr">好用的 CDN 之 jsDelivr</a><time datetime="2023-10-16T07:00:56.000Z" title="发表于 2023-10-16 15:00:56">2023-10-16</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/%E9%9A%8F%E6%89%8B%E8%AE%B0/Unity%E5%9D%90%E6%A0%87%E7%B3%BB%E7%BB%9F/" title="Unity 坐标系统"><img src="/images/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/Tamsiree/Assets@master/DeskTop/wallhaven-z8rqjo.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Unity 坐标系统"/></a><div class="content"><a class="title" href="/%E9%9A%8F%E6%89%8B%E8%AE%B0/Unity%E5%9D%90%E6%A0%87%E7%B3%BB%E7%BB%9F/" title="Unity 坐标系统">Unity 坐标系统</a><time datetime="2023-10-14T06:11:46.000Z" title="发表于 2023-10-14 14:11:46">2023-10-14</time></div></div></div></div></div></div></main><footer id="footer"><div class="footer-other"><div class="footer-copyright"><span class="copyright">&copy;&nbsp;2016 - 2025 By Tamsiree</span></div><div class="footer_custom_text">不要盯着我看，已经到底啦～</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">简</button><button id="darkmode" type="button" title="日间和夜间模式切换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="前往评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=5.5.3"></script><script src="/js/main.js?v=5.5.3"></script><script src="/js/tw_cn.js?v=5.5.3"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@6.1.7/dist/fancybox/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload@19.1.3/dist/lazyload.iife.min.js"></script><div class="js-pjax"><script>(() => {
  let initFn = window.walineFn || null
  const isShuoshuo = GLOBAL_CONFIG_SITE.pageType === 'shuoshuo'
  const option = {"placeholder":"留下你的脚印与心声~","pageSize":10,"lang":"zh-CN","requiredFields":["nick"],"avatar":"wavatar"}

  const destroyWaline = ele => ele.destroy()

  const initWaline = (Fn, el = document, path = window.location.pathname) => {
    const waline = Fn({
      el: el.querySelector('#waline-wrap'),
      serverURL: 'https://comment.tamsiree.com',
      pageview: false,
      dark: 'html[data-theme="dark"]',
      comment: false,
      ...option,
      path: isShuoshuo ? path : (option && option.path) || path
    })

    if (isShuoshuo) {
      window.shuoshuoComment.destroyWaline = () => {
        destroyWaline(waline)
        if (el.children.length) {
          el.innerHTML = ''
          el.classList.add('no-comment')
        }
      }
    }
  }

  const loadWaline = (el, path) => {
    if (initFn) initWaline(initFn, el, path)
    else {
      btf.getCSS('https://cdn.jsdelivr.net/npm/@waline/client@3.8.0/dist/waline.min.css')
        .then(() => import('https://cdn.jsdelivr.net/npm/@waline/client@3.8.0/dist/waline.min.js'))
        .then(({ init }) => {
          initFn = init || Waline.init
          initWaline(initFn, el, path)
          window.walineFn = initFn
        })
    }
  }

  if (isShuoshuo) {
    'Waline' === 'Waline'
      ? window.shuoshuoComment = { loadComment: loadWaline } 
      : window.loadOtherComment = loadWaline
    return
  }

  if ('Waline' === 'Waline' || !true) {
    if (true) btf.loadComment(document.getElementById('waline-wrap'),loadWaline)
    else setTimeout(loadWaline, 0)
  } else {
    window.loadOtherComment = loadWaline
  }
})()</script></div><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8688374801147098" crossorigin="anonymous"></script><script defer="defer" id="fluttering_ribbon" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/dist/canvas-fluttering-ribbon.min.js"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/metingjs/dist/Meting.min.js"></script><script>(() => {
  const destroyAplayer = () => {
    if (window.aplayers) {
      for (let i = 0; i < window.aplayers.length; i++) {
        if (!window.aplayers[i].options.fixed) {
          window.aplayers[i].destroy()
        }
      }
    }
  }

  const runMetingJS = () => {
    typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()
  }

  btf.addGlobalFn('pjaxSend', destroyAplayer, 'destroyAplayer')
  btf.addGlobalFn('pjaxComplete', loadMeting, 'runMetingJS')
})()</script><script src="https://cdn.jsdelivr.net/npm/pjax@0.2.8/pjax.min.js" defer="defer"></script><script>document.addEventListener('DOMContentLoaded', () => {
  const pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]

  window.pjax = new Pjax({
    elements: 'a:not([target="_blank"]):not([href="/talking/"])',
    selectors: pjaxSelectors,
    cacheBust: false,
    analytics: false,
    scrollRestoration: false
  })

  const triggerPjaxFn = (val) => {
    if (!val) return
    Object.values(val).forEach(fn => {
      try {
        fn()
      } catch (err) {
        console.debug('Pjax callback failed:', err)
      }
    })
  }

  document.addEventListener('pjax:send', () => {
    // removeEventListener
    btf.removeGlobalFnEvent('pjaxSendOnce')
    btf.removeGlobalFnEvent('themeChange')

    // reset readmode
    const $bodyClassList = document.body.classList
    if ($bodyClassList.contains('read-mode')) $bodyClassList.remove('read-mode')

    triggerPjaxFn(window.globalFn.pjaxSend)
  })

  document.addEventListener('pjax:complete', () => {
    btf.removeGlobalFnEvent('pjaxCompleteOnce')
    document.querySelectorAll('script[data-pjax]').forEach(item => {
      const newScript = document.createElement('script')
      const content = item.text || item.textContent || item.innerHTML || ""
      Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
      newScript.appendChild(document.createTextNode(content))
      item.parentNode.replaceChild(newScript, item)
    })

    triggerPjaxFn(window.globalFn.pjaxComplete)
  })

  document.addEventListener('pjax:error', e => {
    if (e.request.status === 404) {
      true
        ? pjax.loadUrl('/404.html')
        : window.location.href = e.request.responseURL
    }
  })
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><i class="fas fa-spinner fa-pulse" id="loading-status" hidden="hidden"></i><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="text-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据加载中</span></div><div class="local-search-input"><input placeholder="搜索文章" type="text"/></div><hr/><div id="local-search-results"></div><div class="ais-Pagination" id="local-search-pagination" style="display:none;"><ul class="ais-Pagination-list"></ul></div><div id="local-search-stats"></div></div><div id="search-mask"></div><script src="/js/search/local-search.js?v=5.5.3"></script></div></div></body></html>