<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>使用 NexusPhp 打造个性化的 PT 站 | Tamsiree</title><meta name="author" content="Tamsiree,tamsiree.com@gmail.com"><meta name="copyright" content="Tamsiree"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="国内使用 &#96;NexusPhp&#96; 建立的PT站越来越多，风格大都雷同（正如yofeng同学所说的审美疲劳......），如何把 &#96;NexusPhp&#96; 快速配置成你喜欢的界面、风格，本人在这里抛砖引玉，希望大家在这里开放的讨论、共享使用 &#96;NexusPhp&#96; 建站心得，OK，Let&#39;s doing...">
<meta property="og:type" content="article">
<meta property="og:title" content="使用 NexusPhp 打造个性化的 PT 站">
<meta property="og:url" content="https://tamsiree.com/TechnicalResearch/PT%E7%AB%99/NexusPhp/%E4%BD%BF%E7%94%A8NexusPhp%E6%89%93%E9%80%A0%E4%B8%AA%E6%80%A7%E5%8C%96%E7%9A%84PT%E7%AB%99/">
<meta property="og:site_name" content="Tamsiree">
<meta property="og:description" content="国内使用 &#96;NexusPhp&#96; 建立的PT站越来越多，风格大都雷同（正如yofeng同学所说的审美疲劳......），如何把 &#96;NexusPhp&#96; 快速配置成你喜欢的界面、风格，本人在这里抛砖引玉，希望大家在这里开放的讨论、共享使用 &#96;NexusPhp&#96; 建站心得，OK，Let&#39;s doing...">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/Tamsiree/Assets@master/Picture/Blog/Cover/20150512112726335.jpg">
<meta property="article:published_time" content="2020-02-05T12:46:11.000Z">
<meta property="article:modified_time" content="2025-11-05T13:53:39.399Z">
<meta property="article:author" content="Tamsiree">
<meta property="article:tag" content="NexusPhp">
<meta property="article:tag" content="PT站">
<meta property="article:tag" content="TechnicalResearch">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/Tamsiree/Assets@master/Picture/Blog/Cover/20150512112726335.jpg"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "使用 NexusPhp 打造个性化的 PT 站",
  "url": "https://tamsiree.com/TechnicalResearch/PT%E7%AB%99/NexusPhp/%E4%BD%BF%E7%94%A8NexusPhp%E6%89%93%E9%80%A0%E4%B8%AA%E6%80%A7%E5%8C%96%E7%9A%84PT%E7%AB%99/",
  "image": "https://cdn.jsdelivr.net/gh/Tamsiree/Assets@master/Picture/Blog/Cover/20150512112726335.jpg",
  "datePublished": "2020-02-05T12:46:11.000Z",
  "dateModified": "2025-11-05T13:53:39.399Z",
  "author": [
    {
      "@type": "Person",
      "name": "Tamsiree",
      "url": "https://tamsiree.com"
    }
  ]
}</script><link rel="shortcut icon" href="https://cdn.jsdelivr.net/gh/Tamsiree/Assets@master/Avatar/avatar_sky_circle.png"><link rel="canonical" href="https://tamsiree.com/TechnicalResearch/PT%E7%AB%99/NexusPhp/%E4%BD%BF%E7%94%A8NexusPhp%E6%89%93%E9%80%A0%E4%B8%AA%E6%80%A7%E5%8C%96%E7%9A%84PT%E7%AB%99/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//fonts.googleapis.com" crossorigin=""/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="manifest" href="/manifest.json"/><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"/><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"/><link rel="stylesheet" href="/css/index.css?v=5.5.3"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@7.1.0/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@6.1.7/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          const mediaQueryDark = window.matchMedia('(prefers-color-scheme: dark)')
          const mediaQueryLight = window.matchMedia('(prefers-color-scheme: light)')

          if (theme === undefined) {
            if (mediaQueryLight.matches) activateLightMode()
            else if (mediaQueryDark.matches) activateDarkMode()
            else {
              const hour = new Date().getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            mediaQueryDark.addEventListener('change', () => {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else {
            theme === 'light' ? activateLightMode() : activateDarkMode()
          }
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script async="async" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script>(adsbygoogle = window.adsbygoogle || []).push({
  google_ad_client: 'ca-pub-8688374801147098',
  enable_page_level_ads: 'true'
});</script><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web&amp;display=swap" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"top_n_per_article":1,"unescape":false,"pagination":{"enable":false,"hitsPerPage":8},"languages":{"hits_empty":"未找到符合您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简"},
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":false},
  copy: {
    success: '复制成功',
    error: '复制失败',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"limitCount":50,"languages":{"author":"作者: Tamsiree","link":"链接: ","source":"来源: Tamsiree","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  lightbox: 'fancybox',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.12.0/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: true,
  islazyloadPlugin: true,
  isAnchor: true,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '使用 NexusPhp 打造个性化的 PT 站',
  isHighlightShrink: false,
  isToc: true,
  pageType: 'post'
}</script><meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests"><script>if (window.location.protocol !== 'https:' && window.location.hostname !== 'localhost' && window.location.hostname !== '127.0.0.1') { window.location.href = window.location.href.replace('http:', 'https:'); }</script><meta name="generator" content="Hexo 8.1.1"><link rel="alternate" href="/atom.xml" title="Tamsiree" type="application/atom+xml">
</head><body><div class="bg-animation" id="web_bg" style="background-color: #f0f0f0;"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="/images/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/Tamsiree/Assets@master/Avatar/avatar_sky_circle.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">201</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">140</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">143</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-keyboard"></i><span> 目录</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-torah"></i><span> 时间轴</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-leaf"></i><span> 风向标</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-dragon"></i><span> 寻龙尺</span></a></li></ul></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-icons"></i><span> 回味</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li><li><a class="site-page child" href="/gallery/"><i class="fa-fw fas fa-camera-retro"></i><span> 画廊</span></a></li><li><a class="site-page child" href="/book/"><i class="fa-fw fas fa-book"></i><span> 书屋</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 神秘链接</span></a></div><div class="menus_item"><a class="site-page" href="/messageboard/"><i class="fa-fw fas fa-clipboard-list"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-id-badge"></i><span> 关于</span></a></div><div class="menus_item"><a class="site-page" href="/night_sky/"><i class="fa-fw fas fa-magic"></i><span> 冥想空间</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(https://cdn.jsdelivr.net/gh/Tamsiree/Assets@master/Picture/Blog/Cover/20150512112726335.jpg);"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">Tamsiree</span></a><a class="nav-page-title" href="/"><span class="site-name">使用 NexusPhp 打造个性化的 PT 站</span><span class="site-name"><i class="fa-solid fa-circle-arrow-left"></i><span>  返回首页</span></span></a></span><div id="menus"><div id="search-button"><span class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></span></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-keyboard"></i><span> 目录</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-torah"></i><span> 时间轴</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-leaf"></i><span> 风向标</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-dragon"></i><span> 寻龙尺</span></a></li></ul></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-icons"></i><span> 回味</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li><li><a class="site-page child" href="/gallery/"><i class="fa-fw fas fa-camera-retro"></i><span> 画廊</span></a></li><li><a class="site-page child" href="/book/"><i class="fa-fw fas fa-book"></i><span> 书屋</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 神秘链接</span></a></div><div class="menus_item"><a class="site-page" href="/messageboard/"><i class="fa-fw fas fa-clipboard-list"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-id-badge"></i><span> 关于</span></a></div><div class="menus_item"><a class="site-page" href="/night_sky/"><i class="fa-fw fas fa-magic"></i><span> 冥想空间</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">使用 NexusPhp 打造个性化的 PT 站</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2020-02-05T12:46:11.000Z" title="发表于 2020-02-05 20:46:11">2020-02-05</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2025-11-05T13:53:39.399Z" title="更新于 2025-11-05 21:53:39">2025-11-05</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/TechnicalResearch/">TechnicalResearch</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/TechnicalResearch/PT%E7%AB%99/">PT站</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/TechnicalResearch/PT%E7%AB%99/NexusPhp/">NexusPhp</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">总字数:</span><span class="word-count">2.4k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>11分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">浏览量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>国内使用 <code>NexusPhp</code> 建立的 PT 站越来越多，风格大都雷同（正如 yofeng 同学所说的审美疲劳……），如何把 <code>NexusPhp</code> 快速配置成你喜欢的界面、风格，本人在这里抛砖引玉，希望大家在这里开放的讨论、共享使用 <code>NexusPhp</code> 建站心得，OK，Let’s doing…</p>
<h1 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h1><h2 id="为用户等级追加标识"><a href="#为用户等级追加标识" class="headerlink" title="为用户等级追加标识"></a>为用户等级追加标识</h2><p>方法：以简体中文为例，打开 <code>nexusphp.v1.5.beta4.2010XXXX\lang\chs\lang_functions.php</code> 修改 <code>257-266</code> 行下列设置（如果要其他语种也需要，则每种语言包都要配置）：  </p>
<p>修改前：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;text_peasant&#x27;</span> =&gt; <span class="string">&quot;Peasant&quot;</span>,</span><br><span class="line"><span class="string">&#x27;text_user&#x27;</span> =&gt; <span class="string">&quot;User&quot;</span>,</span><br><span class="line"><span class="string">&#x27;text_power_user&#x27;</span> =&gt; <span class="string">&quot;Power User&quot;</span>,</span><br><span class="line"><span class="string">&#x27;text_elite_user&#x27;</span> =&gt; <span class="string">&quot;Elite User&quot;</span>,</span><br><span class="line"><span class="string">&#x27;text_crazy_user&#x27;</span> =&gt; <span class="string">&quot;Crazy User&quot;</span>,</span><br><span class="line"><span class="string">&#x27;text_insane_user&#x27;</span> =&gt; <span class="string">&quot;Insane User&quot;</span>,</span><br><span class="line"><span class="string">&#x27;text_veteran_user&#x27;</span> =&gt; <span class="string">&quot;Veteran User&quot;</span>,</span><br><span class="line"><span class="string">&#x27;text_extreme_user&#x27;</span> =&gt; <span class="string">&quot;Extreme User&quot;</span>,</span><br><span class="line"><span class="string">&#x27;text_ultimate_user&#x27;</span> =&gt; <span class="string">&quot;Ultimate User&quot;</span>,</span><br><span class="line"><span class="string">&#x27;text_nexus_master&#x27;</span> =&gt; <span class="string">&quot;Nexus Master&quot;</span>,</span><br></pre></td></tr></table></figure>

<p>修改后：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;text_peasant&#x27;</span> =&gt; <span class="string">&quot;(堕落者)Peasant&quot;</span>,</span><br><span class="line"><span class="string">&#x27;text_user&#x27;</span> =&gt; <span class="string">&quot;(穷人)User&quot;</span>,</span><br><span class="line"><span class="string">&#x27;text_power_user&#x27;</span> =&gt; <span class="string">&quot;(百姓)Power User&quot;</span>,</span><br><span class="line"><span class="string">&#x27;text_elite_user&#x27;</span> =&gt; <span class="string">&quot;(小康)Elite User&quot;</span>,</span><br><span class="line"><span class="string">&#x27;text_crazy_user&#x27;</span> =&gt; <span class="string">&quot;(大康)Crazy User&quot;</span>,</span><br><span class="line"><span class="string">&#x27;text_insane_user&#x27;</span> =&gt; <span class="string">&quot;(中产)Insane User&quot;</span>,</span><br><span class="line"><span class="string">&#x27;text_veteran_user&#x27;</span> =&gt; <span class="string">&quot;(富商)Veteran User&quot;</span>,</span><br><span class="line"><span class="string">&#x27;text_extreme_user&#x27;</span> =&gt; <span class="string">&quot;(银行家)Extreme User&quot;</span>,</span><br><span class="line"><span class="string">&#x27;text_ultimate_user&#x27;</span> =&gt; <span class="string">&quot;(豪门)Ultimate User&quot;</span>,</span><br><span class="line"><span class="string">&#x27;text_nexus_master&#x27;</span> =&gt; <span class="string">&quot;(贵族)Nexus Master&quot;</span>,</span><br></pre></td></tr></table></figure>

<blockquote>
<p>注意：Web 服务器需要重启 http 生效！</p>
</blockquote>
<p><img src="/images/loading.gif" data-lazy-src="https://imgsa.baidu.com/forum/w%3D580/sign=7259bb0994cad1c8d0bbfc2f4f3e67c4/69be26d0f703918fe2fb96ec503d269759eec403.jpg" alt="为用户等级追加标识"></p>
<h2 id="关闭搜索箱"><a href="#关闭搜索箱" class="headerlink" title="关闭搜索箱"></a>关闭搜索箱</h2><p>应用此风格的有 <code>CHDbits</code> 、 <code>TCCF</code> 、 <code>Pig2Pig</code> 等<br>为什么要关闭？<br><code>Nexusphp</code> 的搜索箱功能十分强大，不过对用户来说并不是每次都要使用的，且所占版面较大（个人觉得也是版面看起来雷同的一大因素），由于在后台和数据库中无相关配置项，故需要对程序进行修改：</p>
<p>打开主目录下的 <code>torrents.php</code> 文件，查找 <code>874-876</code> 行，来到这里：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;td <span class="class"><span class="keyword">class</span>=&quot;<span class="title">colhead</span>&quot; <span class="title">align</span>=&quot;<span class="title">center</span>&quot; <span class="title">colspan</span>=&quot;2&quot;&gt;</span></span><br><span class="line"><span class="class">    &lt;<span class="title">a</span> <span class="title">href</span>=&quot;<span class="title">javascript</span>: <span class="title">klappe_news</span>(&#x27;<span class="title">searchboxmain</span>&#x27;)&quot;&gt;</span></span><br><span class="line"><span class="class">        &lt;<span class="title">img</span> <span class="title">class</span>=&quot;<span class="title">minus</span>&quot; <span class="title">src</span>=&quot;<span class="title">pic</span>/<span class="title">trans</span>.<span class="title">gif</span>&quot; <span class="title">id</span>=&quot;<span class="title">picsearchboxmain</span>&quot; <span class="title">alt</span>=&quot;<span class="title">Show</span>/<span class="title">Hide</span>&quot; /&gt;</span></span><br><span class="line"><span class="class">        &lt;?<span class="title">php</span> <span class="title">echo</span> $<span class="title">lang_torrents</span>[&#x27;<span class="title">text_search_box</span>&#x27;] ?&gt;</span></span><br><span class="line"><span class="class">    &lt;/<span class="title">a</span>&gt;</span></span><br><span class="line"><span class="class">&lt;/<span class="title">td</span>&gt;</span></span><br><span class="line"><span class="class">&lt;/<span class="title">tr</span>&gt;</span></span><br><span class="line"><span class="class">&lt;/<span class="title">tbody</span>&gt;</span></span><br><span class="line"><span class="class">&lt;<span class="title">tbody</span> <span class="title">id</span>=&quot;<span class="title">ksearchboxmain</span>&quot;&gt;</span></span><br></pre></td></tr></table></figure>

<p>将 <code>class=&quot;minus&quot;</code> 改成 <code>class=&quot;plus&quot;</code><br>在 <code>&lt;tbody id=&quot;ksearchboxmain&quot;&gt;</code> 中追加 <code>&lt;tbody id=&quot;ksearchboxmain&quot; style=&quot;display:none&quot;&gt;</code></p>
<p>完成后，代码变为：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;td <span class="class"><span class="keyword">class</span>=&quot;<span class="title">colhead</span>&quot; <span class="title">align</span>=&quot;<span class="title">center</span>&quot; <span class="title">colspan</span>=&quot;2&quot;&gt;  </span></span><br><span class="line"><span class="class">    &lt;<span class="title">a</span> <span class="title">href</span>=&quot;<span class="title">javascript</span>: <span class="title">klappe_news</span>(&#x27;<span class="title">searchboxmain</span>&#x27;)&quot;&gt;</span></span><br><span class="line"><span class="class">        &lt;<span class="title">img</span> <span class="title">class</span>=&quot;<span class="title">plus</span>&quot; <span class="title">src</span>=&quot;<span class="title">pic</span>/<span class="title">trans</span>.<span class="title">gif</span>&quot; <span class="title">id</span>=&quot;<span class="title">picsearchboxmain</span>&quot; <span class="title">alt</span>=&quot;<span class="title">Show</span>/<span class="title">Hide</span>&quot; /&gt;</span></span><br><span class="line"><span class="class">        &lt;?<span class="title">php</span> <span class="title">echo</span> $<span class="title">lang_torrents</span>[&#x27;<span class="title">text_search_box</span>&#x27;] ?&gt;</span></span><br><span class="line"><span class="class">    &lt;/<span class="title">a</span>&gt;</span></span><br><span class="line"><span class="class">&lt;/<span class="title">td</span>&gt;</span></span><br><span class="line"><span class="class">&lt;/<span class="title">tr</span>&gt;</span></span><br><span class="line"><span class="class">&lt;/<span class="title">tbody</span>&gt;</span></span><br><span class="line"><span class="class">&lt;<span class="title">tbody</span> <span class="title">id</span>=&quot;<span class="title">ksearchboxmain</span>&quot; <span class="title">style</span>=&quot;<span class="title">display</span>:<span class="title">none</span>&quot;&gt;</span></span><br></pre></td></tr></table></figure>

<p><img src="/images/loading.gif" data-lazy-src="https://imgsa.baidu.com/forum/w%3D580/sign=de05584a113853438ccf8729a313b01f/046d5fd5ad6eddc4baf51fdd38dbb6fd5266331b.jpg" alt="关闭搜索箱"></p>
<h2 id="增加种子类别快速搜索功能"><a href="#增加种子类别快速搜索功能" class="headerlink" title="增加种子类别快速搜索功能"></a>增加种子类别快速搜索功能</h2><p>应用此风格的有 <code>HDcity</code> 、<code>高清第一</code> 等<br><code>NexusPhp</code> 种子在高亮模式下本来就有此功能，不过大多数站点缺省模式下并不流行种子高亮显示方式（本人所了解的有 <code>HDStar</code> 及部分刚运营的 PT 站），通过颜色来判断种子类别还是有难度的！<br>最流行的还是以 <code>字符</code> 和 <code>图标</code> 显示（可以通过配置数据库 <code>user</code> 表来预置），但在这两种模式下恰恰没有快速搜索的字符按钮，不过我们可以通过修改代码来增加它：</p>
<p>打开主目录下的 <code>torrents.php</code> 文件，查找 <code>1075-1077</code> 行，来到这里</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="variable">$count</span>) &#123;</span><br><span class="line">    <span class="keyword">print</span>(<span class="variable">$pagertop</span>);</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable">$sectiontype</span> == <span class="variable">$browsecatmode</span>)</span><br><span class="line">在上面中第二行与第三行之间插入“<span class="keyword">print</span>(<span class="string">&quot;&lt;p align=\&quot;center\&quot;&gt; &quot;</span>.<span class="variable">$lang_functions</span>[<span class="string">&#x27;text_promoted_torrents_note&#x27;</span>].<span class="string">&quot;&lt;/p&gt;\n&quot;</span>);” <span class="comment">// 这一句是完全引用作者在高亮模式下内建的语句！</span></span><br></pre></td></tr></table></figure>

<p>修改后代码如下：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="variable">$count</span>) &#123;</span><br><span class="line">    <span class="keyword">print</span>(<span class="variable">$pagertop</span>);</span><br><span class="line">    <span class="keyword">print</span>(<span class="string">&quot;&lt;p align=\&quot;center\&quot;&gt; &quot;</span>.<span class="variable">$lang_functions</span>[<span class="string">&#x27;text_promoted_torrents_note&#x27;</span>].<span class="string">&quot;&lt;/p&gt;\n&quot;</span>); <span class="comment">// 此处是在搜索箱下部位置插入，你也可以选择在其他位置插入！</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="variable">$sectiontype</span> == <span class="variable">$browsecatmode</span>)</span><br><span class="line">    <span class="title function_ invoke__">torrenttable</span>(<span class="variable">$res</span>, <span class="string">&quot;torrents&quot;</span>);</span><br></pre></td></tr></table></figure>

<p><img src="/images/loading.gif" data-lazy-src="https://imgsa.baidu.com/forum/w%3D580/sign=2a738e2e5243fbf2c52ca62b807eca1e/114ce96eddc451da6de4a7cdb7fd5266d016321b.jpg" alt="增加种子类别快速搜索功能"></p>
<h2 id="改变置顶种子格子颜色"><a href="#改变置顶种子格子颜色" class="headerlink" title="改变置顶种子格子颜色"></a>改变置顶种子格子颜色</h2><p>应用此风格的有 <code>CHDbits</code>、<code>皇后</code> 等<br>改变颜色有助于用户更醒目、更直观的区分置顶帖（当然方法有很多，看个人喜好，部分 PT 站使用 “置顶” 字符，<code>CHDbits</code> 还更换了置顶标识），前些时间看到有人评价皇后的置顶种子颜色很“媚”，决定自己也改一改：<br>打开主目录 <code>/include/functions.php</code>，查找 <code>3021-3023</code> 行，来到这里：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$id</span> = <span class="variable">$row</span>[<span class="string">&quot;id&quot;</span>];</span><br><span class="line"><span class="variable">$sphighlight</span> = <span class="title function_ invoke__">get_torrent_bg_color</span>(<span class="variable">$row</span>[<span class="string">&#x27;sp_state&#x27;</span>]);</span><br><span class="line"><span class="keyword">print</span>(<span class="string">&quot;&lt;tr&quot;</span> . <span class="variable">$sphighlight</span> . <span class="string">&quot;&gt;\n&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>修改程序为（用下面五行替换上面 3 行）：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$id</span> = <span class="variable">$row</span>[<span class="string">&quot;id&quot;</span>];</span><br><span class="line"><span class="keyword">if</span> (<span class="variable">$row</span>[<span class="string">&#x27;pos_state&#x27;</span>] == <span class="string">&#x27;sticky&#x27;</span> &amp;&amp; <span class="variable">$CURUSER</span>[<span class="string">&#x27;appendsticky&#x27;</span>] == <span class="string">&#x27;yes&#x27;</span>) &#123;</span><br><span class="line">    <span class="variable">$sphighlight</span> = <span class="string">&quot; class=&#x27;twoupfree_bg&#x27;&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> <span class="variable">$sphighlight</span> = <span class="title function_ invoke__">get_torrent_bg_color</span>(<span class="variable">$row</span>[<span class="string">&#x27;sp_state&#x27;</span>]);</span><br><span class="line"><span class="keyword">print</span>(<span class="string">&quot;&lt;tr&quot;</span> . <span class="variable">$sphighlight</span> . <span class="string">&quot;&gt;\n&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>注意：上面 <code>$sphighlight = &quot;class=&#39;twoupfree_bg&#39;&quot;; 中的 class=&#39;twoupfree_bg&#39;</code> 是赋予置顶种子格子的显示颜色，属性在风格目录下的 <code>theme.css</code> 文件中定义，可以根据下面 <code>sample</code> 自行添加，然后替换上面代码中的 <code>“&#39;twoupfree_bg&#39;”</code>（注意每种风格都要添加），如果嫌麻烦就直接借用种子类型的一种，本例选择了 <code>twoupfree_bg</code>，即与 2X 上传颜色相同。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">.free&#123;color:<span class="comment">#f0cc00&#125;</span></span><br><span class="line">.twoup&#123;color:<span class="comment">#aaaaaa&#125;</span></span><br><span class="line">.twoupfree&#123;color:<span class="comment">#99cc66&#125;</span></span><br><span class="line">.halfdown&#123;color:<span class="comment">#7c7ff6&#125;</span></span><br><span class="line">.twouphalfdown&#123;color:<span class="comment">#7ad6ea&#125;</span></span><br><span class="line">.thirtypercent&#123;color:<span class="comment">#70328d&#125;</span></span><br><span class="line">.free_bg&#123;background-color:<span class="comment">#ffff99&#125;</span></span><br><span class="line">.twoup_bg&#123;background-color:<span class="comment">#dddddd&#125;</span></span><br><span class="line">.twoupfree_bg&#123;background-color:<span class="comment">#ccff99&#125;</span></span><br><span class="line">.halfdown_bg&#123;background-color:<span class="comment">#cccdf8&#125;</span></span><br><span class="line">.twouphalfdown_bg&#123;background-color: <span class="comment">#96dbea&#125;</span></span><br><span class="line">.thirtypercentdown_bg&#123;background-color:<span class="comment">#ddc3ea&#125;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>注：在黑色风格下无效。</p>
</blockquote>
<p><img src="/images/loading.gif" data-lazy-src="https://imgsa.baidu.com/forum/w%3D580/sign=d2e2a73f2cf5e0feee1889096c6134e5/bac8bc198618367af849d7fb2f738bd4b21ce569.jpg" alt="改变置顶种子格子颜色 1"></p>
<p><img src="/images/loading.gif" data-lazy-src="https://imgsa.baidu.com/forum/w%3D580/sign=19d4b0e3e1fe9925cb0c695804a95ee4/f280c218367adab46910b3658ad4b31c8601e469.jpg" alt="改变置顶种子格子颜色 2"></p>
<h2 id="在种子主题上附加促销种子过期时间提示"><a href="#在种子主题上附加促销种子过期时间提示" class="headerlink" title="在种子主题上附加促销种子过期时间提示"></a>在种子主题上附加促销种子过期时间提示</h2><p>应用此风格的有 <code>CHDbits</code>、<code>HDcity</code>、<code>皇后</code> 等 <code>Nexusphp</code> 本来就有促销种子的过期提示（字符及图标显示模式下），只需要用鼠标放在促销类别字符或图标上就可以进行淡入淡出提示，不过用户要想了解每一个种子过期时间，都需要用鼠标进行查看，不太方便，对此可以对代码进行适当修改，使其附加到种子主 / 副标题上进行显示，这样看起来就直观得多了：</p>
<p>打开 <code>include/functions.php</code> 文件，查找 <code>3093-3095</code> 行（不同源码版本可能行号略有差异），来到这里：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">print</span>(“&lt;td <span class="class"><span class="keyword">class</span>=\”<span class="title">rowfollow</span>\” <span class="title">width</span>=\”100%\” <span class="title">align</span>=\”<span class="title">left</span>\”&gt;&lt;<span class="title">table</span> <span class="title">class</span>=\”<span class="title">torrentname</span>\” <span class="title">width</span>=\”100%\”&gt;&lt;<span class="title">tr</span>” . $<span class="title">sphighlight</span> . “&gt;&lt;<span class="title">td</span> <span class="title">class</span>=\”<span class="title">embedded</span>\”&gt;”.$<span class="title">stickyicon</span>.”&lt;<span class="title">a</span> $<span class="title">short_torrent_name_alt</span> $<span class="title">mouseovertorrent</span> <span class="title">href</span>=\”<span class="title">details</span>.<span class="title">php</span>?<span class="title">id</span>=”.$<span class="title">id</span>.”&amp;<span class="title">amp</span>;<span class="title">hit</span>=1\”&gt;&lt;<span class="title">b</span>&gt;”.<span class="title">htmlspecialchars</span>($<span class="title">dispname</span>).”&lt;/<span class="title">b</span>&gt;&lt;/<span class="title">a</span>&gt;”);</span></span><br><span class="line"><span class="class">$<span class="title">sp_torrent</span> = <span class="title">get_torrent_promotion_append</span>($<span class="title">row</span>[‘<span class="title">sp_state</span>’],””,<span class="title">true</span>,$<span class="title">row</span>[“<span class="title">added</span>”], $<span class="title">row</span>[‘<span class="title">promotion_time_type</span>’], $<span class="title">row</span>[‘<span class="title">promotion_until</span>’]);</span></span><br><span class="line"><span class="class">$<span class="title">picked_torrent</span> = “”;</span></span><br></pre></td></tr></table></figure>

<p>注意，上面红色字体用到的函数 <code>get_torrent_promotion_append()</code> 即是种子附加促销提示的显示模块。</p>
<p>Step1：添加一个功能函数：<br>为了不改变原来的功能，我们需要在后面 copy 一下该函数并进行修改(函数命名为 <code>get_torrent_promotion_append_sub()</code>，并插入到原函数附近)，修改后的代码如下：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">get_torrent_promotion_append_sub</span>(<span class="params"><span class="variable">$promotion</span> = <span class="number">1</span>,<span class="variable">$forcemode</span> = “”,<span class="variable">$showtimeleft</span> = <span class="literal">false</span>, <span class="variable">$added</span> = “”, <span class="variable">$promotionTimeType</span> = <span class="number">0</span>, <span class="variable">$promotionUntil</span> = ”</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">global</span> <span class="variable">$CURUSER</span>,<span class="variable">$lang_functions</span>;</span><br><span class="line">    <span class="keyword">global</span> <span class="variable">$expirehalfleech_torrent</span>, <span class="variable">$expirefree_torrent</span>, <span class="variable">$expiretwoup_torrent</span>, <span class="variable">$expiretwoupfree_torrent</span>, <span class="variable">$expiretwouphalfleech_torrent</span>, <span class="variable">$expirethirtypercentleech_torrent</span>;</span><br><span class="line">    <span class="variable">$sp_torrent_sub</span> = “”;</span><br><span class="line">    <span class="variable">$onmouseover_sub</span> = “”;</span><br><span class="line">    <span class="keyword">if</span> (<span class="title function_ invoke__">get_global_sp_state</span>() == <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">switch</span> (<span class="variable">$promotion</span>)&#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">2</span>: &#123;</span><br><span class="line">                <span class="keyword">if</span> (<span class="variable">$showtimeleft</span> &amp;&amp; ((<span class="variable">$expirefree_torrent</span> &amp;&amp; <span class="variable">$promotionTimeType</span> == <span class="number">0</span>) || <span class="variable">$promotionTimeType</span> == <span class="number">2</span>)) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (<span class="variable">$promotionTimeType</span> == <span class="number">2</span>) &#123;</span><br><span class="line">                        <span class="variable">$futuretime</span> = <span class="title function_ invoke__">strtotime</span>(<span class="variable">$promotionUntil</span>);</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        <span class="variable">$futuretime</span> = <span class="title function_ invoke__">strtotime</span>(<span class="variable">$added</span>) + <span class="variable">$expirefree_torrent</span> * <span class="number">86400</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="variable">$timeout</span> = <span class="title function_ invoke__">gettime</span>(<span class="title function_ invoke__">date</span>(“Y-m-d <span class="attr">H</span>:<span class="attr">i</span>:s”, <span class="variable">$futuretime</span>), <span class="literal">false</span>, <span class="literal">false</span>, <span class="literal">true</span>, <span class="literal">false</span>, <span class="literal">true</span>);</span><br><span class="line">                    <span class="keyword">if</span> (<span class="variable">$timeout</span>)</span><br><span class="line">                        <span class="variable">$onmouseover_sub</span> = ” (&lt;font color=’<span class="comment">#0000FF’&gt;”.$lang_functions[‘text_will_end_in’].$timeout.”&lt;/font&gt;”.”)”; //free 类型字符显示为蓝色，可以更改它</span></span><br><span class="line">                    <span class="keyword">else</span> <span class="variable">$promotion</span> = <span class="number">1</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">3</span>: &#123;</span><br><span class="line">                <span class="keyword">if</span> (<span class="variable">$showtimeleft</span> &amp;&amp; ((<span class="variable">$expiretwoup_torrent</span> &amp;&amp; <span class="variable">$promotionTimeType</span> == <span class="number">0</span>) || <span class="variable">$promotionTimeType</span> == <span class="number">2</span>)) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (<span class="variable">$promotionTimeType</span> == <span class="number">2</span>) &#123;</span><br><span class="line">                        <span class="variable">$futuretime</span> = <span class="title function_ invoke__">strtotime</span>(<span class="variable">$promotionUntil</span>);</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        <span class="variable">$futuretime</span> = <span class="title function_ invoke__">strtotime</span>(<span class="variable">$added</span>) + <span class="variable">$expiretwoup_torrent</span> * <span class="number">86400</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="variable">$timeout</span> = <span class="title function_ invoke__">gettime</span>(<span class="title function_ invoke__">date</span>(“Y-m-d <span class="attr">H</span>:<span class="attr">i</span>:s”, <span class="variable">$futuretime</span>), <span class="literal">false</span>, <span class="literal">false</span>, <span class="literal">true</span>, <span class="literal">false</span>, <span class="literal">true</span>);</span><br><span class="line">                    <span class="keyword">if</span> (<span class="variable">$timeout</span>)</span><br><span class="line">                        <span class="variable">$onmouseover_sub</span> = ” (“.<span class="variable">$lang_functions</span>[‘text_will_end_in’].<span class="variable">$timeout</span>.”)”;</span><br><span class="line">                    <span class="keyword">else</span> <span class="variable">$promotion</span> = <span class="number">1</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">4</span>: &#123;</span><br><span class="line">                <span class="keyword">if</span> (<span class="variable">$showtimeleft</span> &amp;&amp; ((<span class="variable">$expiretwoupfree_torrent</span> &amp;&amp; <span class="variable">$promotionTimeType</span> == <span class="number">0</span>) || <span class="variable">$promotionTimeType</span> == <span class="number">2</span>)) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (<span class="variable">$promotionTimeType</span> == <span class="number">2</span>) &#123;</span><br><span class="line">                        <span class="variable">$futuretime</span> = <span class="title function_ invoke__">strtotime</span>(<span class="variable">$promotionUntil</span>);</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        <span class="variable">$futuretime</span> = <span class="title function_ invoke__">strtotime</span>(<span class="variable">$added</span>) + <span class="variable">$expiretwoupfree_torrent</span> * <span class="number">86400</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="variable">$timeout</span> = <span class="title function_ invoke__">gettime</span>(<span class="title function_ invoke__">date</span>(“Y-m-d <span class="attr">H</span>:<span class="attr">i</span>:s”, <span class="variable">$futuretime</span>), <span class="literal">false</span>, <span class="literal">false</span>, <span class="literal">true</span>, <span class="literal">false</span>, <span class="literal">true</span>);</span><br><span class="line">                    <span class="keyword">if</span> (<span class="variable">$timeout</span>)</span><br><span class="line">                        <span class="variable">$onmouseover_sub</span> = ” (&lt;font color=’<span class="comment">#00CC66′&gt;”.$lang_functions[‘text_will_end_in’].$timeout.”&lt;/font&gt;”.”)”; //2XFree 显示为青色，可以更改它</span></span><br><span class="line">                    <span class="keyword">else</span> <span class="variable">$promotion</span> = <span class="number">1</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">5</span>: &#123;</span><br><span class="line">                <span class="keyword">if</span> (<span class="variable">$showtimeleft</span> &amp;&amp; ((<span class="variable">$expirehalfleech_torrent</span> &amp;&amp; <span class="variable">$promotionTimeType</span> == <span class="number">0</span>) || <span class="variable">$promotionTimeType</span> == <span class="number">2</span>)) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (<span class="variable">$promotionTimeType</span> == <span class="number">2</span>) &#123;</span><br><span class="line">                        <span class="variable">$futuretime</span> = <span class="title function_ invoke__">strtotime</span>(<span class="variable">$promotionUntil</span>);</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        <span class="variable">$futuretime</span> = <span class="title function_ invoke__">strtotime</span>(<span class="variable">$added</span>) + <span class="variable">$expirehalfleech_torrent</span> * <span class="number">86400</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="variable">$timeout</span> = <span class="title function_ invoke__">gettime</span>(<span class="title function_ invoke__">date</span>(“Y-m-d <span class="attr">H</span>:<span class="attr">i</span>:s”, <span class="variable">$futuretime</span>), <span class="literal">false</span>, <span class="literal">false</span>, <span class="literal">true</span>, <span class="literal">false</span>, <span class="literal">true</span>);</span><br><span class="line">                    <span class="keyword">if</span> (<span class="variable">$timeout</span>)</span><br><span class="line">                        <span class="variable">$onmouseover_sub</span> = ” (“.<span class="variable">$lang_functions</span>[‘text_will_end_in’].<span class="variable">$timeout</span>.”)”;</span><br><span class="line">                    <span class="keyword">else</span> <span class="variable">$promotion</span> = <span class="number">1</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">6</span>:&#123;</span><br><span class="line">                <span class="keyword">if</span> (<span class="variable">$showtimeleft</span> &amp;&amp; ((<span class="variable">$expiretwouphalfleech_torrent</span> &amp;&amp; <span class="variable">$promotionTimeType</span> == <span class="number">0</span>) || <span class="variable">$promotionTimeType</span> == <span class="number">2</span>)) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (<span class="variable">$promotionTimeType</span> == <span class="number">2</span>) &#123;</span><br><span class="line">                        <span class="variable">$futuretime</span> = <span class="title function_ invoke__">strtotime</span>(<span class="variable">$promotionUntil</span>);</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        <span class="variable">$futuretime</span> = <span class="title function_ invoke__">strtotime</span>(<span class="variable">$added</span>) + <span class="variable">$expiretwouphalfleech_torrent</span> * <span class="number">86400</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="variable">$timeout</span> = <span class="title function_ invoke__">gettime</span>(<span class="title function_ invoke__">date</span>(“Y-m-d <span class="attr">H</span>:<span class="attr">i</span>:s”, <span class="variable">$futuretime</span>), <span class="literal">false</span>, <span class="literal">false</span>, <span class="literal">true</span>, <span class="literal">false</span>, <span class="literal">true</span>);</span><br><span class="line">                    <span class="keyword">if</span> (<span class="variable">$timeout</span>)</span><br><span class="line">                        <span class="variable">$onmouseover_sub</span> = ” (“.<span class="variable">$lang_functions</span>[‘text_will_end_in’].<span class="variable">$timeout</span>.”)”;</span><br><span class="line">                    <span class="keyword">else</span> <span class="variable">$promotion</span> = <span class="number">1</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">7</span>: &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="variable">$showtimeleft</span> &amp;&amp; ((<span class="variable">$expirethirtypercentleech_torrent</span> &amp;&amp; <span class="variable">$promotionTimeType</span> == <span class="number">0</span>) || <span class="variable">$promotionTimeType</span> == <span class="number">2</span>)) &#123;</span><br><span class="line">                <span class="keyword">if</span> (<span class="variable">$promotionTimeType</span> == <span class="number">2</span>) &#123;</span><br><span class="line">                    <span class="variable">$futuretime</span> = <span class="title function_ invoke__">strtotime</span>(<span class="variable">$promotionUntil</span>);</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="variable">$futuretime</span> = <span class="title function_ invoke__">strtotime</span>(<span class="variable">$added</span>) + <span class="variable">$expirethirtypercentleech_torrent</span> * <span class="number">86400</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="variable">$timeout</span> = <span class="title function_ invoke__">gettime</span>(<span class="title function_ invoke__">date</span>(“Y-m-d <span class="attr">H</span>:<span class="attr">i</span>:s”, <span class="variable">$futuretime</span>), <span class="literal">false</span>, <span class="literal">false</span>, <span class="literal">true</span>, <span class="literal">false</span>, <span class="literal">true</span>);</span><br><span class="line">                <span class="keyword">if</span> (<span class="variable">$timeout</span>)</span><br><span class="line">                    <span class="variable">$onmouseover_sub</span> = ” (“.<span class="variable">$lang_functions</span>[‘text_will_end_in’].<span class="variable">$timeout</span>.”)”;</span><br><span class="line">                <span class="keyword">else</span> <span class="variable">$promotion</span> = <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> ((<span class="variable">$CURUSER</span>[‘appendpromotion’] == ‘word’ &amp;&amp; <span class="variable">$forcemode</span> == “” ) || <span class="variable">$forcemode</span> == ‘word’)&#123;</span><br><span class="line">        <span class="keyword">if</span>((<span class="variable">$promotion</span>==<span class="number">2</span> &amp;&amp; <span class="title function_ invoke__">get_global_sp_state</span>() == <span class="number">1</span>) || <span class="title function_ invoke__">get_global_sp_state</span>() == <span class="number">2</span>)&#123;</span><br><span class="line">            <span class="variable">$sp_torrent_sub</span> = <span class="variable">$onmouseover_sub</span>;</span><br><span class="line">        &#125; <span class="keyword">elseif</span>((<span class="variable">$promotion</span>==<span class="number">3</span> &amp;&amp; <span class="title function_ invoke__">get_global_sp_state</span>() == <span class="number">1</span>) || <span class="title function_ invoke__">get_global_sp_state</span>() == <span class="number">3</span>)&#123;</span><br><span class="line">            <span class="variable">$sp_torrent_sub</span> = <span class="variable">$onmouseover_sub</span>;</span><br><span class="line">        &#125; <span class="keyword">elseif</span>((<span class="variable">$promotion</span>==<span class="number">4</span> &amp;&amp; <span class="title function_ invoke__">get_global_sp_state</span>() == <span class="number">1</span>) || <span class="title function_ invoke__">get_global_sp_state</span>() == <span class="number">4</span>)&#123;</span><br><span class="line">            <span class="variable">$sp_torrent_sub</span> = <span class="variable">$onmouseover_sub</span>;</span><br><span class="line">        &#125; <span class="keyword">elseif</span>((<span class="variable">$promotion</span>==<span class="number">5</span> &amp;&amp; <span class="title function_ invoke__">get_global_sp_state</span>() == <span class="number">1</span>) || <span class="title function_ invoke__">get_global_sp_state</span>() == <span class="number">5</span>)&#123;</span><br><span class="line">            <span class="variable">$sp_torrent_sub</span> = <span class="variable">$onmouseover_sub</span>;</span><br><span class="line">        &#125; <span class="keyword">elseif</span>((<span class="variable">$promotion</span>==<span class="number">6</span> &amp;&amp; <span class="title function_ invoke__">get_global_sp_state</span>() == <span class="number">1</span>) || <span class="title function_ invoke__">get_global_sp_state</span>() == <span class="number">6</span>)&#123;</span><br><span class="line">            <span class="variable">$sp_torrent_sub</span> = <span class="variable">$onmouseover_sub</span>;</span><br><span class="line">        &#125; <span class="keyword">elseif</span>((<span class="variable">$promotion</span>==<span class="number">7</span> &amp;&amp; <span class="title function_ invoke__">get_global_sp_state</span>() == <span class="number">1</span>) || <span class="title function_ invoke__">get_global_sp_state</span>() == <span class="number">7</span>)&#123;</span><br><span class="line">            <span class="variable">$sp_torrent_sub</span> = <span class="variable">$onmouseover_sub</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">elseif</span> ((<span class="variable">$CURUSER</span>[‘appendpromotion’] == ‘icon’ &amp;&amp; <span class="variable">$forcemode</span> == “”) || <span class="variable">$forcemode</span> == ‘icon’)&#123;</span><br><span class="line">        <span class="keyword">if</span>((<span class="variable">$promotion</span>==<span class="number">2</span> &amp;&amp; <span class="title function_ invoke__">get_global_sp_state</span>() == <span class="number">1</span>) || <span class="title function_ invoke__">get_global_sp_state</span>() == <span class="number">2</span>)</span><br><span class="line">            <span class="variable">$sp_torrent_sub</span> = <span class="variable">$onmouseover_sub</span>;</span><br><span class="line">        <span class="keyword">elseif</span>((<span class="variable">$promotion</span>==<span class="number">3</span> &amp;&amp; <span class="title function_ invoke__">get_global_sp_state</span>() == <span class="number">1</span>) || <span class="title function_ invoke__">get_global_sp_state</span>() == <span class="number">3</span>)</span><br><span class="line">            <span class="variable">$sp_torrent_sub</span> = <span class="variable">$onmouseover_sub</span>;</span><br><span class="line">        <span class="keyword">elseif</span>((<span class="variable">$promotion</span>==<span class="number">4</span> &amp;&amp; <span class="title function_ invoke__">get_global_sp_state</span>() == <span class="number">1</span>) || <span class="title function_ invoke__">get_global_sp_state</span>() == <span class="number">4</span>)</span><br><span class="line">            <span class="variable">$sp_torrent_sub</span> = <span class="variable">$onmouseover_sub</span>;</span><br><span class="line">        <span class="keyword">elseif</span>((<span class="variable">$promotion</span>==<span class="number">5</span> &amp;&amp; <span class="title function_ invoke__">get_global_sp_state</span>() == <span class="number">1</span>) || <span class="title function_ invoke__">get_global_sp_state</span>() == <span class="number">5</span>)</span><br><span class="line">            <span class="variable">$sp_torrent_sub</span> = <span class="variable">$onmouseover_sub</span>;</span><br><span class="line">        <span class="keyword">elseif</span>((<span class="variable">$promotion</span>==<span class="number">6</span> &amp;&amp; <span class="title function_ invoke__">get_global_sp_state</span>() == <span class="number">1</span>) || <span class="title function_ invoke__">get_global_sp_state</span>() == <span class="number">6</span>)</span><br><span class="line">            <span class="variable">$sp_torrent_sub</span> = <span class="variable">$onmouseover_sub</span>;</span><br><span class="line">        <span class="keyword">elseif</span>((<span class="variable">$promotion</span>==<span class="number">7</span> &amp;&amp; <span class="title function_ invoke__">get_global_sp_state</span>() == <span class="number">1</span>) || <span class="title function_ invoke__">get_global_sp_state</span>() == <span class="number">7</span>)</span><br><span class="line">            <span class="variable">$sp_torrent_sub</span> = <span class="variable">$onmouseover_sub</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable">$sp_torrent_sub</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Step2：功能调用</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$banned_torrent</span> = (<span class="variable">$row</span>[“banned”] == ‘yes’ ? ” (“.<span class="variable">$lang_functions</span>[‘text_banned’].”)” : “”);</span><br><span class="line"><span class="keyword">print</span>(<span class="variable">$banned_torrent</span>.<span class="variable">$picked_torrent</span>.<span class="variable">$sp_torrent</span>);</span><br></pre></td></tr></table></figure>

<p>两行之间擦汗如代码：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$sp_torrent_sub</span> = <span class="title function_ invoke__">get_torrent_promotion_append_sub</span>(<span class="variable">$row</span>[‘sp_state’],””,<span class="literal">true</span>,<span class="variable">$row</span>[“added”], <span class="variable">$row</span>[‘promotion_time_type’], <span class="variable">$row</span>[‘promotion_until’]); <span class="comment">// 调用新的函数，获取过期时间</span></span><br></pre></td></tr></table></figure>

<p>最后一行修改为：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">print</span>(<span class="variable">$banned_torrent</span>.<span class="variable">$picked_torrent</span>.<span class="variable">$sp_torrent</span>.<span class="variable">$sp_torrent_sub</span>); <span class="comment">// 在主标题上附加显示过期提示</span></span><br></pre></td></tr></table></figure>

<p>修改后的代码：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$banned_torrent</span> = (<span class="variable">$row</span>[“banned”] == ‘yes’ ? ” (“.<span class="variable">$lang_functions</span>[‘text_banned’].”)” : “”);</span><br><span class="line"><span class="variable">$sp_torrent_sub</span> = <span class="title function_ invoke__">get_torrent_promotion_append_sub</span>(<span class="variable">$row</span>[‘sp_state’],””,<span class="literal">true</span>,<span class="variable">$row</span>[“added”], <span class="variable">$row</span>[‘promotion_time_type’], <span class="variable">$row</span>[‘promotion_until’]);</span><br><span class="line"><span class="keyword">print</span>(<span class="variable">$banned_torrent</span>.<span class="variable">$picked_torrent</span>.<span class="variable">$sp_torrent</span>.<span class="variable">$sp_torrent_sub</span>);</span><br></pre></td></tr></table></figure>

<p><img src="/images/loading.gif" data-lazy-src="https://imgsa.baidu.com/forum/w%3D580/sign=94782ced42166d223877159c76220945/6618c40a19d8bc3e70b6adec838ba61ea9d345f7.jpg"></p>
<p><img src="/images/loading.gif" data-lazy-src="https://imgsa.baidu.com/forum/w%3D580/sign=7078dd006c224f4a5799731b39f69044/8a935dd8bc3eb135f1791c9da71ea8d3fc1f44f7.jpg"></p>
<p><img src="/images/loading.gif" data-lazy-src="https://imgsa.baidu.com/forum/w%3D580/sign=8becadec838ba61edfeec827713597cc/716d4ed162d9f2d36df58fc9a8ec8a136227cc4d.jpg"></p>
<hr>
<blockquote>
<p>参考来源：<br><a target="_blank" rel="noopener external nofollow noreferrer" href="http://tieba.baidu.com/p/2178676003">[ 百度贴吧 ]【技术转】五步打造你个性化的 Nexusphp PT 站</a></p>
</blockquote>
<hr>
<blockquote>
<p>to be continued…</p>
</blockquote>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="https://tamsiree.com">Tamsiree</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="https://tamsiree.com/TechnicalResearch/PT%E7%AB%99/NexusPhp/%E4%BD%BF%E7%94%A8NexusPhp%E6%89%93%E9%80%A0%E4%B8%AA%E6%80%A7%E5%8C%96%E7%9A%84PT%E7%AB%99/">https://tamsiree.com/TechnicalResearch/PT%E7%AB%99/NexusPhp/%E4%BD%BF%E7%94%A8NexusPhp%E6%89%93%E9%80%A0%E4%B8%AA%E6%80%A7%E5%8C%96%E7%9A%84PT%E7%AB%99/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="external nofollow noreferrer" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来源 <a href="https://tamsiree.com" target="_blank">Tamsiree</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/TechnicalResearch/">TechnicalResearch</a><a class="post-meta__tags" href="/tags/PT%E7%AB%99/">PT站</a><a class="post-meta__tags" href="/tags/NexusPhp/">NexusPhp</a></div><div class="post-share"><div class="social-share" data-image="https://cdn.jsdelivr.net/gh/Tamsiree/Assets@master/Picture/Blog/Cover/20150512112726335.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/sharejs/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button"><i class="fas fa-qrcode"></i>赞助</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="https://cdn.jsdelivr.net/gh/Tamsiree/Assets@master/Function/qrcode_wechat.jpg" rel="external nofollow noreferrer" target="_blank"><img class="post-qr-code-img" src="/images/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/Tamsiree/Assets@master/Function/qrcode_wechat.jpg" alt="微信"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="https://cdn.jsdelivr.net/gh/Tamsiree/Assets@master/Function/qrcode_alipay.jpg" rel="external nofollow noreferrer" target="_blank"><img class="post-qr-code-img" src="/images/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/Tamsiree/Assets@master/Function/qrcode_alipay.jpg" alt="支付宝"/></a><div class="post-qr-code-desc">支付宝</div></li></ul></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/TechnicalResearch/PT%E7%AB%99/PT%E7%AB%99/" title="PT 站"><img class="cover" src="/images/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/Tamsiree/Assets@master/Picture/Blog/Cover/d439b6003af33a8735fa4ebac05c10385243b5ff.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="info"><div class="info-1"><div class="info-item-1">上一篇</div><div class="info-item-2">PT 站</div></div><div class="info-2"><div class="info-item-1">前言PT（Private Tracker）是一种改良自 BitTorrent 协定的 P2P 下载方式，“Private Tracker”指私有种子服务器。与 BT 最大的不同点分别为可进行私密范围下载，及可统计每个用户的上载及下载量。 PT 站的架构NexusPHP简介根据其代码中的介绍（aboutnexus.php 页面）来看：  NexusPHP 由来自浙江大学的 Nexus 团队发起并开发完成。主要是提供一个完整的、有序的、重视用户信誉和知识的资源分享社区的解决方案，是一个 PT（Private Tracker，即私有的 Tracker 服务器，是 BT 下载的一种）开源软件。   （当然也有人和我说，这是某浙大生毕业设计作品 Orz） 虽然一遍一遍的在群里鄙视着 NexusPHP 的垃圾代码，但不得不承认就目前来看国内 PT 圈依然在大量使用 NP（这里应该不用做详细数据统计了吧 2333）。 而其他一些尝试，诸如：    Gazelle：国外著名 PT 架构，然而部署安装略麻烦，且纯英文界面。国内曾有人尝试翻译并建站，然而该主比我还不靠谱，以致于在 17 年度被人提及...</div></div></div></a><a class="pagination-related  no-desc" href="/Hardware/%E7%94%B5%E8%84%91%E8%AE%BE%E5%A4%87/" title="电脑设备"><img class="cover" src="/images/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/Tamsiree/Assets@master/Picture/Blog/Cover/958739597.jpeg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="info text-right"><div class="info-1"><div class="info-item-1">下一篇</div><div class="info-item-2">电脑设备</div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/TechnicalResearch/PT%E7%AB%99/PT%E7%AB%99/" title="PT 站"><img class="cover" src="/images/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/Tamsiree/Assets@master/Picture/Blog/Cover/d439b6003af33a8735fa4ebac05c10385243b5ff.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2020-02-06</div><div class="info-item-2">PT 站</div></div><div class="info-2"><div class="info-item-1">前言PT（Private Tracker）是一种改良自 BitTorrent 协定的 P2P 下载方式，“Private Tracker”指私有种子服务器。与 BT 最大的不同点分别为可进行私密范围下载，及可统计每个用户的上载及下载量。 PT 站的架构NexusPHP简介根据其代码中的介绍（aboutnexus.php 页面）来看：  NexusPHP 由来自浙江大学的 Nexus 团队发起并开发完成。主要是提供一个完整的、有序的、重视用户信誉和知识的资源分享社区的解决方案，是一个 PT（Private Tracker，即私有的 Tracker 服务器，是 BT 下载的一种）开源软件。   （当然也有人和我说，这是某浙大生毕业设计作品 Orz） 虽然一遍一遍的在群里鄙视着 NexusPHP 的垃圾代码，但不得不承认就目前来看国内 PT 圈依然在大量使用 NP（这里应该不用做详细数据统计了吧 2333）。 而其他一些尝试，诸如：    Gazelle：国外著名 PT 架构，然而部署安装略麻烦，且纯英文界面。国内曾有人尝试翻译并建站，然而该主比我还不靠谱，以致于在 17 年度被人提及...</div></div></div></a><a class="pagination-related" href="/TechnicalResearch/Hexo/%E7%9F%A5%E4%B9%8E%E5%8D%A1%E7%89%87%E9%93%BE%E6%8E%A5/" title="知乎卡片链接"><img class="cover" src="/images/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/Tamsiree/Assets@master/Picture/Blog/Cover/wallls.com_220521.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2020-06-07</div><div class="info-item-2">知乎卡片链接</div></div><div class="info-2"><div class="info-item-1">正文模仿知乎的卡片式链接。改自 兰州小红鸡我为了每次少写一行 js 引用略作修改。   1234567891011121314151617181920function LinkCard()&#123;	var LinkCards=document.querySelectorAll(&#x27;.LinkCard&#x27;);		if (LinkCards.length==0)&#123;		return;	&#125;else&#123;		var LinkCard=LinkCards[0];		var title=LinkCard.innerText;		var link=LinkCard.href;		LinkCard.innerHTML=&quot;&lt;style type=&#x27;text/css&#x27;&gt;.LinkCard,.LinkCard:hover&#123;text-decoration:none;border:none!important;color:inherit!important&#125;.LinkCard&#123;positio...</div></div></div></a><a class="pagination-related" href="/TechnicalResearch/TA/TA%E6%98%AF%E6%80%8E%E6%A0%B7%E7%82%BC%E6%88%90%E7%9A%84/" title="TA 是怎样炼成的"><img class="cover" src="/images/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/Tamsiree/Assets@master/Picture/Blog/Cover/636047f1c4f00dffd2d017ab20ddbb6d.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2019-12-29</div><div class="info-item-2">TA 是怎样炼成的</div></div><div class="info-2"><div class="info-item-1">前言TA 是 Technical Artist 的缩写，就是游戏行业的技术美术岗位。TA 是为项目解决问题的岗位, 它的职责是节省项目成本，缩短项目周期，提升项目效果等。也为技术与美术作为沟通桥梁，所以才有的岗位细分方向。岗位细分的大方向可分为 程序向、美术向两大方向。细分又可分为工具、渲染、流程、动作等方向。 本文是对 霜狼的视频 的总结。  目标简单来说作为一个给其它岗位解决问题的职业，我们学习的第一个目标自然是锻炼自己解决问题的能力。 这个能力是短时间内学不来的，只有经历过大量的亲身实践才能积累下来。 实际上 TA 并不是所有部分都精通，大部分人都是多精一专。每一个领域都可以成为专家，无贵贱之分。 学习框架  基础部分 美术基础《精虫叔叔设计秘密 01》[轮廓 - 轮廓长线条短线条变化]《设计入门教室系列》摄影：北京工业大学公开课：摄影的实用性与艺术性漫谈  程序基础网易公开课全套计算机专业课程，链接     学习方法：核心：深入解决问题这一中心，逐步解决你学习过程中遇到的问题进行锻炼。如：独立寻找学习资料。学会如何获取及筛选正确有用的信息。  入门阶段 渲染知识：《sha...</div></div></div></a><a class="pagination-related" href="/TechnicalResearch/%E6%A6%82%E5%BF%B5/%E5%90%8C%E6%AD%A5-%E5%BC%82%E6%AD%A5-%E4%B8%B2%E8%A1%8C-%E5%B9%B6%E8%A1%8C/" title="同步 - 异步 - 串行 - 并行"><img class="cover" src="/images/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/Tamsiree/Assets@master/Picture/Blog/Cover/whitecat.jpeg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2020-06-09</div><div class="info-item-2">同步 - 异步 - 串行 - 并行</div></div><div class="info-2"><div class="info-item-1">前言在实际开发过程中很多人会因为同步，异步，串行，并行等名词搞混，搞不清楚这些名称到底代表的是什么意思。其实这也是实际开发中必须掌握一些知识点。掌握和理解这些概念也有助于我们去更好的去开发。 正文同步 - 异步指的是能否开启新的线程。同步不能开启新的线程，异步可以。 同步：在程序中同步指的就是顺序执行，执行完一个再执行下一个，需要等待、协调运行（代码由上而下依次执行）。 异步：异步和同步是相对的，异步就是彼此独立，在等待某事件的过程中可以继续去做自己的事情，不需要等待这一事件完成后再工作。线程就是实现异步的一个方式。异步是让调用方法的主线程不需要同步等待另一线程的完成，从而可以让主线程继续干其它的事情。 异步和多线程并不是一个同等关系，异步是最终目的，多线程只是我们实现异步的一种手段。 异步是当一个调用请求发送给被调用者，而调用者不用等待其结果的返回而可以做其它的事情。 实现异步可以采用多线程技术或则交给另外的进程来处理。 串行、并行：串行和并行指的是任务的执行方式。 串行：是指多个任务时，各个任务按照顺序执行，完成一个之后才能进行下一个。 并行：指的是多个任务可以同时执行。举个...</div></div></div></a><a class="pagination-related" href="/TechnicalResearch/Hexo/Hexo%E9%97%AE%E9%A2%98%E5%BD%92%E7%BA%B3/" title="Hexo 问题归纳"><img class="cover" src="/images/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/Tamsiree/Assets@master/Picture/Blog/Cover/wallhaven-6kogj6.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2018-04-20</div><div class="info-item-2">Hexo 问题归纳</div></div><div class="info-2"><div class="info-item-1">hexo 版本更新之后，部分模块失效错误原因：    hexo 版本更新之后，部分模块会因为新特性的改动而失效  解决方案：    npm 全面更新所依赖的工具库即可  1npm update  执行命令 hexo server，提示：Usage: hexo …. 提示找不到该指令解决方法: 在 Hexo 3.0 后 server 被单独出来了，需要安装 server，安装的命令如下：   1npm install hexo-server –save    安装此 server 后再试，问题解决。 执行：hexo server，启动了服务，在浏览器输入本地地址访问，看到白板和 Cannot GET / 几个字原因是由于 2.6 以后就更新了，我们需要手动配置些东西，我们需要输入下面三行命令： 12345npm install hexo-renderer-ejs --savenpm install hexo-renderer-stylus --savenpm install hexo-renderer-marked --save  这时候重新启动本地服务在访问。或者： 在空文件夹下...</div></div></div></a><a class="pagination-related" href="/TechnicalResearch/Regex/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/" title="正则表达式"><img class="cover" src="/images/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/Tamsiree/Assets@master/Picture/Blog/Cover/t0182d7f4de282062cb.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2016-10-17</div><div class="info-item-2">正则表达式</div></div><div class="info-2"><div class="info-item-1">什么是正则表达式： 查找符合某些复杂规则的字符串。正则表达式就是用于描述这些规则的工具。换句话说，正则表达式就是记录文本规则的代码。   例：查找 hi： 1\bhi\b  \b 用于匹配一个位置，指 hi 前面或后面没有字符（匹配单词的开始或结束） 例：查找 hi 后面不远处跟着一个 Lucy： 1\bhi\b.*\bLucy\b  . 是一个元字符，用于匹配除换行符外的任意字符.* 表示任意数量的不包含换行的字符 例：0\d\d-\d\d\d\d\d\d\d\d 以 0 开头，然后两个数字，-，最后 8 个数字 （012-12345678）——&gt; 可以简写成 0\d{2}-\d{8} 例：简单的 IP 地址分配 1(\d&#123;1,3&#125;\.)&#123;3&#125;\d&#123;1,3&#125;——a.b.c.d  \d{1,3}匹配 1 到 3 位数字，. 匹配一个点（.），(\d{1,3}.){3}重复三次abcd 数值处于 0-255 1234567((2[0-4]\d|25[0-5]|[01]?\d\d?)\.)&#123;3&#125;((...</div></div></div></a></div></div><hr class="custom-hr"/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div id="waline-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/images/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/Tamsiree/Assets@master/Avatar/avatar_sky_circle.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">Tamsiree</div><div class="author-info-description">勇于尝试才有可能迈向成功</div><div class="site-data"><a href="/archives/"><div class="headline">文章</div><div class="length-num">201</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">140</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">143</div></a></div><a id="card-info-btn" target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/tamsiree"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons"><a class="social-icon" href="https://github.com/Tamsiree" rel="external nofollow noreferrer" target="_blank" title="Github"><i class="fab fa-github-square"></i></a><a class="social-icon" href="mailto:tamsiree.com@gmail.com" rel="external nofollow noreferrer" target="_blank" title="Email"><i class="fas fa-envelope-square"></i></a><a class="social-icon" href="/atom.xml" target="_blank" title="RSS"><i class="fas fa-rss-square"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">只有用心灵才能看得清事物的本质，真正重要的东西是肉眼无法看见的。</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%89%8D%E8%A8%80"><span class="toc-number">1.</span> <span class="toc-text">前言</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%AD%A3%E6%96%87"><span class="toc-number">2.</span> <span class="toc-text">正文</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%BA%E7%94%A8%E6%88%B7%E7%AD%89%E7%BA%A7%E8%BF%BD%E5%8A%A0%E6%A0%87%E8%AF%86"><span class="toc-number">2.1.</span> <span class="toc-text">为用户等级追加标识</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%B3%E9%97%AD%E6%90%9C%E7%B4%A2%E7%AE%B1"><span class="toc-number">2.2.</span> <span class="toc-text">关闭搜索箱</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A2%9E%E5%8A%A0%E7%A7%8D%E5%AD%90%E7%B1%BB%E5%88%AB%E5%BF%AB%E9%80%9F%E6%90%9C%E7%B4%A2%E5%8A%9F%E8%83%BD"><span class="toc-number">2.3.</span> <span class="toc-text">增加种子类别快速搜索功能</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%94%B9%E5%8F%98%E7%BD%AE%E9%A1%B6%E7%A7%8D%E5%AD%90%E6%A0%BC%E5%AD%90%E9%A2%9C%E8%89%B2"><span class="toc-number">2.4.</span> <span class="toc-text">改变置顶种子格子颜色</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9C%A8%E7%A7%8D%E5%AD%90%E4%B8%BB%E9%A2%98%E4%B8%8A%E9%99%84%E5%8A%A0%E4%BF%83%E9%94%80%E7%A7%8D%E5%AD%90%E8%BF%87%E6%9C%9F%E6%97%B6%E9%97%B4%E6%8F%90%E7%A4%BA"><span class="toc-number">2.5.</span> <span class="toc-text">在种子主题上附加促销种子过期时间提示</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/%E9%9A%8F%E6%89%8B%E8%AE%B0/Hexo%E4%B8%ADWaline%E6%95%85%E9%9A%9C%E4%BF%AE%E5%A4%8D%E6%8C%87%E5%8D%97/" title="Hexo 中 Waline 故障修复指南"><img src="/images/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/Tamsiree/Assets@master/DeskTop/Konachan.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Hexo 中 Waline 故障修复指南"/></a><div class="content"><a class="title" href="/%E9%9A%8F%E6%89%8B%E8%AE%B0/Hexo%E4%B8%ADWaline%E6%95%85%E9%9A%9C%E4%BF%AE%E5%A4%8D%E6%8C%87%E5%8D%97/" title="Hexo 中 Waline 故障修复指南">Hexo 中 Waline 故障修复指南</a><time datetime="2026-02-05T07:25:41.000Z" title="发表于 2026-02-05 15:25:41">2026-02-05</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/%E6%B8%B8%E6%88%8F/%E7%8B%AC%E7%AB%8B%E6%B8%B8%E6%88%8F/%E7%8B%AC%E7%AB%8B%E6%B8%B8%E6%88%8F%E7%9A%84%E6%88%90%E5%8A%9F%E4%B9%8B%E6%AF%8D/" title="独立游戏的成功之母"><img src="/images/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/Tamsiree/Assets@master/Picture/Blog/Cover/552b1999aa4d5a2e75352fa2f6e93d51.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="独立游戏的成功之母"/></a><div class="content"><a class="title" href="/%E6%B8%B8%E6%88%8F/%E7%8B%AC%E7%AB%8B%E6%B8%B8%E6%88%8F/%E7%8B%AC%E7%AB%8B%E6%B8%B8%E6%88%8F%E7%9A%84%E6%88%90%E5%8A%9F%E4%B9%8B%E6%AF%8D/" title="独立游戏的成功之母">独立游戏的成功之母</a><time datetime="2025-11-11T05:08:38.000Z" title="发表于 2025-11-11 13:08:38">2025-11-11</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/Docker/MongoDB/Docker%E4%B8%ADMongoDB%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E5%A4%87%E4%BB%BD%E4%B8%8E%E6%81%A2%E5%A4%8D/" title="Docker 中 MongoDB 数据库的备份与恢复"><img src="/images/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/Tamsiree/Assets@master/Picture/Blog/Cover/cdd893c83169033d6b4a8354f1ab9d37.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Docker 中 MongoDB 数据库的备份与恢复"/></a><div class="content"><a class="title" href="/Docker/MongoDB/Docker%E4%B8%ADMongoDB%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E5%A4%87%E4%BB%BD%E4%B8%8E%E6%81%A2%E5%A4%8D/" title="Docker 中 MongoDB 数据库的备份与恢复">Docker 中 MongoDB 数据库的备份与恢复</a><time datetime="2025-11-06T00:49:58.000Z" title="发表于 2025-11-06 08:49:58">2025-11-06</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/%E9%9A%8F%E6%89%8B%E8%AE%B0/Unity%E5%A4%9A%E7%BA%BF%E7%A8%8B%E6%B8%B2%E6%9F%93%E5%AF%BC%E8%87%B4%E9%83%A8%E5%88%86%E6%89%8B%E6%9C%BA%E5%B4%A9%E6%BA%83/" title="Unity 多线程渲染导致部分手机崩溃"><img src="/images/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/Tamsiree/Assets@master/Picture/Blog/Cover/9408053447.jpeg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Unity 多线程渲染导致部分手机崩溃"/></a><div class="content"><a class="title" href="/%E9%9A%8F%E6%89%8B%E8%AE%B0/Unity%E5%A4%9A%E7%BA%BF%E7%A8%8B%E6%B8%B2%E6%9F%93%E5%AF%BC%E8%87%B4%E9%83%A8%E5%88%86%E6%89%8B%E6%9C%BA%E5%B4%A9%E6%BA%83/" title="Unity 多线程渲染导致部分手机崩溃">Unity 多线程渲染导致部分手机崩溃</a><time datetime="2023-11-09T11:55:51.000Z" title="发表于 2023-11-09 19:55:51">2023-11-09</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/%E9%9A%8F%E6%89%8B%E8%AE%B0/%E5%A5%BD%E7%94%A8%E7%9A%84CDN%E4%B9%8BjsDelivr/" title="好用的 CDN 之 jsDelivr"><img src="/images/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/Tamsiree/Assets@master/DeskTop/20b24a69649941669d83bb997b01fed6.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="好用的 CDN 之 jsDelivr"/></a><div class="content"><a class="title" href="/%E9%9A%8F%E6%89%8B%E8%AE%B0/%E5%A5%BD%E7%94%A8%E7%9A%84CDN%E4%B9%8BjsDelivr/" title="好用的 CDN 之 jsDelivr">好用的 CDN 之 jsDelivr</a><time datetime="2023-10-16T07:00:56.000Z" title="发表于 2023-10-16 15:00:56">2023-10-16</time></div></div></div></div></div></div></main><footer id="footer"><div class="footer-other"><div class="footer-copyright"><span class="copyright">&copy;&nbsp;2016 - 2026 By Tamsiree</span></div><div class="footer_custom_text">不要盯着我看，已经到底啦～</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">简</button><button id="darkmode" type="button" title="日间和夜间模式切换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="前往评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=5.5.3"></script><script src="/js/main.js?v=5.5.3"></script><script src="/js/tw_cn.js?v=5.5.3"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@6.1.7/dist/fancybox/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload@19.1.3/dist/lazyload.iife.min.js"></script><div class="js-pjax"><script>(() => {
  let initFn = window.walineFn || null
  const isShuoshuo = GLOBAL_CONFIG_SITE.pageType === 'shuoshuo'
  const option = {"placeholder":"留下你的脚印与心声~","pageSize":10,"lang":"zh-CN","requiredFields":["nick"],"avatar":"wavatar"}

  const destroyWaline = ele => ele.destroy()

  const initWaline = (Fn, el = document, path = window.location.pathname) => {
    const waline = Fn({
      el: el.querySelector('#waline-wrap'),
      serverURL: 'https://comment.tamsiree.com',
      pageview: false,
      dark: 'html[data-theme="dark"]',
      comment: false,
      ...option,
      path: isShuoshuo ? path : (option && option.path) || path
    })

    if (isShuoshuo) {
      window.shuoshuoComment.destroyWaline = () => {
        destroyWaline(waline)
        if (el.children.length) {
          el.innerHTML = ''
          el.classList.add('no-comment')
        }
      }
    }
  }

  const loadWaline = (el, path) => {
    if (initFn) initWaline(initFn, el, path)
    else {
      btf.getCSS('https://cdn.jsdelivr.net/npm/@waline/client@3.8.0/dist/waline.min.css')
        .then(() => import('https://cdn.jsdelivr.net/npm/@waline/client@3.8.0/dist/waline.min.js'))
        .then(({ init }) => {
          initFn = init || Waline.init
          initWaline(initFn, el, path)
          window.walineFn = initFn
        })
    }
  }

  if (isShuoshuo) {
    'Waline' === 'Waline'
      ? window.shuoshuoComment = { loadComment: loadWaline } 
      : window.loadOtherComment = loadWaline
    return
  }

  if ('Waline' === 'Waline' || !true) {
    if (true) btf.loadComment(document.getElementById('waline-wrap'),loadWaline)
    else setTimeout(loadWaline, 0)
  } else {
    window.loadOtherComment = loadWaline
  }
})()</script></div><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8688374801147098" crossorigin="anonymous"></script><script defer="defer" id="fluttering_ribbon" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/dist/canvas-fluttering-ribbon.min.js"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><i class="fas fa-spinner fa-pulse" id="loading-status" hidden="hidden"></i><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="text-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据加载中</span></div><div class="local-search-input"><input placeholder="搜索文章" type="text"/></div><hr/><div id="local-search-results"></div><div class="ais-Pagination" id="local-search-pagination" style="display:none;"><ul class="ais-Pagination-list"></ul></div><div id="local-search-stats"></div></div><div id="search-mask"></div><script src="/js/search/local-search.js?v=5.5.3"></script></div></div></body></html>