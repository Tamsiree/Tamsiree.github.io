<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>Docker 镜像搭建操作系统 | Tamsiree</title><meta name="author" content="Tamsiree,tamsiree.com@gmail.com"><meta name="copyright" content="Tamsiree"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="我一直都很喜欢思考怎样管理装在自己电脑上的桌面系统，近些年来，Docker由于提供了一套非常方便地创建并运行应用容器的方法，而在全球掀起了一股容器化的热潮。容器通过将软件及其所需要的运行环境一同打包带走，从而将人们从依赖的苦海中拯救出来。虽然Docker设计的初衷并不是操作系统容器，更不是一个直接运行在裸机上的操作系统，但是docker这套强大的工具也会给我们管理操作系统带来巨大的便利。">
<meta property="og:type" content="article">
<meta property="og:title" content="Docker 镜像搭建操作系统">
<meta property="og:url" content="https://tamsiree.com/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/Docker/Docker%E9%95%9C%E5%83%8F%E6%90%AD%E5%BB%BA%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/index.html">
<meta property="og:site_name" content="Tamsiree">
<meta property="og:description" content="我一直都很喜欢思考怎样管理装在自己电脑上的桌面系统，近些年来，Docker由于提供了一套非常方便地创建并运行应用容器的方法，而在全球掀起了一股容器化的热潮。容器通过将软件及其所需要的运行环境一同打包带走，从而将人们从依赖的苦海中拯救出来。虽然Docker设计的初衷并不是操作系统容器，更不是一个直接运行在裸机上的操作系统，但是docker这套强大的工具也会给我们管理操作系统带来巨大的便利。">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/Tamsiree/Assets@master/Picture/Blog/Cover/bgghjfdghjhgfdae6c862.jpg">
<meta property="article:published_time" content="2020-03-18T14:11:04.000Z">
<meta property="article:modified_time" content="2025-11-05T13:53:39.350Z">
<meta property="article:author" content="Tamsiree">
<meta property="article:tag" content="Docker">
<meta property="article:tag" content="开发工具">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/Tamsiree/Assets@master/Picture/Blog/Cover/bgghjfdghjhgfdae6c862.jpg"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Docker 镜像搭建操作系统",
  "url": "https://tamsiree.com/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/Docker/Docker%E9%95%9C%E5%83%8F%E6%90%AD%E5%BB%BA%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/",
  "image": "https://cdn.jsdelivr.net/gh/Tamsiree/Assets@master/Picture/Blog/Cover/bgghjfdghjhgfdae6c862.jpg",
  "datePublished": "2020-03-18T14:11:04.000Z",
  "dateModified": "2025-11-05T13:53:39.350Z",
  "author": [
    {
      "@type": "Person",
      "name": "Tamsiree",
      "url": "https://tamsiree.com"
    }
  ]
}</script><link rel="shortcut icon" href="https://cdn.jsdelivr.net/gh/Tamsiree/Assets@master/Avatar/avatar_sky_circle.png"><link rel="canonical" href="https://tamsiree.com/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/Docker/Docker%E9%95%9C%E5%83%8F%E6%90%AD%E5%BB%BA%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//fonts.googleapis.com" crossorigin=""/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="manifest" href="/manifest.json"/><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"/><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"/><link rel="stylesheet" href="/css/index.css?v=5.5.3"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@7.1.0/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@6.1.7/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!true && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          const mediaQueryDark = window.matchMedia('(prefers-color-scheme: dark)')
          const mediaQueryLight = window.matchMedia('(prefers-color-scheme: light)')

          if (theme === undefined) {
            if (mediaQueryLight.matches) activateLightMode()
            else if (mediaQueryDark.matches) activateDarkMode()
            else {
              const hour = new Date().getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            mediaQueryDark.addEventListener('change', () => {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else {
            theme === 'light' ? activateLightMode() : activateDarkMode()
          }
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script async="async" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script>(adsbygoogle = window.adsbygoogle || []).push({
  google_ad_client: 'ca-pub-8688374801147098',
  enable_page_level_ads: 'true'
});</script><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web&amp;display=swap" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"top_n_per_article":1,"unescape":false,"pagination":{"enable":false,"hitsPerPage":8},"languages":{"hits_empty":"未找到符合您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简"},
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":false},
  copy: {
    success: '复制成功',
    error: '复制失败',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"limitCount":50,"languages":{"author":"作者: Tamsiree","link":"链接: ","source":"来源: Tamsiree","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  lightbox: 'fancybox',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.12.0/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: true,
  islazyloadPlugin: true,
  isAnchor: true,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Docker 镜像搭建操作系统',
  isHighlightShrink: false,
  isToc: true,
  pageType: 'post'
}</script><meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests"><script>if (window.location.protocol !== 'https:' && window.location.hostname !== 'localhost' && window.location.hostname !== '127.0.0.1') { window.location.href = window.location.href.replace('http:', 'https:'); }</script><meta name="generator" content="Hexo 8.1.1"><link rel="alternate" href="/atom.xml" title="Tamsiree" type="application/atom+xml">
</head><body><div class="bg-animation" id="web_bg" style="background-color: #f0f0f0;"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="/images/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/Tamsiree/Assets@master/Avatar/avatar_sky_circle.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">200</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">140</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">143</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-keyboard"></i><span> 目录</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-torah"></i><span> 时间轴</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-leaf"></i><span> 风向标</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-dragon"></i><span> 寻龙尺</span></a></li></ul></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-icons"></i><span> 回味</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li><li><a class="site-page child" href="/gallery/"><i class="fa-fw fas fa-camera-retro"></i><span> 画廊</span></a></li><li><a class="site-page child" href="/book/"><i class="fa-fw fas fa-book"></i><span> 书屋</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 神秘链接</span></a></div><div class="menus_item"><a class="site-page" href="/messageboard/"><i class="fa-fw fas fa-clipboard-list"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-id-badge"></i><span> 关于</span></a></div><div class="menus_item"><a class="site-page" href="/night_sky/"><i class="fa-fw fas fa-magic"></i><span> 冥想空间</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(https://cdn.jsdelivr.net/gh/Tamsiree/Assets@master/Picture/Blog/Cover/bgghjfdghjhgfdae6c862.jpg);"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">Tamsiree</span></a><a class="nav-page-title" href="/"><span class="site-name">Docker 镜像搭建操作系统</span><span class="site-name"><i class="fa-solid fa-circle-arrow-left"></i><span>  返回首页</span></span></a></span><div id="menus"><div id="search-button"><span class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></span></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-keyboard"></i><span> 目录</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-torah"></i><span> 时间轴</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-leaf"></i><span> 风向标</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-dragon"></i><span> 寻龙尺</span></a></li></ul></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-icons"></i><span> 回味</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li><li><a class="site-page child" href="/gallery/"><i class="fa-fw fas fa-camera-retro"></i><span> 画廊</span></a></li><li><a class="site-page child" href="/book/"><i class="fa-fw fas fa-book"></i><span> 书屋</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 神秘链接</span></a></div><div class="menus_item"><a class="site-page" href="/messageboard/"><i class="fa-fw fas fa-clipboard-list"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-id-badge"></i><span> 关于</span></a></div><div class="menus_item"><a class="site-page" href="/night_sky/"><i class="fa-fw fas fa-magic"></i><span> 冥想空间</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">Docker 镜像搭建操作系统</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2020-03-18T14:11:04.000Z" title="发表于 2020-03-18 22:11:04">2020-03-18</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2025-11-05T13:53:39.350Z" title="更新于 2025-11-05 21:53:39">2025-11-05</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/">开发工具</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/Docker/">Docker</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">总字数:</span><span class="word-count">4.5k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>15分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">浏览量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>我一直都很喜欢思考怎样管理装在自己电脑上的桌面系统，近些年来，Docker 由于提供了一套非常方便地创建并运行应用容器的方法，而在全球掀起了一股容器化的热潮。容器通过将软件及其所需要的运行环境一同打包带走，从而将人们从依赖的苦海中拯救出来。虽然 Docker 设计的初衷并不是操作系统容器，更不是一个直接运行在裸机上的操作系统，但是 docker 这套强大的工具也会给我们管理操作系统带来巨大的便利。</p>
<h1 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h1><p>为什么要用 Docker 镜像当作桌面系统？这就要从普通桌面系统的不方便之处说起。通常我们都拥有不止一台电脑，我们希望这些电脑能够保持一致。这里所说的“一致”，用一个例子来讲，就是我在一台电脑上编辑了一半的文件，不需要认为拷贝到另一台电脑上，而是直接打开电脑就能编辑。如果这个文件只是一个纯文本文件，或者一个 Microsoft Word 文档，那么实现这个一致性非常简单：把文件扔到 Dropbox 之类的云同步盘就好。然而对于专业用户来讲，这种一致性的保持并非单纯的扔到 Dropbox 里面那么简单：比如说你最近忙于一个项目，这个项目要用到若干编程语言，然后在电脑里装了一堆库，一堆工具软件，有图形界面的，也有命令行的。在工作的过程中，你有可能不断安装新的工具，或者决定弃用某个之前计划使用的库或者工具。要让你的工作在你的若干台电脑上都能工作，就要一直维护不同机器的环境的一致性：在一台机器上安装的工具，要在所有机器上重新安装一遍。在一台机器上升级了的库，要在所有机器上都升级，稍微有所差池，就有可能出现某个脚本 / 程序在一台机器上跑的好好的，在另一台机器上却无法运行的问题。</p>
<h1 id="docker-哲学-“docker-哲学”-docker-哲学"><a href="#docker-哲学-“docker-哲学”-docker-哲学" class="headerlink" title="[](#docker 哲学 “docker 哲学”)docker 哲学"></a>[](#docker 哲学 “docker 哲学”)docker 哲学</h1><p>不熟悉 docker 的读者可以戳 <a target="_blank" rel="noopener external nofollow noreferrer" href="https://docs.docker.com/get-started/">这里</a> 来了解 docker。Docker 的使用非常简单：我们通过写一个 Dockerfile，在 Dockerfile 中写入相应的命令来安装以及配置我们想要的库跟工具。不熟悉 docker 的读者可以看一下下面这个<a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/kstaken/dockerfile-examples/blob/master/nodejs/Dockerfile">抄来的 Dockerfile 的例子</a>，来了解一下 Dockerfile 长啥样子：</p>
<figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">FROM</span> ubuntu  </span><br><span class="line"><span class="keyword">MAINTAINER</span> Kimbro Staken  </span><br><span class="line">  </span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> apt-get install -y software-properties-common python  </span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> add-apt-repository ppa:chris-lea/node.js  </span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> <span class="built_in">echo</span> <span class="string">&quot;deb http://us.archive.ubuntu.com/ubuntu/ precise universe&quot;</span> &gt;&gt; /etc/apt/sources.list  </span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> apt-get update  </span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> apt-get install -y nodejs  </span></span><br><span class="line"><span class="comment">#RUN apt-get install -y nodejs=0.6.12~dfsg1-1ubuntu1  </span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> <span class="built_in">mkdir</span> /var/www  </span></span><br><span class="line">  </span><br><span class="line"><span class="keyword">ADD</span><span class="language-bash"> app.js /var/www/app.js  </span></span><br><span class="line">  </span><br><span class="line"><span class="keyword">CMD</span><span class="language-bash"> \[<span class="string">&quot;/usr/bin/node&quot;</span>, <span class="string">&quot;/var/www/app.js&quot;</span>\]  </span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>有了 Dockerfile，只需要 <code>docker build</code> 一条命令就可以创建一个 docker 镜像。同时 Docker 公司提供一个叫做 DockerHub 的服务，可以免费托管公开镜像。只需要使用 <code>docker push</code> 就可以直接把镜像上传到 DockerHub。在不同的电脑上只需要 <code>docker pull</code> 就可以从 DockerHub 获取最新版的镜像。DockerHub 还支持自动构建，通过把 DockerHub 帐号跟 GitHub 帐号关联起来，就可以让 DockerHub 在 GitHub 上面的 Dockerfile 出现更改的时候自动重新生成镜像。</p>
<p>本文开头所说的这种一致性的维护，docker 实际上已经在给我们提供答案了：我们通过构建一个 docker 镜像，让这个镜像包含着我们项目所需要的所有的一切。这样的话，我们开发，测试，部署等等一切任务，都可以在先用 <code>docker run</code> 来开启一个容器，然后在容里面进行所有的工作。当我们决定修改运行环境，比如引入新的库的时候，就在 Dockerfile 中进行相应的修改，重新生成镜像，然后在不同的机器上用 <code>docker pull</code> 来更新一下就好。这种使用哲学，通过一个中心化了的仓库，非常优雅地解决了不同机器上环境一致的问题。美中不足的是，并不是所有的程序都能在容器里运行的，也并不是所有的程序都方便在容器里运行的。如果你用到了图形界面的程序，或者说是一些系统级别的程序，那么在容器里面使用这些程序会麻烦很多，有的甚至根本无法实现。于是自然地就会想到，如果我们能够在每次开机的时候，直接把某个 docker 生成的镜像挂载起来当根目录来使用，就可以让这个镜像直接在裸机上（而不是在容器中）运行，来做我们的日常桌面系统了。</p>
<p>这种做法，除了在保持一致性方面带来的便利以外，还有一些其他的好处：</p>
<ul>
<li>  整个系统保存在云端，本地的内容仅仅是云端的一份缓存而已，这样就完全没有必要定期对系统进行备份了。</li>
<li>  你的系统是如何从零开始一步一步配置成你想要的样子的，所有的一切都清晰地展现在 Dockerfile 里面。Dockerfile 就是你最好的笔记。</li>
<li>  完全不用担心系统长时间使用产生一些残余的垃圾文件、或者某些系统中某些程序的数据出现损坏，因为每次开机，我们用的都是一个全新的系统。</li>
<li>  要装一台新机器，并不需要从头安装操作系统，只要从 DockerHub 拉取镜像拿来用就好，安装系统这个过程变得极其方便。</li>
<li>  系统更新的过程实际上就是根据 Dockerfile 从最新的软件仓库重新从头安装生成 docker 镜像的过程，不会出现某些更新遇到文件冲突或者依赖无法处理，需要人为干预才能完成的问题。</li>
</ul>
<h1 id="docker-存储驱动的工作原理-“docker-存储驱动的工作原理”-docker-存储驱动的工作原理"><a href="#docker-存储驱动的工作原理-“docker-存储驱动的工作原理”-docker-存储驱动的工作原理" class="headerlink" title="[](#docker 存储驱动的工作原理 “docker 存储驱动的工作原理”)docker 存储驱动的工作原理"></a>[](#docker 存储驱动的工作原理 “docker 存储驱动的工作原理”)docker 存储驱动的工作原理</h1><p>Docker 的存储驱动 <a target="_blank" rel="noopener external nofollow noreferrer" href="https://docs.docker.com/engine/userguide/storagedriver/imagesandcontainers/">官方有介绍其工作原理</a>，这里只是简单概括一下。Docker 使用了层的概念，docker 在构建镜像的时候，会逐行执行我们的 Dockerfile 中的每一行，每执行一行的时候，docker 就会创建出一个新的层来存放新的内容。当我们执行 <code>docker pull</code> 或者 <code>docker push</code> 的时候，docker 实际上传跟下载的是这些层之间的增量。每当执行 <code>docker run</code>，docker 就会把这些下载下来的层组合到一起，组合成一个完整的镜像，然后新建一个读写层，所有运行过程中的写入都会被写入到读写层中，而镜像本身则是保持只读，不会被更改。“层” 这个概念具体实现起来，根据 docker 目录（通常为 <code>/var/lib/docker</code> 这个目录）所在的文件系统的不同而不同，具体的实现在 docker 中被称为 graph driver，docker 自带的 graph driver 包括 aufs、 overlay、btrfs、zfs、devicemapper 等。这些 graph driver 大多使用了写时复制的技术，这样在把各个层组合在一起的过程不需要重新拷贝一份数据，实际的拷贝是在写入的时候发生的。</p>
<p>由于笔者使用的是 btrfs，所以本文就以 btrfs 为例子来介绍怎么让系统启动到 docker 镜像上去。btrfs 是一个写时复制的系统，由于 docker 的镜像是由一个一个的层叠在一起组成的，docker 在使用 btrfs 的时候，每往上叠一层，docker 就会创建一个原来层的快照，然后把新层的内容写到快照里面去。然后 docker 会在从镜像创建容器的时候，给镜像的最顶层做个快照，把这个快照当作容器读写层来用。</p>
<h1 id="启动到-docker-镜像中去-“启动到-docker-镜像中去”-启动到-docker-镜像中去"><a href="#启动到-docker-镜像中去-“启动到-docker-镜像中去”-启动到-docker-镜像中去" class="headerlink" title="[](# 启动到 docker 镜像中去 “启动到 docker 镜像中去”)启动到 docker 镜像中去"></a>[](# 启动到 docker 镜像中去 “启动到 docker 镜像中去”)启动到 docker 镜像中去</h1><p>明白了 docker 存储驱动的工作原理，还需要知道 Linux 的启动过程才能达成我们的目标。Linux 在启动的时候，一般会让启动器给内核装载一个内存盘 initramfs，然后内核完成简单的早期初始化以后，就会解压内存盘的内容到根目录 <code>/</code>，然后启动内存盘中的 init 程序（一般为 <code>/init</code>），这个 init 程序会进行进一步的初始化（比如说加载文件系统的驱动，对文件系统进行 fsck 等），这一步初始化完成了以后，这个 init 程序就会根据内核选项中的 <code>root</code>、<code>rootflags</code> 等内容挂载真正的根目录，然后通过 <code>switch_root</code> 程序启动真正根目录中的 init 程序，这个 init 程序则会完成最后的初始化工作，比如挂载 fstab、加载图形界面等等。很多发行版都提供制作 initramfs 的工具，比如 archlinux 的 mkinitcpio，这些工具通常都是模块化的，允许用户自己添加 hook。</p>
<p>让系统启动到 docker 镜像所需要的知识已经完备了。思路也清晰了：通过给 initramfs 中添加 hook，让 initramfs 中的 init 在挂载 root 之前从 docker 本地缓存中的镜像中创建出一个快照作为读写层，然后把这个读写层当作真正的 root 来挂载。具体操作上，在启动管理器里面写启动项的内核选项的时候，<code>root</code> 就写 <code>/var/lib/docker</code> 所在的分区，而 <code>rootflags</code> 里面至少要有一项 <code>subvol=XXXXX</code>，其中 XXXXX 是我们打算创建的读写层的位置。然后重中之重则是，写一个 hook，这个 hook 干的事情是：找到想要的 docker 镜像对应的 btrfs 子卷，给这个子卷创建一个快照，命名为 XXXXX（跟内核选项中的名字保持一致）。这样的话，在 Linux 把控制权交给 initramfs 中的 init 程序以后，init 程序会先去从 docker 缓存中的子卷创造出 XXXXX 快照，然后把 XXXXX 快照当作 root 来挂载以及进行接下来的操作。如果读者跟笔者一样使用 Arch Linux 的话，那么所有的这些工作笔者已经做了，读者可以直接拿来用。</p>
<p>笔者的源码位于 GitHub： <a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/zasdfgbnm/mkinitcpio-docker-hooks">https://github.com/zasdfgbnm/mkinitcpio-docker-hooks</a> ，同时读者也可以直接从 AUR 中搜索 <code>mkinitcpio-docker-hooks</code> 来安装笔者的 hook。下面就来介绍一下这个 hook 的使用方法。</p>
<h1 id="mkinitcpio-docker-hooks-的使用-“mkinitcpio-docker-hooks-的使用”-mkinitcpio-docker-hooks-的使用"><a href="#mkinitcpio-docker-hooks-的使用-“mkinitcpio-docker-hooks-的使用”-mkinitcpio-docker-hooks-的使用" class="headerlink" title="[](#mkinitcpio-docker-hooks 的使用 “mkinitcpio-docker-hooks 的使用”)mkinitcpio-docker-hooks 的使用"></a>[](#mkinitcpio-docker-hooks 的使用 “mkinitcpio-docker-hooks 的使用”)mkinitcpio-docker-hooks 的使用</h1><p>mkinitcpio-docker-hooks 的使用流程大概分为如下几步：</p>
<ol>
<li> 确保你的 <code>/var/lib/docker</code> 位于某个 btrfs 分区中</li>
<li> 准备一个适合在裸机上启动的 docker 镜像</li>
<li> 然后在这个镜像中安装并配置 mkinitcpio-docker-hooks</li>
<li> 准备内核跟 initramfs</li>
<li> 准备 top layer 的内容</li>
<li> 设置启动管理器</li>
</ol>
<h2 id="docker-镜像的准备-“docker-镜像的准备”-docker-镜像的准备"><a href="#docker-镜像的准备-“docker-镜像的准备”-docker-镜像的准备" class="headerlink" title="[](#docker 镜像的准备 “docker 镜像的准备”)docker 镜像的准备"></a>[](#docker 镜像的准备 “docker 镜像的准备”)docker 镜像的准备</h2><p>要想启动到 docker 镜像中去，首先你得有一个适合在裸机上启动的 docker 镜像。很多 docker 镜像，为了减小镜像的大小，是不会附带只有裸机上才能用到的软件包（比如 <code>dhcpcd</code>）的，所以读者可能需要在 Dockerfile 中手动安装这些软件包，对于 Arch Linux 来讲，只需要安装 base 组就可以了。由于接下来要安装 <code>mkinitcpio-docker-hooks</code>，这里推荐使用一个已经内置 yaourt 的镜像，笔者使用的是自己的 archlinux-yaourt 镜像<a target="_blank" rel="noopener external nofollow noreferrer" href="https://cloud.docker.com/swarm/zasdfgbnm/repository/docker/zasdfgbnm/archlinux-yaourt/general">zasdfgbnm/archlinux-yaourt</a>。所以，Dockerfile 的开头看起来是这个样子的：</p>
<figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">FROM</span> zasdfgbnm/archlinux-yaourt  </span><br><span class="line"><span class="keyword">USER</span> root  </span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> pacman -Syu --noconfirm base  </span></span><br></pre></td></tr></table></figure>

<p>作为示例，这里就不安装 base 之外的其他软件了，读者请自己根据需要安装其他软件。</p>
<h2 id="安装并配置-mkinitcpio-docker-hooks-“安装并配置-mkinitcpio-docker-hooks”-安装并配置-mkinitcpio-docker-hooks"><a href="#安装并配置-mkinitcpio-docker-hooks-“安装并配置-mkinitcpio-docker-hooks”-安装并配置-mkinitcpio-docker-hooks" class="headerlink" title="[](# 安装并配置 mkinitcpio-docker-hooks “安装并配置 mkinitcpio-docker-hooks”)安装并配置 mkinitcpio-docker-hooks"></a>[](# 安装并配置 mkinitcpio-docker-hooks “安装并配置 mkinitcpio-docker-hooks”)安装并配置 mkinitcpio-docker-hooks</h2><p><code>mkinitcpio-docker-hooks</code> 的安装是在 docker 里面而不是当前运行在裸机上的系统中进行的。之所以要把这个软件包安装在 docker 镜像里面，很重要的原因是因为 Linux 内核不提供 ABI 的稳定性，所以内核模块跟内核的版本必须严格对应，不然模块是无法加载的。为了保持这种一致性，我们采取的措施是，在 docker 里面安装 <code>mkinitcpio-docker-hooks</code>，在 docker 中生成 initramfs，并且在启动的时候用镜像里面的内核启动，就可以确保内核、initramfs 中的模块、启动到镜像以后的 <code>/lib/modules</code> 三者保持一致。安装过程在 Dockerfile 中的写法如下：</p>
<figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">RUN</span><span class="language-bash"> <span class="built_in">sudo</span> -u user yaourt -S --noconfirm mkinitcpio-docker-hooks  </span></span><br></pre></td></tr></table></figure>

<p>安装完了 <code>mkinitcpio-docker-hooks</code> 以后还需要配置，配置文件在 <code>/etc/docker-btrfs.json</code>，初始内容如下：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span>  </span><br><span class="line"> <span class="attr">&quot;docker\_image&quot;</span><span class="punctuation">:</span> <span class="string">&quot;archlinux/base&quot;</span><span class="punctuation">,</span>  </span><br><span class="line"> <span class="attr">&quot;docker\_tag&quot;</span><span class="punctuation">:</span> <span class="string">&quot;latest&quot;</span>  </span><br><span class="line"><span class="punctuation">&#125;</span>  </span><br></pre></td></tr></table></figure>

<p>我们需要做的就是把这两个变量的值替换为我们想要的值，比如说这里我打算把我的 docker 镜像的名字叫做“sample_image”。同时，我们还需要在 <code>/etc/mkinitcpio.conf</code> 中添加 <code>docker-btrfs</code> 这个 hook。<br>综上，可以在 Dockerfile 中使用如下命令来配置：</p>
<figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">RUN</span><span class="language-bash"> sed -i <span class="string">&#x27;s/archlinux\\/base/sample\_image/g&#x27;</span> /etc/docker-btrfs.json  </span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> perl -i -p -e <span class="string">&#x27;s/(?&lt;=^HOOKS=\\()(.\*)(?=\\))/$1 docker-btrfs/g&#x27;</span> /etc/mkinitcpio.conf  </span></span><br></pre></td></tr></table></figure>

<p>现在，我们有了一个完整的示例 Dockerfile 了：</p>
<figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">FROM</span> zasdfgbnm/archlinux-yaourt  </span><br><span class="line"><span class="keyword">USER</span> root  </span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> pacman -Syu --noconfirm base  </span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> <span class="built_in">sudo</span> -u user yaourt -S --noconfirm mkinitcpio-docker-hooks  </span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> sed -i <span class="string">&#x27;s/archlinux\\/base/sample\_image/g&#x27;</span> /etc/docker-btrfs.json  </span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> perl -i -p -e <span class="string">&#x27;s/(?&lt;=^HOOKS=\\()(.\*)(?=\\))/$1 docker-btrfs/g&#x27;</span> /etc/mkinitcpio.conf  </span></span><br></pre></td></tr></table></figure>

<p>只需要通过 <code>docker build . -t sample_image</code> 就可以构建自己的镜像了。</p>
<h2 id="准备内核跟-initramfs-“准备内核跟-initramfs”-准备内核跟-initramfs"><a href="#准备内核跟-initramfs-“准备内核跟-initramfs”-准备内核跟-initramfs" class="headerlink" title="[](# 准备内核跟 initramfs “准备内核跟 initramfs”)准备内核跟 initramfs"></a>[](# 准备内核跟 initramfs “准备内核跟 initramfs”)准备内核跟 initramfs</h2><p>镜像生成好了以后，下一步就是准备内核跟构建 initramfs 了。注意这一步操作尽量在你打算用来启动 docker 镜像的机器上进行，因为 mkinitcpio 会自动根据机器把相应的内核模块放入 initramfs 中去，如果在别的机器上进行的话，那就可能会有一些驱动没有被自动装入 initramfs 中。如前所述，这一步的工作是在 docker 容器中进行的。首先运行容器并开启一个 shell：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -v $(pwd):/workspace -w /workspace -it sample\_image bash  </span><br></pre></td></tr></table></figure>


<p>然后在容器中执行如下命令：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mkinitcpio -p linux  </span><br><span class="line">cp /boot/\* .  </span><br><span class="line">exit  </span><br></pre></td></tr></table></figure>


<p>然后就可以在当前目录下看到准备好的 <code>initramfs-linux-fallback.img</code>、<code>initramfs-linux.img</code> 以及 <code>vmlinuz-linux</code> 了。</p>
<h2 id="准备-top-layer-的内容-“准备-top-layer-的内容”-准备-top-layer-的内容"><a href="#准备-top-layer-的内容-“准备-top-layer-的内容”-准备-top-layer-的内容" class="headerlink" title="[](# 准备 top-layer 的内容 “准备 top layer 的内容”)准备 top layer 的内容"></a>[](# 准备 top-layer 的内容 “准备 top layer 的内容”)准备 top layer 的内容</h2><p>Top layer 是 <code>mkinitcpio-docker-hooks</code> 引入的新概念，它指的是某个驱动器中的某个目录，这个目录会在启动的时候读写层创建之后，真正的 root 挂载之前，通过 busybox 的 <code>cp -a</code> 命令整个拷贝到读写层里面去。为什么需要 top layer 呢？因为我们需要在多台机器上启动同一个镜像，而不同机器上的往往会根据需要配置不同的配置文件，比如 <code>/etc/fstab</code> 以及 <code>/etc/X11/xorg.conf</code>。另外，DockerHub 免费账户上的镜像都是公开的，<code>/etc/passwd</code>、<code>/etc/shadow</code> 等的私密性文件也不适合放在镜像里面存储。</p>
<p>准备 top layer 的内容，实际上就是找一个文件夹，把需要单独配置的文件，按照从根目录算起的相对路径存放在这个文件夹里面。比如说如果你想给某台机器单独配置 <code>/etc/fstab</code>，那么你就应该在 top layer 的目录中添加 <code>etc/fstab</code> 这个文件。这里推荐的具体的操作流程是：首先通过 <code>docker run -v $(pwd):/workspace -w /workspace -it sample_image bash</code> 进入容器中的 shell，然后在其中做各种配置，比如 <code>useradd ...</code>，完了以后把新生成的配置文件拷贝到 top layer 的文件夹中去</p>
<h2 id="设置启动管理器-“设置启动管理器”-设置启动管理器"><a href="#设置启动管理器-“设置启动管理器”-设置启动管理器" class="headerlink" title="[](# 设置启动管理器 “设置启动管理器”)设置启动管理器"></a>[](# 设置启动管理器 “设置启动管理器”)设置启动管理器</h2><p>设置好了 top layer 以后，我们基本上可以算是万事具备只差东风了。我们只需要简单设置一下启动管理器就可以启动我们的系统了。这里以 refind 为例子，这里假设我们的所有东西放在一个 label 为 “linux” 的 btrfs 分区中，docker 目录（也就是你系统启动以后会挂载到 <code>/var/lib/docker</code> 的目录）存放在这个分区根目录下的一个叫做 “docker” 的子卷中，而内核、initramfs 以及 top layer 都是位于分区根目录下的 “boot_docker” 文件夹中，而我们希望创建的读写层名字叫做“docker_rwlayer”，那么相应的 <code>refind.conf</code> 中的菜单项的代码如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">menuentry archlinux-docker &#123;  </span><br><span class="line"> icon EFI/refind/icons/os\_arch.png  </span><br><span class="line"> volume linux  </span><br><span class="line"> loader boot\_docker/vmlinuz-linux  </span><br><span class="line"> initrd boot\_docker/initramfs-linux.img  </span><br><span class="line"> options &quot;root=LABEL=linux rootflags=subvol=docker\_rwlayer rw docker\_path=docker toplayer=LABEL=linux toplayer\_path=boot\_docker&quot;  </span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>

<p>其中内核选项中，我们通过 <code>root</code> 来指定 docker 目录所在的分区，<code>rootflags</code> 中的 <code>subvol</code> 来指定读写层的位置，<code>docker_path</code> 来指定 docker 目录在 <code>root</code> 中的相对位置；通过 <code>toplayer</code> 来指定 top layer 目录所在的分区，<code>toplayerflags</code> 来指定 top layer 所在分区的挂载选项，<code>toplayer_path</code> 来指定 top layer 的目录在 <code>toplayer</code> 分区中的相对位置。</p>
<p>一切就绪，重启并享受吧！</p>
<p>另外，有兴趣的读者可以看一下这位网友的 docker 镜像作为参考：<br><a target="_blank" rel="noopener external nofollow noreferrer" href="https://cloud.docker.com/swarm/zasdfgbnmsystem/repository/docker/zasdfgbnmsystem/archlinux-kde/general">https://cloud.docker.com/swarm/zasdfgbnmsystem/repository/docker/zasdfgbnmsystem/archlinux-kde/general</a><br><a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/zasdfgbnm-dockers/archlinux-kde">https://github.com/zasdfgbnm-dockers/archlinux-kde</a></p>
<hr>
<blockquote>
<p>to be continued…</p>
</blockquote>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="https://tamsiree.com">Tamsiree</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="https://tamsiree.com/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/Docker/Docker%E9%95%9C%E5%83%8F%E6%90%AD%E5%BB%BA%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/">https://tamsiree.com/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/Docker/Docker%E9%95%9C%E5%83%8F%E6%90%AD%E5%BB%BA%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="external nofollow noreferrer" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来源 <a href="https://tamsiree.com" target="_blank">Tamsiree</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/">开发工具</a><a class="post-meta__tags" href="/tags/Docker/">Docker</a></div><div class="post-share"><div class="social-share" data-image="https://cdn.jsdelivr.net/gh/Tamsiree/Assets@master/Picture/Blog/Cover/bgghjfdghjhgfdae6c862.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/sharejs/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button"><i class="fas fa-qrcode"></i>赞助</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="https://cdn.jsdelivr.net/gh/Tamsiree/Assets@master/Function/qrcode_wechat.jpg" rel="external nofollow noreferrer" target="_blank"><img class="post-qr-code-img" src="/images/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/Tamsiree/Assets@master/Function/qrcode_wechat.jpg" alt="微信"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="https://cdn.jsdelivr.net/gh/Tamsiree/Assets@master/Function/qrcode_alipay.jpg" rel="external nofollow noreferrer" target="_blank"><img class="post-qr-code-img" src="/images/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/Tamsiree/Assets@master/Function/qrcode_alipay.jpg" alt="支付宝"/></a><div class="post-qr-code-desc">支付宝</div></li></ul></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/Game/DNF/DNF%E6%90%AD%E5%BB%BA%E6%9C%8D%E5%8A%A1%E5%99%A8/" title="DNF 搭建服务器"><img class="cover" src="/images/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/Tamsiree/Assets@master/Picture/Blog/Cover/d810950926cc5b4a811ea63b2a3c4160.jpeg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="info"><div class="info-1"><div class="info-item-1">上一篇</div><div class="info-item-2">DNF 搭建服务器</div></div><div class="info-2"><div class="info-item-1">前言这篇文章是我从【台服 DNF 吧】贴吧所学到的内容，在此感谢贴吧各位大佬。本文没有技术讲解，只是一些操作流程，适合新人观摩。文中用到的服务器为百度云，搭建完成后可以，朋友们联机一起打游戏；按照这个步骤，也可以使用虚拟机通过局域网联机。电脑系统是 win10 也可以运行。 正文[](# 原教程地址： “原教程地址：”)原教程地址：DNF 服务端单机架设教学：http://t.cn/R6j0ECl DNF 服务端新手架设教学：http://t.cn/R6jOAqf PVF 文件介绍：http://t.cn/R6jOLw3 国内玩家自制的十佳版本：http://t.cn/R6jOLQQ GM 工具：http://t.cn/R6jOy9J 搭建所用到的知识和步骤上面的教程已经说的很详细了，再次感谢贴吧各位大佬！ 因本人水平技术有限，文中难免出现错误疏漏之处，谨请斧正。 [](# 用到的软件： “用到的软件：”)用到的软件：服务器：    百度云 1 核 / 1GB/40GB / 普通型 III+1M（这个配置应该可以运行 10 个人）  游戏客户端 + 服务端：    http://...</div></div></div></a><a class="pagination-related" href="/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Goland/GoLand%E5%85%8D%E8%B4%B9%E5%BC%80%E6%BA%90%E6%8E%88%E6%9D%83/" title="GoLand 免费开源授权"><img class="cover" src="/images/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/Tamsiree/Assets@master/Picture/Blog/Cover/white_floor.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="info text-right"><div class="info-1"><div class="info-item-1">下一篇</div><div class="info-item-2">GoLand 免费开源授权</div></div><div class="info-2"><div class="info-item-1">前言最近在研究 go 语言，需要用到 goland 编辑器，准备开工。 正文我是一个 gopher， vim ， vs code 都使用过，最后还是切换到了 goland ，可能对于我来说，使用的 goland 更习惯了（当然其他人使用其它工具可能更方便，不抬杠:&lt;） 这篇文章并不是利用什么漏洞后门，而是告知大家 jetbrains 对于开源项目的支持，可以免费通过项目申请得到免费开源授权 。 [](# 申请) 申请申请条件可以看这里：https://www.jetbrains.com/community/opensource/  申请条件 大概要求是在 3 个月内活跃的项目，并且是项目是免费开放使用的就可以得到一年的申请，到期后可继续申请。 [](# 许可条款) 许可条款   许可证提供 1 年，并允许在 1 年内免费升级软件的所有新版本。   如果您的项目仍满足要求，可根据要求提供许可证续订。   一个许可证可以安装在任意数量的计算机上，但不能在两个或更多计算机上同时使用。   许可证仅提供给核心团队开发人员。  [](# 许可限制) 许可限制   许可证仅可用于非商业...</div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/Intellij-IDEA/EmmyLua%E8%B0%83%E8%AF%95Unity/" title="EmmyLua 调试 Unity"><img class="cover" src="/images/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/Tamsiree/Assets@master/Picture/Blog/Cover/bg-a73b613.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2021-04-26</div><div class="info-item-2">EmmyLua 调试 Unity</div></div><div class="info-2"><div class="info-item-1">前言以前用开发 lua 都是使用 sublime，但是 sublime 终究是一个编辑器，调试不是方便，后来在同事的引荐下，接触到了 Intellij IDEA，刚开始使用很不习惯，用了一段时间后，发现 EmmyLua + Unity 用起来很舒服，简单说一下配置过程 安装 Intellij IDEA我使用的是 **IntelliJ IDEA 2019.2.3 (Community Edition)**，这个版本不收费，但足够我们使用了，附上下载地址 https://www.jetbrains.com/idea/download/#section=windows，下载安装即可 安装 EmmyLua请注意，这里面是有坑的，如果你直接在 Settings-&gt;Plugins 中搜索 EmmyLua 安装，是不能调试的（曾经手贱，升级了一下插件，死活连不上），因为最新版的 EmmyLua1.3.2 更新日志中，有如下提示：    更新日志说：因为它经常被防病毒软件拦截，所以删除连接调试（wtf？！，开发机会装杀毒软件？！）所以不要用最新版的，去插件的官网下载老版插件（我用的 1.3...</div></div></div></a><a class="pagination-related" href="/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/VisualStudioCode/VisualStudioCode%E5%BC%80%E5%8F%91Unity/" title="VisualStudioCode 开发 Unity"><img class="cover" src="/images/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/Tamsiree/Assets@master/Picture/Blog/Cover/bgf7b2a19.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2020-01-08</div><div class="info-item-2">VisualStudioCode 开发 Unity</div></div><div class="info-2"><div class="info-item-1">前言因为我的 Alienware 更换成了 Manjaro 系统，想要在 Manjaro 下开发是 Unity, 但是运行环境还是需要折腾一番。 安装 Unity在 AUR 市场搜索下载 UnityHub 程序，然后通过 UnityHub 安装最新版本的 Unity 编辑器。 配置 VSCodeVsCode 安装完成后，我们就可以在我们在 unity3d 中配置我们编写代码的工具了。    打开 unity3d 软件，在 edit 菜单栏中点击 Preferences, 弹出 Unity Preferences 面板，在 Unity Preferences 面板中选择第二项 External Tools，在右侧第一项 External Script Editor 中选择 Browser,然后选择桌面的 VsCode 快捷方式即可，此时我们再在列表中选择我们需要的 Visual Studio Code 即可完成编辑器的配置。   测试 VSCode 打开代码的响应速度下面我们测试一下，我们在 unity3d 中创建一个脚本，然后第一次双击打开，VsCode 从软件响应到打开我们要编...</div></div></div></a><a class="pagination-related" href="/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/AndroidStudio/AndroidStudio%E6%8F%92%E4%BB%B6%E9%9B%86%E5%90%88/" title="AndroidStudio 插件集合"><img class="cover" src="/images/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/Tamsiree/Assets@master/Picture/Blog/Cover/t01cf099416056cb243.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2016-11-19</div><div class="info-item-2">AndroidStudio 插件集合</div></div><div class="info-2"><div class="info-item-1">前言想要更高效的使用 AndroidStudio，当然插件是必不可少的，这里收集了平时觉得不错的插件。 安装说明给出的插件，可直接根据名字，在  AndroidStudio - File - Setting - Plugins - Browse Respositories     中搜索插件，下载成功后，重启 AndroidStudio 即可，如查询不到，则根据给出的下载地址，下载 Jar 文件，再运用本地安装的方法安装插件。   插件codeglance一款提高编程效率的插件, 实现在编辑窗口右侧显示 minimap。  如上图所示，很好用的插件。 可以使用该插件的 IDE 有： IntelliJ IDEA PhpStorm WebStorm PyCharm RubyMine AppCode CLion GoLand DataGrip Rider MPS Android Studio 下载链接：https://plugins.jetbrains.com/plugin/7275-codeglance  Material Theme UIMaterial Theme 主题的 And...</div></div></div></a><a class="pagination-related" href="/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/Pycharm/Pycharm%E6%BF%80%E6%B4%BB%E7%A0%81/" title="Pycharm 激活码"><img class="cover" src="/images/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/Tamsiree/Assets@master/Picture/Blog/Cover/t01296e28f318001c9b.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2018-10-27</div><div class="info-item-2">Pycharm 激活码</div></div><div class="info-2"><div class="info-item-1">Pycharm 激活码 [2019 年 8 月 27 日] 已失效  1MTW881U3Z5-eyJsaWNlbnNlSWQiOiJNVFc4ODFVM1o1IiwibGljZW5zZWVOYW1lIjoiTnNzIEltIiwiYXNzaWduZWVOYW1lIjoiIiwiYXNzaWduZWVFbWFpbCI6IiIsImxpY2Vuc2VSZXN0cmljdGlvbiI6IkZvciBlZHVjYXRpb25hbCB1c2Ugb25seSIsImNoZWNrQ29uY3VycmVudFVzZSI6ZmFsc2UsInByb2R1Y3RzIjpbeyJjb2RlIjoiSUkiLCJwYWlkVXBUbyI6IjIwMTktMTEtMDYifSx7ImNvZGUiOiJBQyIsInBhaWRVcFRvIjoiMjAxOS0xMS0wNiJ9LHsiY29kZSI6IkRQTiIsInBhaWRVcFRvIjoiMjAxOS0xMS0wNiJ9LHsiY29kZSI6IlBTIiwicGFpZFVwVG8iOiIyMDE5LTExLTA2In0seyJjb2RlIjoiR0...</div></div></div></a><a class="pagination-related" href="/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/VisualStudio/VisualStudio%E9%AB%98%E7%BA%A7%E4%BF%9D%E5%AD%98%E9%80%89%E9%A1%B9%E4%B8%8D%E5%AD%98%E5%9C%A8%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/" title="VisualStudio 高级保存选项不存在解决方案"><img class="cover" src="/images/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/Tamsiree/Assets@master/Picture/Blog/Cover/wallhaven-495wxx.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2019-07-18</div><div class="info-item-2">VisualStudio 高级保存选项不存在解决方案</div></div><div class="info-2"><div class="info-item-1">前言 Visual Studio 提供高级保存选项功能，它能指定特定代码文件的编码规范和行尾所使用的换行符。 在 Visual Studio 2019 中，该命令没有默认显示在 “文件” 菜单中。用户需要手工设置，才能显示该命令。     正文操作方法如下： （1）单击 “工具”|“自定义” 命令，弹出 “自定义” 对话框。    1 2        （2）单击 “命令” 标签，进入 “命令” 选项卡。   （3）在 “菜单栏” 下拉列表中，选择 “文件” 选项。   （4）单击 “添加命令” 按钮，弹出 “添加命令” 对话框。    1 2        （5）在 “类别” 列表中，选择 “文件” 选项；在 “命令” 列表中，选择 “高级保存选项” 选项。   （6）单击 “确定” 按钮，关闭 “添加命令” 对话框。   （7）选中 “控件” 列表中的 “高级保存选项” 选项，单击 “上移” 或者 “下移” 按钮，调整该命令的位置。   （8）单击 “关闭” 按钮，完成 “高级保存选项” 命令的添加操作。    1 2          to be continued…  </div></div></div></a><a class="pagination-related" href="/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/VisualStudioCode/VisualStudioCode%E6%8F%92%E4%BB%B6/" title="VisualStudioCode 插件"><img class="cover" src="/images/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/Tamsiree/Assets@master/Picture/Blog/Cover/wallhaven-y47kyn.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2018-09-16</div><div class="info-item-2">VisualStudioCode 插件</div></div><div class="info-2"><div class="info-item-1">前言 在前端开发中，有一个非常好用的工具，Visual Studio Code，简称 VS code。都不用我安利 VS code，大家就会乖乖的去用，无数个大言不惭的攻城狮，都被 VS code 比德芙还丝滑的强大功能所折服。我是来给大家安利插件的，想做个比较全面的插件集合给大家。网上的我也看过一些，但是都比较零散，时间也久了一些，我结合最近的情况，总结一下造福大家，才是我想做的。手动比心❤。   日常安利VS code 特点：   开源，免费； 自定义配置 集成 git 智能提示强大 支持各种文件格式（html/jade/css/less/sass/xml） 调试功能强大 各种方便的快捷键 强大的插件扩展   对程序员这么友好，没理由不用。  Visual Studio Code（VScode ）官网　：https://code.visualstudio.com/   Visual Studio Code（VScode ）github 地址 ：https://github.com/Microsoft/vscode  安装插件的方式方法一：  按 F1 或 Ctrl + Shi...</div></div></div></a></div></div><hr class="custom-hr"/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div id="waline-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/images/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/Tamsiree/Assets@master/Avatar/avatar_sky_circle.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">Tamsiree</div><div class="author-info-description">勇于尝试才有可能迈向成功</div><div class="site-data"><a href="/archives/"><div class="headline">文章</div><div class="length-num">200</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">140</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">143</div></a></div><a id="card-info-btn" target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/tamsiree"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons"><a class="social-icon" href="https://github.com/Tamsiree" rel="external nofollow noreferrer" target="_blank" title="Github"><i class="fab fa-github-square"></i></a><a class="social-icon" href="mailto:tamsiree.com@gmail.com" rel="external nofollow noreferrer" target="_blank" title="Email"><i class="fas fa-envelope-square"></i></a><a class="social-icon" href="/atom.xml" target="_blank" title="RSS"><i class="fas fa-rss-square"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">只有用心灵才能看得清事物的本质，真正重要的东西是肉眼无法看见的。</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%89%8D%E8%A8%80"><span class="toc-number">1.</span> <span class="toc-text">前言</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%AD%A3%E6%96%87"><span class="toc-number">2.</span> <span class="toc-text">正文</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#docker-%E5%93%B2%E5%AD%A6-%E2%80%9Cdocker-%E5%93%B2%E5%AD%A6%E2%80%9D-docker-%E5%93%B2%E5%AD%A6"><span class="toc-number">3.</span> <span class="toc-text">[](#docker 哲学 “docker 哲学”)docker 哲学</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#docker-%E5%AD%98%E5%82%A8%E9%A9%B1%E5%8A%A8%E7%9A%84%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86-%E2%80%9Cdocker-%E5%AD%98%E5%82%A8%E9%A9%B1%E5%8A%A8%E7%9A%84%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86%E2%80%9D-docker-%E5%AD%98%E5%82%A8%E9%A9%B1%E5%8A%A8%E7%9A%84%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86"><span class="toc-number">4.</span> <span class="toc-text">[](#docker 存储驱动的工作原理 “docker 存储驱动的工作原理”)docker 存储驱动的工作原理</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%90%AF%E5%8A%A8%E5%88%B0-docker-%E9%95%9C%E5%83%8F%E4%B8%AD%E5%8E%BB-%E2%80%9C%E5%90%AF%E5%8A%A8%E5%88%B0-docker-%E9%95%9C%E5%83%8F%E4%B8%AD%E5%8E%BB%E2%80%9D-%E5%90%AF%E5%8A%A8%E5%88%B0-docker-%E9%95%9C%E5%83%8F%E4%B8%AD%E5%8E%BB"><span class="toc-number">5.</span> <span class="toc-text">[](# 启动到 docker 镜像中去 “启动到 docker 镜像中去”)启动到 docker 镜像中去</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#mkinitcpio-docker-hooks-%E7%9A%84%E4%BD%BF%E7%94%A8-%E2%80%9Cmkinitcpio-docker-hooks-%E7%9A%84%E4%BD%BF%E7%94%A8%E2%80%9D-mkinitcpio-docker-hooks-%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-number">6.</span> <span class="toc-text">[](#mkinitcpio-docker-hooks 的使用 “mkinitcpio-docker-hooks 的使用”)mkinitcpio-docker-hooks 的使用</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#docker-%E9%95%9C%E5%83%8F%E7%9A%84%E5%87%86%E5%A4%87-%E2%80%9Cdocker-%E9%95%9C%E5%83%8F%E7%9A%84%E5%87%86%E5%A4%87%E2%80%9D-docker-%E9%95%9C%E5%83%8F%E7%9A%84%E5%87%86%E5%A4%87"><span class="toc-number">6.1.</span> <span class="toc-text">[](#docker 镜像的准备 “docker 镜像的准备”)docker 镜像的准备</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%89%E8%A3%85%E5%B9%B6%E9%85%8D%E7%BD%AE-mkinitcpio-docker-hooks-%E2%80%9C%E5%AE%89%E8%A3%85%E5%B9%B6%E9%85%8D%E7%BD%AE-mkinitcpio-docker-hooks%E2%80%9D-%E5%AE%89%E8%A3%85%E5%B9%B6%E9%85%8D%E7%BD%AE-mkinitcpio-docker-hooks"><span class="toc-number">6.2.</span> <span class="toc-text">[](# 安装并配置 mkinitcpio-docker-hooks “安装并配置 mkinitcpio-docker-hooks”)安装并配置 mkinitcpio-docker-hooks</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%87%86%E5%A4%87%E5%86%85%E6%A0%B8%E8%B7%9F-initramfs-%E2%80%9C%E5%87%86%E5%A4%87%E5%86%85%E6%A0%B8%E8%B7%9F-initramfs%E2%80%9D-%E5%87%86%E5%A4%87%E5%86%85%E6%A0%B8%E8%B7%9F-initramfs"><span class="toc-number">6.3.</span> <span class="toc-text">[](# 准备内核跟 initramfs “准备内核跟 initramfs”)准备内核跟 initramfs</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%87%86%E5%A4%87-top-layer-%E7%9A%84%E5%86%85%E5%AE%B9-%E2%80%9C%E5%87%86%E5%A4%87-top-layer-%E7%9A%84%E5%86%85%E5%AE%B9%E2%80%9D-%E5%87%86%E5%A4%87-top-layer-%E7%9A%84%E5%86%85%E5%AE%B9"><span class="toc-number">6.4.</span> <span class="toc-text">[](# 准备 top-layer 的内容 “准备 top layer 的内容”)准备 top layer 的内容</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AE%BE%E7%BD%AE%E5%90%AF%E5%8A%A8%E7%AE%A1%E7%90%86%E5%99%A8-%E2%80%9C%E8%AE%BE%E7%BD%AE%E5%90%AF%E5%8A%A8%E7%AE%A1%E7%90%86%E5%99%A8%E2%80%9D-%E8%AE%BE%E7%BD%AE%E5%90%AF%E5%8A%A8%E7%AE%A1%E7%90%86%E5%99%A8"><span class="toc-number">6.5.</span> <span class="toc-text">[](# 设置启动管理器 “设置启动管理器”)设置启动管理器</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/%E6%B8%B8%E6%88%8F/%E7%8B%AC%E7%AB%8B%E6%B8%B8%E6%88%8F/%E7%8B%AC%E7%AB%8B%E6%B8%B8%E6%88%8F%E7%9A%84%E6%88%90%E5%8A%9F%E4%B9%8B%E6%AF%8D/" title="独立游戏的成功之母"><img src="/images/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/Tamsiree/Assets@master/Picture/Blog/Cover/552b1999aa4d5a2e75352fa2f6e93d51.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="独立游戏的成功之母"/></a><div class="content"><a class="title" href="/%E6%B8%B8%E6%88%8F/%E7%8B%AC%E7%AB%8B%E6%B8%B8%E6%88%8F/%E7%8B%AC%E7%AB%8B%E6%B8%B8%E6%88%8F%E7%9A%84%E6%88%90%E5%8A%9F%E4%B9%8B%E6%AF%8D/" title="独立游戏的成功之母">独立游戏的成功之母</a><time datetime="2025-11-11T05:08:38.000Z" title="发表于 2025-11-11 13:08:38">2025-11-11</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/Docker/MongoDB/Docker%E4%B8%ADMongoDB%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E5%A4%87%E4%BB%BD%E4%B8%8E%E6%81%A2%E5%A4%8D/" title="Docker 中 MongoDB 数据库的备份与恢复"><img src="/images/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/Tamsiree/Assets@master/Picture/Blog/Cover/cdd893c83169033d6b4a8354f1ab9d37.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Docker 中 MongoDB 数据库的备份与恢复"/></a><div class="content"><a class="title" href="/Docker/MongoDB/Docker%E4%B8%ADMongoDB%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E5%A4%87%E4%BB%BD%E4%B8%8E%E6%81%A2%E5%A4%8D/" title="Docker 中 MongoDB 数据库的备份与恢复">Docker 中 MongoDB 数据库的备份与恢复</a><time datetime="2025-11-06T00:49:58.000Z" title="发表于 2025-11-06 08:49:58">2025-11-06</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/%E9%9A%8F%E6%89%8B%E8%AE%B0/Unity%E5%A4%9A%E7%BA%BF%E7%A8%8B%E6%B8%B2%E6%9F%93%E5%AF%BC%E8%87%B4%E9%83%A8%E5%88%86%E6%89%8B%E6%9C%BA%E5%B4%A9%E6%BA%83/" title="Unity 多线程渲染导致部分手机崩溃"><img src="/images/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/Tamsiree/Assets@master/Picture/Blog/Cover/9408053447.jpeg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Unity 多线程渲染导致部分手机崩溃"/></a><div class="content"><a class="title" href="/%E9%9A%8F%E6%89%8B%E8%AE%B0/Unity%E5%A4%9A%E7%BA%BF%E7%A8%8B%E6%B8%B2%E6%9F%93%E5%AF%BC%E8%87%B4%E9%83%A8%E5%88%86%E6%89%8B%E6%9C%BA%E5%B4%A9%E6%BA%83/" title="Unity 多线程渲染导致部分手机崩溃">Unity 多线程渲染导致部分手机崩溃</a><time datetime="2023-11-09T11:55:51.000Z" title="发表于 2023-11-09 19:55:51">2023-11-09</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/%E9%9A%8F%E6%89%8B%E8%AE%B0/%E5%A5%BD%E7%94%A8%E7%9A%84CDN%E4%B9%8BjsDelivr/" title="好用的 CDN 之 jsDelivr"><img src="/images/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/Tamsiree/Assets@master/DeskTop/20b24a69649941669d83bb997b01fed6.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="好用的 CDN 之 jsDelivr"/></a><div class="content"><a class="title" href="/%E9%9A%8F%E6%89%8B%E8%AE%B0/%E5%A5%BD%E7%94%A8%E7%9A%84CDN%E4%B9%8BjsDelivr/" title="好用的 CDN 之 jsDelivr">好用的 CDN 之 jsDelivr</a><time datetime="2023-10-16T07:00:56.000Z" title="发表于 2023-10-16 15:00:56">2023-10-16</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/%E9%9A%8F%E6%89%8B%E8%AE%B0/Unity%E5%9D%90%E6%A0%87%E7%B3%BB%E7%BB%9F/" title="Unity 坐标系统"><img src="/images/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/Tamsiree/Assets@master/DeskTop/wallhaven-z8rqjo.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Unity 坐标系统"/></a><div class="content"><a class="title" href="/%E9%9A%8F%E6%89%8B%E8%AE%B0/Unity%E5%9D%90%E6%A0%87%E7%B3%BB%E7%BB%9F/" title="Unity 坐标系统">Unity 坐标系统</a><time datetime="2023-10-14T06:11:46.000Z" title="发表于 2023-10-14 14:11:46">2023-10-14</time></div></div></div></div></div></div></main><footer id="footer"><div class="footer-other"><div class="footer-copyright"><span class="copyright">&copy;&nbsp;2016 - 2025 By Tamsiree</span></div><div class="footer_custom_text">不要盯着我看，已经到底啦～</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">简</button><button id="darkmode" type="button" title="日间和夜间模式切换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="前往评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=5.5.3"></script><script src="/js/main.js?v=5.5.3"></script><script src="/js/tw_cn.js?v=5.5.3"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@6.1.7/dist/fancybox/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload@19.1.3/dist/lazyload.iife.min.js"></script><div class="js-pjax"><script>(() => {
  let initFn = window.walineFn || null
  const isShuoshuo = GLOBAL_CONFIG_SITE.pageType === 'shuoshuo'
  const option = {"placeholder":"留下你的脚印与心声~","pageSize":10,"lang":"zh-CN","requiredFields":["nick"],"avatar":"wavatar"}

  const destroyWaline = ele => ele.destroy()

  const initWaline = (Fn, el = document, path = window.location.pathname) => {
    const waline = Fn({
      el: el.querySelector('#waline-wrap'),
      serverURL: 'https://comment.tamsiree.com',
      pageview: false,
      dark: 'html[data-theme="dark"]',
      comment: false,
      ...option,
      path: isShuoshuo ? path : (option && option.path) || path
    })

    if (isShuoshuo) {
      window.shuoshuoComment.destroyWaline = () => {
        destroyWaline(waline)
        if (el.children.length) {
          el.innerHTML = ''
          el.classList.add('no-comment')
        }
      }
    }
  }

  const loadWaline = (el, path) => {
    if (initFn) initWaline(initFn, el, path)
    else {
      btf.getCSS('https://cdn.jsdelivr.net/npm/@waline/client@3.8.0/dist/waline.min.css')
        .then(() => import('https://cdn.jsdelivr.net/npm/@waline/client@3.8.0/dist/waline.min.js'))
        .then(({ init }) => {
          initFn = init || Waline.init
          initWaline(initFn, el, path)
          window.walineFn = initFn
        })
    }
  }

  if (isShuoshuo) {
    'Waline' === 'Waline'
      ? window.shuoshuoComment = { loadComment: loadWaline } 
      : window.loadOtherComment = loadWaline
    return
  }

  if ('Waline' === 'Waline' || !true) {
    if (true) btf.loadComment(document.getElementById('waline-wrap'),loadWaline)
    else setTimeout(loadWaline, 0)
  } else {
    window.loadOtherComment = loadWaline
  }
})()</script></div><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8688374801147098" crossorigin="anonymous"></script><script defer="defer" id="fluttering_ribbon" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/dist/canvas-fluttering-ribbon.min.js"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/metingjs/dist/Meting.min.js"></script><script>(() => {
  const destroyAplayer = () => {
    if (window.aplayers) {
      for (let i = 0; i < window.aplayers.length; i++) {
        if (!window.aplayers[i].options.fixed) {
          window.aplayers[i].destroy()
        }
      }
    }
  }

  const runMetingJS = () => {
    typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()
  }

  btf.addGlobalFn('pjaxSend', destroyAplayer, 'destroyAplayer')
  btf.addGlobalFn('pjaxComplete', loadMeting, 'runMetingJS')
})()</script><script src="https://cdn.jsdelivr.net/npm/pjax@0.2.8/pjax.min.js" defer="defer"></script><script>document.addEventListener('DOMContentLoaded', () => {
  const pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]

  window.pjax = new Pjax({
    elements: 'a:not([target="_blank"]):not([href="/talking/"])',
    selectors: pjaxSelectors,
    cacheBust: false,
    analytics: false,
    scrollRestoration: false
  })

  const triggerPjaxFn = (val) => {
    if (!val) return
    Object.values(val).forEach(fn => {
      try {
        fn()
      } catch (err) {
        console.debug('Pjax callback failed:', err)
      }
    })
  }

  document.addEventListener('pjax:send', () => {
    // removeEventListener
    btf.removeGlobalFnEvent('pjaxSendOnce')
    btf.removeGlobalFnEvent('themeChange')

    // reset readmode
    const $bodyClassList = document.body.classList
    if ($bodyClassList.contains('read-mode')) $bodyClassList.remove('read-mode')

    triggerPjaxFn(window.globalFn.pjaxSend)
  })

  document.addEventListener('pjax:complete', () => {
    btf.removeGlobalFnEvent('pjaxCompleteOnce')
    document.querySelectorAll('script[data-pjax]').forEach(item => {
      const newScript = document.createElement('script')
      const content = item.text || item.textContent || item.innerHTML || ""
      Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
      newScript.appendChild(document.createTextNode(content))
      item.parentNode.replaceChild(newScript, item)
    })

    triggerPjaxFn(window.globalFn.pjaxComplete)
  })

  document.addEventListener('pjax:error', e => {
    if (e.request.status === 404) {
      true
        ? pjax.loadUrl('/404.html')
        : window.location.href = e.request.responseURL
    }
  })
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><i class="fas fa-spinner fa-pulse" id="loading-status" hidden="hidden"></i><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="text-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据加载中</span></div><div class="local-search-input"><input placeholder="搜索文章" type="text"/></div><hr/><div id="local-search-results"></div><div class="ais-Pagination" id="local-search-pagination" style="display:none;"><ul class="ais-Pagination-list"></ul></div><div id="local-search-stats"></div></div><div id="search-mask"></div><script src="/js/search/local-search.js?v=5.5.3"></script></div></div></body></html>